<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">


<TITLE>Autoconf - Запуск скриптов configure</TITLE>
</HEAD>
<body><b><a href="http://www.opennet.ru/docs/">Архив документации OpenNet.ru</a> / 
Раздел "<a href="http://www.opennet.ru/docs/124.shtml">Программирование, языки</a>" /
<a href="index.html">Индекс</a>
</b>
<hr noshade size=1>

Go to the <A HREF="autoconf-ru_1.html">first</A>, <A HREF="autoconf-ru_9.html">previous</A>, <A HREF="autoconf-ru_11.html">next</A>, <A HREF="autoconf-ru_19.html">last</A> section, <A HREF="autoconf-ru_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC81" HREF="autoconf-ru_toc.html#TOC81">Запуск скриптов <CODE>configure</CODE></A></H1>
<P>
@anchor{Invoking configure}


<P>
Ниже находятся рекомендации по настройке пакета, использующего
скрипт <CODE>configure</CODE>.  Эти рекомендации можно включить в файл
<TT>`INSTALL'</TT> вашего пакета.  Текстовая версия файла <TT>`INSTALL'</TT>,
которую вы можете использовать, поставляется с Autoconf.




<H2><A NAME="SEC82" HREF="autoconf-ru_toc.html#TOC82">Простая установка</A></H2>
<P>
@anchor{Basic Installation}


<P>
Вот основные инструкции по установке.


<P>
Скрипт <CODE>configure</CODE> пытается определить правильные значения для
различных, зависящих от системы переменных, которые используются в
процессе установки. Он использует эти переменные для создания файлов
<TT>`Makefile'</TT> в каждом из каталогов пакета. он также может создавать
один или несколько файлов <TT>`.h'</TT> содержащих зависящие от системы
определения. В заключение, он создает скрипт командного процессора с
именем <TT>`config.status'</TT>, который вы можете в дальнейшем запускать
для воссоздания текущей настройки, также создается файл
<TT>`config.cache'</TT>, который сохраняет результаты тестов, для ускорения
перенастройки, и файл <TT>`config.log'</TT>, содержащий вывод компилятора
(этот файл в основном полезен для отладки <CODE>configure</CODE>).


<P>
Если для компиляции пакета вам необходимо выполнить нетривиальные вещи,
то то пожалуйста попытайтесь определить как <CODE>configure</CODE> мог бы
проверить как выполнить их, и затем пошлите diff-файл или инструкции на
адрес, данный в файле <TT>`README'</TT>, так что они могут быть рассмотрены
для включения в следующий выпуск. Если в некоторых случаях
<TT>`config.cache'</TT> содержит результаты, которые вы не хотите хранить,
то вы можете исправить или удалить его.


<P>
Файл <TT>`configure.in'</TT> используется для создания скрипта <TT>`configure'</TT> 
программой <CODE>autoconf</CODE>. Вам необходимо иметь  <TT>`configure.in'</TT>
только, если вы хотите изменить его или заново создать скрипт 
<TT>`configure'</TT> с помощью более новой версии <CODE>autoconf</CODE>.


<P>
Наиболее простым способом компиляции данного пакета являются следующие
действия:



<OL>
<LI>

перейдите в каталог, содержащий исходный код пакета и наберите
<SAMP>`./configure'</SAMP> в командной строке, для того, чтобы настроить пакет для
вашей системы. Если вы используете <CODE>csh</CODE> на старой версии System V,
то вам может понадобиться набрать <SAMP>`sh ./configure'</SAMP> вместо предыдущего
примера, для того, чтобы не допустить выполнения данного скрипта с помощью 
<CODE>csh</CODE>.

Работа <CODE>configure</CODE> займет некоторое время. В течении выполнения скрипт
выдает некоторые сообщения, о том какие свойства он проверяет.

<LI>

Наберите <SAMP>`make'</SAMP> для компиляции пакета.

<LI>

Вы можете набрать <SAMP>`make check'</SAMP> для запуска любых собственных тестов,
которые поставляются вместе с пакетом.

<LI>

Наберите <SAMP>`make install'</SAMP> для установки программ и файлов данных и
документации.

<LI>

вы можете удалить исполнимые файлы программ и объектные файлы из каталога с
исходными текстами пакета набрав <SAMP>`make clean'</SAMP>. Для удаления файлов
созданных <CODE>configure</CODE> (так что вы можете скомпилировать пакет с
помощью разных компиляторов), наберите <SAMP>`make distclean'</SAMP>. Также
существует цель <SAMP>`make maintainer-clean'</SAMP>, но она в основном
предназначена для разработчиков программного обеспечения. Если вы
используете ее, то вы должны получить все другие программы, для того,
чтобы обновлять файлы, которые поставляются с дистрибутивом.
</OL>



<H2><A NAME="SEC83" HREF="autoconf-ru_toc.html#TOC83">Компиляторы и ключи</A></H2>
<P>
@anchor{Compilers and Options}


<P>
Некоторые системы требуют необычных ключей для компиляции или
компоновки, о которых скрипт <CODE>configure</CODE> просто не знает. Вы можете
задать начальные значения для переменных <CODE>configure</CODE> установив их в
среде. Используя командный процессор совместимый с процессором Bourne вы
можете задать эти переменные с помощью командной строки, подобной этой:



<PRE>
CC=c89 CFLAGS=-O2 LIBS=-lposix ./configure
</PRE>

<P>
или в системах, в которых имеется программа <CODE>env</CODE>, вы можете
выполнить следующий код:



<PRE>
env CPPFLAGS=-I/usr/local/include LDFLAGS=-s ./configure
</PRE>



<H2><A NAME="SEC84" HREF="autoconf-ru_toc.html#TOC84">Компиляция для нескольких архитектур</A></H2>
<P>
@anchor{Multiple Architectures}


<P>
Вы можете одновременно скомпилировать пакет для более одного типа
компилятора, поместив объектные файлы для каждой из архитектур в
отдельный каталог. Для того чтобы сделать это, вы должны использовать
такую версию программы <CODE>make</CODE>, которая поддерживают переменную
<CODE>VPATH</CODE>, например, такую как GNU <CODE>make</CODE>. Перейдите в каталог,
в который вы хотите поместить объектные и исполняемые файлы и запустите
оттуда скрипт <CODE>configure</CODE>. <CODE>configure</CODE> автоматически проверит
исходные тексты в каталог, в котором находится <CODE>configure</CODE> в также
в каталоге <TT>`..'</TT>.


<P>
Если вы используете программу <CODE>make</CODE>, которая не поддерживает
переменную <CODE>VPATH</CODE>, то вы должны одновременно компилировать
программу только для одной архитектуры. После того, как вы установили
пакет для конкретной архитектуры, используйте правило <SAMP>`make
distclean'</SAMP> до выполнения настройки для другой архитектуры.




<H2><A NAME="SEC85" HREF="autoconf-ru_toc.html#TOC85">Имена для установки</A></H2>
<P>
@anchor{Installation Names}


<P>
По умолчанию <SAMP>`make install'</SAMP> установит файлы пакета в
<TT>`/usr/local/bin'</TT>, <TT>`/usr/local/man'</TT>, и т.д.. Вы можете задать
префикс установки, который отличается от <TT>`/usr/local'</TT>. Это
выполняется передачей <CODE>configure</CODE> ключа командной строки
<SAMP>`--prefix=<VAR>path</VAR>'</SAMP>.


<P>
Вы можете указать разные префиксы установки для специфических
архитектуры файлов, и для файлов не зависящих от архитектуры. Если вы
зададите  <CODE>configure</CODE> ключ <SAMP>`--exec-prefix=<VAR>path</VAR>'</SAMP>, то
пакет будет использовать <VAR>path</VAR> как префикс для установки программ и
библиотек. Документация и другие файлы данных будут использовать обычный
префикс.


<P>
В добавок, если вы используете необычное расположение каталогов, то вы
можете задать ключи, подобные <SAMP>`--bindir=<VAR>path</VAR>'</SAMP>, для того,
чтобы указать различные значения для отдельных типов файлов. Запустите
<SAMP>`configure --help'</SAMP> для получения списка каталогов, которые вы
можете задать в командной строке, и списка типов файлов устанавливаемых
в каждый из каталогов.


<P>
Если пакет поддерживает это, то вы можете установить программу с
дополнительными суффиксами или префиксами в имени программы.Это
выполняется заданием <CODE>configure</CODE> ключа
<SAMP>`--program-prefix=<VAR>PREFIX</VAR>'</SAMP> или
<SAMP>`--program-suffix=<VAR>SUFFIX</VAR>'</SAMP>.




<H2><A NAME="SEC86" HREF="autoconf-ru_toc.html#TOC86">Дополнительные возможности</A></H2>
<P>
@anchor{Optional Features}


<P>
Некоторые пакеты обращают внимание на ключи
<SAMP>`--enable-<VAR>feature</VAR>'</SAMP> переданные <CODE>configure</CODE>, где
<VAR>feature</VAR> показывает дополнительную часть пакета. Они также могут
обращать внимание на ключи <SAMP>`--with-<VAR>package</VAR>'</SAMP>, где
<VAR>package</VAR> является чем-то подобным <SAMP>`gnu-as'</SAMP> или <SAMP>`x'</SAMP> (для X
Window System). В файле <TT>`README'</TT> должны быть описаны распознаваемые
пакетом ключи <SAMP>`--enable-'</SAMP> и <SAMP>`--with-'</SAMP>.


<P>
Для пакетов, которые использую X Window System, <CODE>configure</CODE> обычно
может автоматически найти заголовочные файлы и библиотеки X, однако если
скрипт не смог определить их расположение, то вы можете запустить
<CODE>configure</CODE> с ключами <SAMP>`--x-includes=<VAR>dir</VAR>'</SAMP> и
<SAMP>`--x-libraries=<VAR>dir</VAR>'</SAMP> и указав правильные значения.




<H2><A NAME="SEC87" HREF="autoconf-ru_toc.html#TOC87">Указание типа системы</A></H2>
<P>
@anchor{System Type}


<P>
Может быть много возможностей, которые <CODE>configure</CODE> не сможет
определить автоматически, но которые нужны для определения типа системы
на которой будет запускать пакет. Обычно <CODE>configure</CODE> может
выполнить определение типа системы, но если в случае неудачи скрипт выдаст
сообщение, говорящее о том, что он не смог определить тип системы, то
задайте тип с помощью ключа <SAMP>`--host=<VAR>type</VAR>'</SAMP>. <VAR>type</VAR> может
являть либо коротким именем, определяющим тип системы, таким как
<SAMP>`sun4'</SAMP>, либо каноническим именем, содержащим 3 поля:



<PRE>
<VAR>cpu</VAR>-<VAR>company</VAR>-<VAR>system</VAR>
</PRE>

<P>
загляните в файл <TT>`config.sub'</TT> для того, чтобы узнать возможные
значения для каждого из полей. Если файл <TT>`config.sub'</TT> не включен в
состав пакета, то данному пакету не нужно знать тип системы.


<P>
Если вы собираете утилиты компилятора для кросс-компиляции, то вы также
можете использовать ключ <SAMP>`--target=<VAR>type</VAR>'</SAMP> для выбора типа
системы, для которой эти утилиты будут создавать код, а также ключ
<SAMP>`--build=<VAR>type</VAR>'</SAMP> для выбора типа системы на которой вы
компилируете пакет.




<H2><A NAME="SEC88" HREF="autoconf-ru_toc.html#TOC88">Совместное использование значений по умолчанию</A></H2>
<P>
@anchor{Sharing Defaults}


<P>
Если вы хотите чтобы значения по умолчанию для скриптов <CODE>configure</CODE>
использовались совместно, то вы можете создать локальный скрипт с именем
<TT>`config.site'</TT>, который задаст значения по умолчанию для таких
переменных как <CODE>CC</CODE>, <CODE>cache_file</CODE> и
<CODE>prefix</CODE>. <CODE>configure</CODE> ищет
<TT>`<VAR>prefix</VAR>/share/config.site'</TT>, если он существует, а затем 
<TT>`<VAR>prefix</VAR>/etc/config.site'</TT> если он существует. Или вы можете
установить переменную среды <CODE>CONFIG_SITE</CODE> равную пути к этому
скрипту. Предупреждение: не все скрипты <CODE>configure</CODE> производят
поиск этого скрипта.




<H2><A NAME="SEC89" HREF="autoconf-ru_toc.html#TOC89">Контроль выполнения</A></H2>
<P>
@anchor{Operation Controls}


<P>
<CODE>configure</CODE> распознает следующие ключи командной строки, которые
контролируют как он выполняется.


<DL COMPACT>

<DT><CODE>--cache-file=<VAR>file</VAR></CODE>
<DD>
Использовать и сохранять результаты тестов в файле <VAR>file</VAR> вместо
файла <TT>`./config.cache'</TT>. Для запрещения кэширования установите
<VAR>file</VAR> равным <TT>`/dev/null'</TT>, при отладке <CODE>configure</CODE>.

<DT><CODE>--help</CODE>
<DD>
Выдает список ключей командной строки <CODE>configure</CODE> и прекращает
работу.

<DT><CODE>--quiet</CODE>
<DD>
<DT><CODE>--silent</CODE>
<DD>
<DT><CODE>-q</CODE>
<DD>
Не выдает сообщений о том, какие проверки выполняются. Для запрещения
всего вывода, перенаправьте вывод в файл <TT>`/dev/null'</TT> (сообщения об
ошибках все равно будут отображаться).

<DT><CODE>--srcdir=<VAR>dir</VAR></CODE>
<DD>
Ищет исходный текст пакета в каталоге <VAR>dir</VAR>. Обычно <CODE>configure</CODE>
может автоматически определить этот каталог.

<DT><CODE>--version</CODE>
<DD>
Выдает номер версии Autoconf использовавшейся для создания скрипта
<CODE>configure</CODE> и прекращает работу.
</DL>

<P>
<CODE>configure</CODE> также принимает некоторые другие, не так сильно
полезные ключи.


<P><HR><P>
Go to the <A HREF="autoconf-ru_1.html">first</A>, <A HREF="autoconf-ru_9.html">previous</A>, <A HREF="autoconf-ru_11.html">next</A>, <A HREF="autoconf-ru_19.html">last</A> section, <A HREF="autoconf-ru_toc.html">table of contents</A>.
<hr noshade size=1>
<b><a href="http://www.opennet.ru/docs/">Архив документации на OpenNet.ru</a>
</BODY>
</HTML>
