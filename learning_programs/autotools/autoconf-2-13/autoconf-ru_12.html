<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">


<TITLE>Autoconf - Вопросы об Autoconf</TITLE>
</HEAD>
<body><b><a href="http://www.opennet.ru/docs/">Архив документации OpenNet.ru</a> / 
Раздел "<a href="http://www.opennet.ru/docs/124.shtml">Программирование, языки</a>" /
<a href="index.html">Индекс</a>
</b>
<hr noshade size=1>

Go to the <A HREF="autoconf-ru_1.html">first</A>, <A HREF="autoconf-ru_11.html">previous</A>, <A HREF="autoconf-ru_13.html">next</A>, <A HREF="autoconf-ru_19.html">last</A> section, <A HREF="autoconf-ru_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC91" HREF="autoconf-ru_toc.html#TOC91">Вопросы об Autoconf</A></H1>
<P>
@anchor{Questions}


<P>
Раз за разом задаются одни и те же вопросы об Autoconf.  Вот некоторые
из них.




<H2><A NAME="SEC92" HREF="autoconf-ru_toc.html#TOC92">Распространение скриптов <CODE>configure</CODE></A></H2>
<P>
@anchor{Distributing}



<PRE>
Какие ограничения существуют на распространение скриптов <CODE>configure</CODE>,
созданных Autoconf?  Как могут затронуть они мою программу, которая 
использует эти скрипты?
</PRE>

<P>
На использование или распространение скриптов настройки, созданных
Autoconf, не накладывается никаких ограничений. В Autoconf версии 1, они
подпадали под действие GNU General Public License.  Мы все еще поощряем
авторов к распространению их работ под действием лицензий, сходных с GPL,
но это не обязательно при использовании Autoconf.


<P>
По поводу других файлов, которые могут быть использованы с <CODE>configure</CODE>:
<TT>`config.h.in'</TT> находятся под теми авторскими правами, которые
используются для вашего <TT>`configure.in'</TT>, поскольку эти файлы
являются производными этого файла и свободно доступного файла
<TT>`acconfig.h'</TT>.  <TT>`config.sub'</TT> и <TT>`config.guess'</TT> не подпадают 
под GPL в том случае, когда они используются со скриптами
<CODE>configure</CODE>, созданными с помощью Autoconf: в этом случае вы можете 
распространять их под той же лицензией, что и остальной
пакет.  <TT>`install-sh'</TT> получен от X Consortium и не защищен
авторскими правами.




<H2><A NAME="SEC93" HREF="autoconf-ru_toc.html#TOC93">Почему требуется GNU <CODE>m4</CODE>?</A></H2>
<P>
@anchor{Why GNU m4}



<PRE>
Почему Autoconf требует наличия GNU <CODE>m4</CODE>?
</PRE>

<P>
Многие из реализаций <CODE>m4</CODE> имеют зашитые в программу
ограничения на размер и количество макросов, которые Autoconf не может
преодолеть.  В них также отсутствуют некоторые встроенные макросы, без
которых было бы трудно создать такое сложное приложение, как Autoconf, включая:



<PRE>
builtin
indir
patsubst
__file__
__line__
</PRE>

<P>
Поскольку Autoconf нужен только людям, сопровождающим программное
обеспечение, и поскольку GNU <CODE>m4</CODE> прост в настройке и установке, то
кажется вполне естественным, что также требуется установить GNU
<CODE>m4</CODE>. Многие люди, сопровождающие программное обеспечение GNU и
другое свободное ПО, уже установили у себя большинство утилит GNU,
потому что предпочитают именно их.




<H2><A NAME="SEC94" HREF="autoconf-ru_toc.html#TOC94">Как я могу начать работу?</A></H2>
<P>
@anchor{Bootstrapping}



<PRE>
Если Autoconf требует GNU <CODE>m4</CODE>, а GNU <CODE>m4</CODE> имеет скрипт 
Autoconf <CODE>configure</CODE>, то как я могу начать работу? Это похоже на 
проблему яйца и курицы!
</PRE>

<P>
Вы неправильно поняли.  Хотя GNU <CODE>m4</CODE>и поставляется со скриптом
<CODE>configure</CODE>, созданным Autoconf, сам Autoconf не требуется для
запуска скрипта и установки GNU <CODE>m4</CODE>. Autoconf требуется только
если вы хотите изменить скрипт <CODE>configure</CODE> для <CODE>m4</CODE>, а это
требуется немногим (в основном тем, кто сопровождает данный пакет).




<H2><A NAME="SEC95" HREF="autoconf-ru_toc.html#TOC95">Почему не используется Imake?</A></H2>
<P>
@anchor{Why Not Imake}



<PRE>
Почему не используется Imake вместо скриптов <CODE>configure</CODE>?
</PRE>

<P>
Разные люди писали ответы на этот вопрос, так что я приведу здесь
переделанный вариант их объяснений.


<P>
Следующий ответ основан на материале, написанном Richard Pixley:


<P>
Скрипты, созданные Autoconf, часто работают на машинах, для которых они не
были предназначены.  То есть они хорошо работают, когда нужно создать
конфигурацию для совершенно новой системы.  Imake такого не умеет.


<P>
Imake использует общую базу данных, специфических для конкретных
систем.  Для X11 этого достаточно, потому что этот пакет делается одной
организацией, которая имеет централизованный контроль над этой базой
данных.


<P>
Утилиты GNU выпускаются не так.  Каждую утилиту GNU сопровождает
отдельный человек, и эти люди разбросаны по всему миру.   Использование
общей базы данных будет просто кошмаром при
сопровождении пакета. Autoconf может показаться неким
подобием базы данных, но на самом деле это не так.  Вместо
перечисления зависимостей от машины, он перечисляет требования программ.


<P>
Если вы рассматриваете набор GNU как набор отдельных утилит, то
возникают сходные проблемы. Но утилиты разработки GNU могут быть
настроены как кросс-утилиты в почти любом сочетании машина+цель. Все эти
конфигурации могут быть установлены одновременно. Она даже могут делить
между собой не зависящие от машины файлы. Imake не позволяет сделать
этого.


<P>
Шаблоны Imake являются формой стандартизации. Стандарты кодирования GNU
позволяют сделать это без ненужного наложения тех же самых ограничений.


<P>
Вот дополнительные объяснения, написанные Per Bothner:


<P>
Одним из преимуществ Imake является то, что он легко создает большие
файлы Makefile, используя директивы препроцессора <CODE>cpp</CODE>
<SAMP>`#include'</SAMP> и механизм макросов. Однако на <CODE>cpp</CODE> невозможно
программировать: у него ограниченные возможности условных операторов и
нет операторов циклов.  Помимо того, <CODE>cpp</CODE> не имеет доступа к
переменным среды.


<P>
Все эти проблемы решаются использованием командного процессора <CODE>sh</CODE>
вместо <CODE>cpp</CODE>. Командный процессор предоставляет полные возможности
программирования, имеет подстановку макросов, может выполнять или
создавать другие скрипты командного процессора и может пользоваться
переменными среды.


<P>
Paul Eggert развил эту тему дальше:


<P>
При использовании Autoconf установщикам пакета не нужно предполагать, что
Imake уже установлен и работает правильно. Это не кажется таким уж
большим достоинством для людей привыкших к Imake, но на многих машинах
Imake не установлен или установка по умолчанию работает не совсем
правильно и, таким образом, требование наличия Imake для установки пакета
будет препятствовать его распространению на таких машинах. Например,
файлы шаблонов и настроек Imake могут быть установлены неправильно на
машине, или процедура построения, используемая Imake, может неправильно
предполагать, что все исходные тексты находятся в одном большом дереве
каталогов, или настройка Imake может предполагать, что имеется один
компилятор, в то время как вам необходимо использовать другой
компилятор, или могут быть несоответствия между версиями Imake,
используемой пакетом и версией Imake, поддерживаемой данной машиной. Эти
проблемы встречаются намного реже при использовании Autoconf, поскольку
каждый пакет поставляется со своим, независимым препроцессором
конфигурации.


<P>
Также Imake часто страдает от неожиданного взаимодействия между
<CODE>make</CODE> и препроцессором C. Фундаментальной проблемой является то,
что препроцессор C был создан для обработки программ на языке C, а не
файлов <TT>`Makefile'</TT>.  Это является менее значимой проблемой при
использовании Autoconf, который использует препроцессор общего
назначения <CODE>m4</CODE>, а автор пакета (а не установщик пакета)
выполняет обработку стандартным способом.


<P>
В заключение, Mark Eichin замечает:


<P>
Imake, в конце концов, не такой уж и расширяемый.  Для того, чтобы добавить к
Imake новую возможность, вам необходимо создать собственный шаблон для
проекта и сдублировать большинство возможностей существующего
шаблона. Это означает, что для сложного проекта использование
поставляемых производителем шаблонов Imake приведет к сбою ---
поскольку они не предоставляют возможностей, в которых нуждается ваш
проект (если только он не является программой для X11).


<P>
Однако с другой стороны:


<P>
Одно из преимуществ Imake по сравнению с <CODE>configure</CODE>: файлы
<TT>`Imakefile'</TT> оказываются значительно меньше (более того, они менее
многословны), чем файлы <TT>`Makefile.in'</TT>. Однако существуют решения
этой проблемы--- по крайней мере для исходных текстов Kerberos V5,
мы изменили файлы для вызова общих частей: фрагментов <TT>`Makefile'</TT> для всего
дерева каталогов, которые находятся в файлах <TT>`post.in'</TT> и
<TT>`pre.in'</TT>.  Это означает, что часть общей функциональности не дублируется,
даже хотя они будут находиться в скриптах <CODE>configure</CODE>.


<P><HR><P>
Go to the <A HREF="autoconf-ru_1.html">first</A>, <A HREF="autoconf-ru_11.html">previous</A>, <A HREF="autoconf-ru_13.html">next</A>, <A HREF="autoconf-ru_19.html">last</A> section, <A HREF="autoconf-ru_toc.html">table of contents</A>.
<hr noshade size=1>
<b><a href="http://www.opennet.ru/docs/">Архив документации на OpenNet.ru</a>
</BODY>
</HTML>
