<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
<TITLE>Autoconf - Создание скриптов для автоматической конфигурации</TITLE>
</HEAD>
<body>
<!--#include virtual="/header.raw"-->
<h3>Версия для печати</h3>
<b><a href="http://www.opennet.ru/docs/">Архив документации на OpenNet.ru</a> / 
Раздел "<a href="http://www.opennet.ru/docs/124.shtml">Программирование, языки</a>"
</b>
 <small>(<a href="./">Многостраничная версия</a>)</small>
<hr noshade size=1>

<a name="index_html"></a>
<H1>Autoconf</H1>
<H2>Создание скриптов для автоматической конфигурации</H2>
<H2>Редакция 2.13, Autoconf версии 2.13</H2>
<H2>Декабрь 1998</H2>
<ADDRESS>David MacKenzie и Ben Elliston</ADDRESS>
<P>
<P><HR><P>
<UL>
<LI><A NAME="TOC1" HREF="#autoconf_ru_1_html_SEC1">Введение</A>
<LI><A NAME="TOC2" HREF="#autoconf_ru_2_html_SEC2">Создание скриптов <CODE>configure</CODE></A>
<UL>
<LI><A NAME="TOC3" HREF="#autoconf_ru_2_html_SEC3">Написание <TT>`configure.in'</TT></A>
<LI><A NAME="TOC4" HREF="#autoconf_ru_2_html_SEC4">Использование программы <CODE>autoscan</CODE> для создания <TT>`configure.in'</TT></A>
<LI><A NAME="TOC5" HREF="#autoconf_ru_2_html_SEC5">Использование программы <CODE>ifnames</CODE> для перечисления условных выражений</A>
<LI><A NAME="TOC6" HREF="#autoconf_ru_2_html_SEC6">Использование программы <CODE>autoconf</CODE> для создания скрипта <CODE>configure</CODE></A>
<LI><A NAME="TOC7" HREF="#autoconf_ru_2_html_SEC7">Использование <CODE>autoreconf</CODE> для обновления ваших скриптов <CODE>configure</CODE></A>
</UL>
<LI><A NAME="TOC8" HREF="#autoconf_ru_3_html_SEC8">Файлы инициализации и выходные файлы</A>
<UL>
<LI><A NAME="TOC9" HREF="#autoconf_ru_3_html_SEC9">Нахождение ввода <CODE>configure</CODE></A>
<LI><A NAME="TOC10" HREF="#autoconf_ru_3_html_SEC10">Создание выходных файлов</A>
<LI><A NAME="TOC11" HREF="#autoconf_ru_3_html_SEC11">Подстановки в файлах Makefile</A>
<UL>
<LI><A NAME="TOC12" HREF="#autoconf_ru_3_html_SEC12">Предварительная установка выходных переменных</A>
<LI><A NAME="TOC13" HREF="#autoconf_ru_3_html_SEC13">Каталоги сборки программ</A>
<LI><A NAME="TOC14" HREF="#autoconf_ru_3_html_SEC14">Автоматическая пересборка</A>
</UL>
<LI><A NAME="TOC15" HREF="#autoconf_ru_3_html_SEC15">Заголовочные файлы конфигурации</A>
<UL>
<LI><A NAME="TOC16" HREF="#autoconf_ru_3_html_SEC16">Шаблоны заголовочных файлов</A>
<LI><A NAME="TOC17" HREF="#autoconf_ru_3_html_SEC17">Использование <CODE>autoheader</CODE> для создания <TT>`config.h.in'</TT></A>
</UL>
<LI><A NAME="TOC18" HREF="#autoconf_ru_3_html_SEC18">Настройка других пакетов, находящихся в подкаталогах</A>
<LI><A NAME="TOC19" HREF="#autoconf_ru_3_html_SEC19">Префикс по умолчанию</A>
<LI><A NAME="TOC20" HREF="#autoconf_ru_3_html_SEC20">Номера версий в <CODE>configure</CODE></A>
</UL>
<LI><A NAME="TOC21" HREF="#autoconf_ru_4_html_SEC21">Существующие тесты</A>
<UL>
<LI><A NAME="TOC22" HREF="#autoconf_ru_4_html_SEC22">Альтернативные программы</A>
<UL>
<LI><A NAME="TOC23" HREF="#autoconf_ru_4_html_SEC23">Проверка отдельных программ</A>
<LI><A NAME="TOC24" HREF="#autoconf_ru_4_html_SEC24">Общие программы и проверки файлов</A>
</UL>
<LI><A NAME="TOC25" HREF="#autoconf_ru_4_html_SEC25">Файлы библиотек</A>
<LI><A NAME="TOC26" HREF="#autoconf_ru_4_html_SEC26">Библиотечные функции</A>
<UL>
<LI><A NAME="TOC27" HREF="#autoconf_ru_4_html_SEC27">Проверка отдельных функций</A>
<LI><A NAME="TOC28" HREF="#autoconf_ru_4_html_SEC28">Проверка базовых функций</A>
</UL>
<LI><A NAME="TOC29" HREF="#autoconf_ru_4_html_SEC29">Заголовочные файлы</A>
<UL>
<LI><A NAME="TOC30" HREF="#autoconf_ru_4_html_SEC30">Проверка отдельных заголовочных файлов</A>
<LI><A NAME="TOC31" HREF="#autoconf_ru_4_html_SEC31">Базовые проверки заголовочных файлов</A>
</UL>
<LI><A NAME="TOC32" HREF="#autoconf_ru_4_html_SEC32">Структуры</A>
<LI><A NAME="TOC33" HREF="#autoconf_ru_4_html_SEC33">Объявления типов</A>
<UL>
<LI><A NAME="TOC34" HREF="#autoconf_ru_4_html_SEC34">Проверка отдельных объявлений типов</A>
<LI><A NAME="TOC35" HREF="#autoconf_ru_4_html_SEC35">Базовые проверки объявлений типов</A>
</UL>
<LI><A NAME="TOC36" HREF="#autoconf_ru_4_html_SEC36">Характеристики компилятора C</A>
<LI><A NAME="TOC37" HREF="#autoconf_ru_4_html_SEC37">Характеристики компилятора Fortran 77</A>
<LI><A NAME="TOC38" HREF="#autoconf_ru_4_html_SEC38">Системные сервисы</A>
<LI><A NAME="TOC39" HREF="#autoconf_ru_4_html_SEC39">Варианты UNIX</A>
</UL>
<LI><A NAME="TOC40" HREF="#autoconf_ru_5_html_SEC40">Написание тестов</A>
<UL>
<LI><A NAME="TOC41" HREF="#autoconf_ru_5_html_SEC41">Исследование деклараций</A>
<LI><A NAME="TOC42" HREF="#autoconf_ru_5_html_SEC42">Проверка синтаксиса</A>
<LI><A NAME="TOC43" HREF="#autoconf_ru_5_html_SEC43">Проверка библиотек</A>
<LI><A NAME="TOC44" HREF="#autoconf_ru_5_html_SEC44">Проверка поведения во время выполнения</A>
<UL>
<LI><A NAME="TOC45" HREF="#autoconf_ru_5_html_SEC45">Запуск тестовых программ</A>
<LI><A NAME="TOC46" HREF="#autoconf_ru_5_html_SEC46">Рекомендации по написанию тестовых программ</A>
<LI><A NAME="TOC47" HREF="#autoconf_ru_5_html_SEC47">Тестовые функции</A>
</UL>
<LI><A NAME="TOC48" HREF="#autoconf_ru_5_html_SEC48">Переносимое программирование на языке командного процессора</A>
<LI><A NAME="TOC49" HREF="#autoconf_ru_5_html_SEC49">Тестирование значений и файлов</A>
<LI><A NAME="TOC50" HREF="#autoconf_ru_5_html_SEC50">Множество вариантов</A>
<LI><A NAME="TOC51" HREF="#autoconf_ru_5_html_SEC51">Выбор языка</A>
</UL>
<LI><A NAME="TOC52" HREF="#autoconf_ru_6_html_SEC52">Результаты тестов</A>
<UL>
<LI><A NAME="TOC53" HREF="#autoconf_ru_6_html_SEC53">Определение символов препроцессора С</A>
<LI><A NAME="TOC54" HREF="#autoconf_ru_6_html_SEC54">Установка выходных переменных</A>
<LI><A NAME="TOC55" HREF="#autoconf_ru_6_html_SEC55">Кэширование результатов</A>
<UL>
<LI><A NAME="TOC56" HREF="#autoconf_ru_6_html_SEC56">Имена переменных кэша</A>
<LI><A NAME="TOC57" HREF="#autoconf_ru_6_html_SEC57">Кэш-файлы</A>
</UL>
<LI><A NAME="TOC58" HREF="#autoconf_ru_6_html_SEC58">Выдача сообщений</A>
</UL>
<LI><A NAME="TOC59" HREF="#autoconf_ru_7_html_SEC59">Создание макросов</A>
<UL>
<LI><A NAME="TOC60" HREF="#autoconf_ru_7_html_SEC60">Определение макросов</A>
<LI><A NAME="TOC61" HREF="#autoconf_ru_7_html_SEC61">Имена макросов</A>
<LI><A NAME="TOC62" HREF="#autoconf_ru_7_html_SEC62">Заключение в кавычки</A>
<LI><A NAME="TOC63" HREF="#autoconf_ru_7_html_SEC63">Зависимости между макросами</A>
<UL>
<LI><A NAME="TOC64" HREF="#autoconf_ru_7_html_SEC64">Требуемые макросы</A>
<LI><A NAME="TOC65" HREF="#autoconf_ru_7_html_SEC65">Предлагаемый порядок</A>
<LI><A NAME="TOC66" HREF="#autoconf_ru_7_html_SEC66">Устаревшие макросы</A>
</UL>
</UL>
<LI><A NAME="TOC67" HREF="#autoconf_ru_8_html_SEC67">Ручная настройка</A>
<UL>
<LI><A NAME="TOC68" HREF="#autoconf_ru_8_html_SEC68">Указание типа системы</A>
<LI><A NAME="TOC69" HREF="#autoconf_ru_8_html_SEC69">Получение канонического типа системы</A>
<LI><A NAME="TOC70" HREF="#autoconf_ru_8_html_SEC70">Переменные типов систем</A>
<LI><A NAME="TOC71" HREF="#autoconf_ru_8_html_SEC71">Использование типов систем</A>
</UL>
<LI><A NAME="TOC72" HREF="#autoconf_ru_9_html_SEC72">Локальная конфигурация</A>
<UL>
<LI><A NAME="TOC73" HREF="#autoconf_ru_9_html_SEC73">Работа с внешним программным обеспечением</A>
<LI><A NAME="TOC74" HREF="#autoconf_ru_9_html_SEC74">Выбор ключей пакетов</A>
<LI><A NAME="TOC75" HREF="#autoconf_ru_9_html_SEC75">Детали локальной конфигурации</A>
<LI><A NAME="TOC76" HREF="#autoconf_ru_9_html_SEC76">Преобразование имен программ при установке</A>
<UL>
<LI><A NAME="TOC77" HREF="#autoconf_ru_9_html_SEC77">Ключи преобразования</A>
<LI><A NAME="TOC78" HREF="#autoconf_ru_9_html_SEC78">Примеры преобразований</A>
<LI><A NAME="TOC79" HREF="#autoconf_ru_9_html_SEC79">Правила преобразования</A>
</UL>
<LI><A NAME="TOC80" HREF="#autoconf_ru_9_html_SEC80">Установка значений по умолчанию для машины</A>
</UL>
<LI><A NAME="TOC81" HREF="#autoconf_ru_10_html_SEC81">Запуск скриптов <CODE>configure</CODE></A>
<UL>
<LI><A NAME="TOC82" HREF="#autoconf_ru_10_html_SEC82">Простая установка</A>
<LI><A NAME="TOC83" HREF="#autoconf_ru_10_html_SEC83">Компиляторы и ключи</A>
<LI><A NAME="TOC84" HREF="#autoconf_ru_10_html_SEC84">Компиляция для нескольких архитектур</A>
<LI><A NAME="TOC85" HREF="#autoconf_ru_10_html_SEC85">Имена для установки</A>
<LI><A NAME="TOC86" HREF="#autoconf_ru_10_html_SEC86">Дополнительные возможности</A>
<LI><A NAME="TOC87" HREF="#autoconf_ru_10_html_SEC87">Указание типа системы</A>
<LI><A NAME="TOC88" HREF="#autoconf_ru_10_html_SEC88">Совместное использование значений по умолчанию</A>
<LI><A NAME="TOC89" HREF="#autoconf_ru_10_html_SEC89">Контроль выполнения</A>
</UL>
<LI><A NAME="TOC90" HREF="#autoconf_ru_11_html_SEC90">Воссоздание конфигурации</A>
<LI><A NAME="TOC91" HREF="#autoconf_ru_12_html_SEC91">Вопросы об Autoconf</A>
<UL>
<LI><A NAME="TOC92" HREF="#autoconf_ru_12_html_SEC92">Распространение скриптов <CODE>configure</CODE></A>
<LI><A NAME="TOC93" HREF="#autoconf_ru_12_html_SEC93">Почему требуется GNU <CODE>m4</CODE>?</A>
<LI><A NAME="TOC94" HREF="#autoconf_ru_12_html_SEC94">Как я могу начать работу?</A>
<LI><A NAME="TOC95" HREF="#autoconf_ru_12_html_SEC95">Почему не используется Imake?</A>
</UL>
<LI><A NAME="TOC96" HREF="#autoconf_ru_13_html_SEC96">Обновление с версии 1</A>
<UL>
<LI><A NAME="TOC97" HREF="#autoconf_ru_13_html_SEC97">Измененные имена файлов</A>
<LI><A NAME="TOC98" HREF="#autoconf_ru_13_html_SEC98">Измененные файлы Makefile</A>
<LI><A NAME="TOC99" HREF="#autoconf_ru_13_html_SEC99">Измененные макросы</A>
<LI><A NAME="TOC100" HREF="#autoconf_ru_13_html_SEC100">Использование <CODE>autoupdate</CODE> для обновления <CODE>configure</CODE></A>
<LI><A NAME="TOC101" HREF="#autoconf_ru_13_html_SEC101">Измененные результаты</A>
<LI><A NAME="TOC102" HREF="#autoconf_ru_13_html_SEC102">Измененное написание макросов</A>
</UL>
<LI><A NAME="TOC103" HREF="#autoconf_ru_14_html_SEC103">История Autoconf</A>
<UL>
<LI><A NAME="TOC104" HREF="#autoconf_ru_14_html_SEC104">Бытие</A>
<LI><A NAME="TOC105" HREF="#autoconf_ru_14_html_SEC105">Исход</A>
<LI><A NAME="TOC106" HREF="#autoconf_ru_14_html_SEC106">Левит</A>
<LI><A NAME="TOC107" HREF="#autoconf_ru_14_html_SEC107">Числа</A>
<LI><A NAME="TOC108" HREF="#autoconf_ru_14_html_SEC108">Второзаконие</A>
</UL>
<LI><A NAME="TOC109" HREF="#autoconf_ru_15_html_SEC109">Старые имена макросов</A>
<LI><A NAME="TOC110" HREF="#autoconf_ru_16_html_SEC110">Индекс переменных среды</A>
<LI><A NAME="TOC111" HREF="#autoconf_ru_17_html_SEC111">Индекс выходных переменных</A>
<LI><A NAME="TOC112" HREF="#autoconf_ru_18_html_SEC112">Индекс символов препроцессора</A>
<LI><A NAME="TOC113" HREF="#autoconf_ru_19_html_SEC113">Индекс макросов</A>
</UL>
<P><HR><P>
This document was generated on 10 October 2000 using
<A HREF="http://wwwinfo.cern.ch/dis/texi2html/">texi2html</A>
<hr>

<a name="autoconf_ru_toc_html"></a>
<H1>Autoconf</H1>
<H2>Создание скриптов для автоматической конфигурации</H2>
<H2>Редакция 2.13, Autoconf версии 2.13</H2>
<H2>Декабрь 1998</H2>
<ADDRESS>David MacKenzie и Ben Elliston</ADDRESS>
<P>
<P><HR><P>
<UL>
<LI><A NAME="TOC1" HREF="#autoconf_ru_1_html_SEC1">Введение</A>
<LI><A NAME="TOC2" HREF="#autoconf_ru_2_html_SEC2">Создание скриптов <CODE>configure</CODE></A>
<UL>
<LI><A NAME="TOC3" HREF="#autoconf_ru_2_html_SEC3">Написание <TT>`configure.in'</TT></A>
<LI><A NAME="TOC4" HREF="#autoconf_ru_2_html_SEC4">Использование программы <CODE>autoscan</CODE> для создания <TT>`configure.in'</TT></A>
<LI><A NAME="TOC5" HREF="#autoconf_ru_2_html_SEC5">Использование программы <CODE>ifnames</CODE> для перечисления условных выражений</A>
<LI><A NAME="TOC6" HREF="#autoconf_ru_2_html_SEC6">Использование программы <CODE>autoconf</CODE> для создания скрипта <CODE>configure</CODE></A>
<LI><A NAME="TOC7" HREF="#autoconf_ru_2_html_SEC7">Использование <CODE>autoreconf</CODE> для обновления ваших скриптов <CODE>configure</CODE></A>
</UL>
<LI><A NAME="TOC8" HREF="#autoconf_ru_3_html_SEC8">Файлы инициализации и выходные файлы</A>
<UL>
<LI><A NAME="TOC9" HREF="#autoconf_ru_3_html_SEC9">Нахождение ввода <CODE>configure</CODE></A>
<LI><A NAME="TOC10" HREF="#autoconf_ru_3_html_SEC10">Создание выходных файлов</A>
<LI><A NAME="TOC11" HREF="#autoconf_ru_3_html_SEC11">Подстановки в файлах Makefile</A>
<UL>
<LI><A NAME="TOC12" HREF="#autoconf_ru_3_html_SEC12">Предварительная установка выходных переменных</A>
<LI><A NAME="TOC13" HREF="#autoconf_ru_3_html_SEC13">Каталоги сборки программ</A>
<LI><A NAME="TOC14" HREF="#autoconf_ru_3_html_SEC14">Автоматическая пересборка</A>
</UL>
<LI><A NAME="TOC15" HREF="#autoconf_ru_3_html_SEC15">Заголовочные файлы конфигурации</A>
<UL>
<LI><A NAME="TOC16" HREF="#autoconf_ru_3_html_SEC16">Шаблоны заголовочных файлов</A>
<LI><A NAME="TOC17" HREF="#autoconf_ru_3_html_SEC17">Использование <CODE>autoheader</CODE> для создания <TT>`config.h.in'</TT></A>
</UL>
<LI><A NAME="TOC18" HREF="#autoconf_ru_3_html_SEC18">Настройка других пакетов, находящихся в подкаталогах</A>
<LI><A NAME="TOC19" HREF="#autoconf_ru_3_html_SEC19">Префикс по умолчанию</A>
<LI><A NAME="TOC20" HREF="#autoconf_ru_3_html_SEC20">Номера версий в <CODE>configure</CODE></A>
</UL>
<LI><A NAME="TOC21" HREF="#autoconf_ru_4_html_SEC21">Существующие тесты</A>
<UL>
<LI><A NAME="TOC22" HREF="#autoconf_ru_4_html_SEC22">Альтернативные программы</A>
<UL>
<LI><A NAME="TOC23" HREF="#autoconf_ru_4_html_SEC23">Проверка отдельных программ</A>
<LI><A NAME="TOC24" HREF="#autoconf_ru_4_html_SEC24">Общие программы и проверки файлов</A>
</UL>
<LI><A NAME="TOC25" HREF="#autoconf_ru_4_html_SEC25">Файлы библиотек</A>
<LI><A NAME="TOC26" HREF="#autoconf_ru_4_html_SEC26">Библиотечные функции</A>
<UL>
<LI><A NAME="TOC27" HREF="#autoconf_ru_4_html_SEC27">Проверка отдельных функций</A>
<LI><A NAME="TOC28" HREF="#autoconf_ru_4_html_SEC28">Проверка базовых функций</A>
</UL>
<LI><A NAME="TOC29" HREF="#autoconf_ru_4_html_SEC29">Заголовочные файлы</A>
<UL>
<LI><A NAME="TOC30" HREF="#autoconf_ru_4_html_SEC30">Проверка отдельных заголовочных файлов</A>
<LI><A NAME="TOC31" HREF="#autoconf_ru_4_html_SEC31">Базовые проверки заголовочных файлов</A>
</UL>
<LI><A NAME="TOC32" HREF="#autoconf_ru_4_html_SEC32">Структуры</A>
<LI><A NAME="TOC33" HREF="#autoconf_ru_4_html_SEC33">Объявления типов</A>
<UL>
<LI><A NAME="TOC34" HREF="#autoconf_ru_4_html_SEC34">Проверка отдельных объявлений типов</A>
<LI><A NAME="TOC35" HREF="#autoconf_ru_4_html_SEC35">Базовые проверки объявлений типов</A>
</UL>
<LI><A NAME="TOC36" HREF="#autoconf_ru_4_html_SEC36">Характеристики компилятора C</A>
<LI><A NAME="TOC37" HREF="#autoconf_ru_4_html_SEC37">Характеристики компилятора Fortran 77</A>
<LI><A NAME="TOC38" HREF="#autoconf_ru_4_html_SEC38">Системные сервисы</A>
<LI><A NAME="TOC39" HREF="#autoconf_ru_4_html_SEC39">Варианты UNIX</A>
</UL>
<LI><A NAME="TOC40" HREF="#autoconf_ru_5_html_SEC40">Написание тестов</A>
<UL>
<LI><A NAME="TOC41" HREF="#autoconf_ru_5_html_SEC41">Исследование деклараций</A>
<LI><A NAME="TOC42" HREF="#autoconf_ru_5_html_SEC42">Проверка синтаксиса</A>
<LI><A NAME="TOC43" HREF="#autoconf_ru_5_html_SEC43">Проверка библиотек</A>
<LI><A NAME="TOC44" HREF="#autoconf_ru_5_html_SEC44">Проверка поведения во время выполнения</A>
<UL>
<LI><A NAME="TOC45" HREF="#autoconf_ru_5_html_SEC45">Запуск тестовых программ</A>
<LI><A NAME="TOC46" HREF="#autoconf_ru_5_html_SEC46">Рекомендации по написанию тестовых программ</A>
<LI><A NAME="TOC47" HREF="#autoconf_ru_5_html_SEC47">Тестовые функции</A>
</UL>
<LI><A NAME="TOC48" HREF="#autoconf_ru_5_html_SEC48">Переносимое программирование на языке командного процессора</A>
<LI><A NAME="TOC49" HREF="#autoconf_ru_5_html_SEC49">Тестирование значений и файлов</A>
<LI><A NAME="TOC50" HREF="#autoconf_ru_5_html_SEC50">Множество вариантов</A>
<LI><A NAME="TOC51" HREF="#autoconf_ru_5_html_SEC51">Выбор языка</A>
</UL>
<LI><A NAME="TOC52" HREF="#autoconf_ru_6_html_SEC52">Результаты тестов</A>
<UL>
<LI><A NAME="TOC53" HREF="#autoconf_ru_6_html_SEC53">Определение символов препроцессора С</A>
<LI><A NAME="TOC54" HREF="#autoconf_ru_6_html_SEC54">Установка выходных переменных</A>
<LI><A NAME="TOC55" HREF="#autoconf_ru_6_html_SEC55">Кэширование результатов</A>
<UL>
<LI><A NAME="TOC56" HREF="#autoconf_ru_6_html_SEC56">Имена переменных кэша</A>
<LI><A NAME="TOC57" HREF="#autoconf_ru_6_html_SEC57">Кэш-файлы</A>
</UL>
<LI><A NAME="TOC58" HREF="#autoconf_ru_6_html_SEC58">Выдача сообщений</A>
</UL>
<LI><A NAME="TOC59" HREF="#autoconf_ru_7_html_SEC59">Создание макросов</A>
<UL>
<LI><A NAME="TOC60" HREF="#autoconf_ru_7_html_SEC60">Определение макросов</A>
<LI><A NAME="TOC61" HREF="#autoconf_ru_7_html_SEC61">Имена макросов</A>
<LI><A NAME="TOC62" HREF="#autoconf_ru_7_html_SEC62">Заключение в кавычки</A>
<LI><A NAME="TOC63" HREF="#autoconf_ru_7_html_SEC63">Зависимости между макросами</A>
<UL>
<LI><A NAME="TOC64" HREF="#autoconf_ru_7_html_SEC64">Требуемые макросы</A>
<LI><A NAME="TOC65" HREF="#autoconf_ru_7_html_SEC65">Предлагаемый порядок</A>
<LI><A NAME="TOC66" HREF="#autoconf_ru_7_html_SEC66">Устаревшие макросы</A>
</UL>
</UL>
<LI><A NAME="TOC67" HREF="#autoconf_ru_8_html_SEC67">Ручная настройка</A>
<UL>
<LI><A NAME="TOC68" HREF="#autoconf_ru_8_html_SEC68">Указание типа системы</A>
<LI><A NAME="TOC69" HREF="#autoconf_ru_8_html_SEC69">Получение канонического типа системы</A>
<LI><A NAME="TOC70" HREF="#autoconf_ru_8_html_SEC70">Переменные типов систем</A>
<LI><A NAME="TOC71" HREF="#autoconf_ru_8_html_SEC71">Использование типов систем</A>
</UL>
<LI><A NAME="TOC72" HREF="#autoconf_ru_9_html_SEC72">Локальная конфигурация</A>
<UL>
<LI><A NAME="TOC73" HREF="#autoconf_ru_9_html_SEC73">Работа с внешним программным обеспечением</A>
<LI><A NAME="TOC74" HREF="#autoconf_ru_9_html_SEC74">Выбор ключей пакетов</A>
<LI><A NAME="TOC75" HREF="#autoconf_ru_9_html_SEC75">Детали локальной конфигурации</A>
<LI><A NAME="TOC76" HREF="#autoconf_ru_9_html_SEC76">Преобразование имен программ при установке</A>
<UL>
<LI><A NAME="TOC77" HREF="#autoconf_ru_9_html_SEC77">Ключи преобразования</A>
<LI><A NAME="TOC78" HREF="#autoconf_ru_9_html_SEC78">Примеры преобразований</A>
<LI><A NAME="TOC79" HREF="#autoconf_ru_9_html_SEC79">Правила преобразования</A>
</UL>
<LI><A NAME="TOC80" HREF="#autoconf_ru_9_html_SEC80">Установка значений по умолчанию для машины</A>
</UL>
<LI><A NAME="TOC81" HREF="#autoconf_ru_10_html_SEC81">Запуск скриптов <CODE>configure</CODE></A>
<UL>
<LI><A NAME="TOC82" HREF="#autoconf_ru_10_html_SEC82">Простая установка</A>
<LI><A NAME="TOC83" HREF="#autoconf_ru_10_html_SEC83">Компиляторы и ключи</A>
<LI><A NAME="TOC84" HREF="#autoconf_ru_10_html_SEC84">Компиляция для нескольких архитектур</A>
<LI><A NAME="TOC85" HREF="#autoconf_ru_10_html_SEC85">Имена для установки</A>
<LI><A NAME="TOC86" HREF="#autoconf_ru_10_html_SEC86">Дополнительные возможности</A>
<LI><A NAME="TOC87" HREF="#autoconf_ru_10_html_SEC87">Указание типа системы</A>
<LI><A NAME="TOC88" HREF="#autoconf_ru_10_html_SEC88">Совместное использование значений по умолчанию</A>
<LI><A NAME="TOC89" HREF="#autoconf_ru_10_html_SEC89">Контроль выполнения</A>
</UL>
<LI><A NAME="TOC90" HREF="#autoconf_ru_11_html_SEC90">Воссоздание конфигурации</A>
<LI><A NAME="TOC91" HREF="#autoconf_ru_12_html_SEC91">Вопросы об Autoconf</A>
<UL>
<LI><A NAME="TOC92" HREF="#autoconf_ru_12_html_SEC92">Распространение скриптов <CODE>configure</CODE></A>
<LI><A NAME="TOC93" HREF="#autoconf_ru_12_html_SEC93">Почему требуется GNU <CODE>m4</CODE>?</A>
<LI><A NAME="TOC94" HREF="#autoconf_ru_12_html_SEC94">Как я могу начать работу?</A>
<LI><A NAME="TOC95" HREF="#autoconf_ru_12_html_SEC95">Почему не используется Imake?</A>
</UL>
<LI><A NAME="TOC96" HREF="#autoconf_ru_13_html_SEC96">Обновление с версии 1</A>
<UL>
<LI><A NAME="TOC97" HREF="#autoconf_ru_13_html_SEC97">Измененные имена файлов</A>
<LI><A NAME="TOC98" HREF="#autoconf_ru_13_html_SEC98">Измененные файлы Makefile</A>
<LI><A NAME="TOC99" HREF="#autoconf_ru_13_html_SEC99">Измененные макросы</A>
<LI><A NAME="TOC100" HREF="#autoconf_ru_13_html_SEC100">Использование <CODE>autoupdate</CODE> для обновления <CODE>configure</CODE></A>
<LI><A NAME="TOC101" HREF="#autoconf_ru_13_html_SEC101">Измененные результаты</A>
<LI><A NAME="TOC102" HREF="#autoconf_ru_13_html_SEC102">Измененное написание макросов</A>
</UL>
<LI><A NAME="TOC103" HREF="#autoconf_ru_14_html_SEC103">История Autoconf</A>
<UL>
<LI><A NAME="TOC104" HREF="#autoconf_ru_14_html_SEC104">Бытие</A>
<LI><A NAME="TOC105" HREF="#autoconf_ru_14_html_SEC105">Исход</A>
<LI><A NAME="TOC106" HREF="#autoconf_ru_14_html_SEC106">Левит</A>
<LI><A NAME="TOC107" HREF="#autoconf_ru_14_html_SEC107">Числа</A>
<LI><A NAME="TOC108" HREF="#autoconf_ru_14_html_SEC108">Второзаконие</A>
</UL>
<LI><A NAME="TOC109" HREF="#autoconf_ru_15_html_SEC109">Старые имена макросов</A>
<LI><A NAME="TOC110" HREF="#autoconf_ru_16_html_SEC110">Индекс переменных среды</A>
<LI><A NAME="TOC111" HREF="#autoconf_ru_17_html_SEC111">Индекс выходных переменных</A>
<LI><A NAME="TOC112" HREF="#autoconf_ru_18_html_SEC112">Индекс символов препроцессора</A>
<LI><A NAME="TOC113" HREF="#autoconf_ru_19_html_SEC113">Индекс макросов</A>
</UL>
<P><HR><P>
This document was generated on 10 October 2000 using
<A HREF="http://wwwinfo.cern.ch/dis/texi2html/">texi2html</A>
<hr>

<a name="autoconf_ru_1_html"></a>
<A HREF="#autoconf_ru_2_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC1" HREF="#autoconf_ru_toc_html_TOC1">Введение</A></H1>


<PRE>

Физик, инженер и специалист по компьютерам спорили о природе
Бога. Конечно, он был Физиком, сказал физик, поскольку в начале
Творения Бог создал Свет; и вы знаете, есть уравнения Максвелла,
двойная природа электромагнитных волн, уравнения относительности...
"Он был Инженером!" -- сказал инженер, поскольку до создания света, Бог
разделил Хаос на Землю и Воду; нужно быть настоящим инженером, чтобы обработать
огромное количество грязи и последовательно разделить твердые вещества
от жидких... Компьютерный специалист воскликнул: А как вы думаете,
откуда взялся хаос?

---Anonymous
</PRE>

<P>
Autoconf--- это утилита для создания скриптов командного процессора,
которые автоматически конфигурируют пакеты с исходным кодом так, чтобы
они могли работать на множестве UNIX-подобных систем.  Скрипты настройки, 
созданные с помощью Autoconf, при выполнении не зависят от Autoconf, так
что Autoconf не обязательно должен быть установлен у пользователя.


<P>
Скрипты конфигурации, созданные Autoconf, при работе не требуют вмешательства
пользователя; обычно они даже не требуют, чтобы были заданы аргументы, указывающие
тип системы.  Вместо этого, такие скрипты тестируют наличие каждого
средства, которое может понадобиться данному пакету.  (До выполнения каждой из 
проверок, скрипты печатают однострочное сообщение о том, какую именно возможность
они проверяют, так что пользователь не будет сильно скучать, ожидая конца 
работы скриптов). В результате эти скрипты хорошо справляются с системами,
которые являются гибридами или специализированными вариантами большинства
видов UNIX.  Таким образом, пропадает необходимость в сопровождении
файлов со списком всех возможностей всех версий каждого варианта UNIX.


<P>
Для каждого пакета программного обеспечения, который использует
Autoconf, из шаблона создается скрипт настройки, который перечисляет
системные возможности, в которых нуждается данный пакет или которые он
может использовать.  После того, как код на языке командного процессора, 
распознающий и обрабатывающий ту или иную возможность, написан, Autoconf 
позволяет использовать этот код во всех пакетах, которые могу
использовать (или нуждаются) в соответствующей возможности.  Если позже
по каким-то причинам понадобится изменить код командного процессора, то
изменения необходимо будет внести только в
одно место; все скрипты настройки могут быть автоматически пересозданы,
чтобы отразить изменения кода.


<P>
Пакет Metaconfig предназначен практически для тех же целей, что и
Autoconf, но создаваемые скрипты требуют интерактивного взаимодействия с
пользователем, что довольно неудобно при конфигурации больших 
программных проектов.  В отличие от скриптов Metaconfig, скрипты Autoconf
могут поддерживать кросс-компиляцию, если кто-то позаботится о ее поддержке
на данной системе.


<P>
Существует несколько разных задач, относящихся к созданию переносимого
программного обеспечения, которые в настоящее время нельзя решить
средствами Autoconf. Среди них--- автоматическое создание файлов
<TT>`Makefile'</TT> со всеми необходимыми стандартными целями, а также 
предоставление замены стандартных библиотечных функций и заголовочных 
файлов в тех системах, в которых эти функции или файлы отсутствуют. 
Однако работа в этом настроении ведется и эти возможности могут появиться 
в будущих версиях.


<P>
Autoconf навязывает некоторые ограничения на имена макросов, которые
используются в директивах <CODE>#ifdef</CODE> программ на языке C
(see section <A HREF="#autoconf_ru_18_html_SEC112">Индекс символов препроцессора</A>).


<P>
Для создания скриптов Autoconf требует наличия программы GNU
<CODE>m4</CODE>.  Он пользуется возможностями, которых нет в некоторых
UNIX-версиях программы <CODE>m4</CODE>. Он также превышает внутренние ограничения
некоторых версий <CODE>m4</CODE>, включая GNU <CODE>m4</CODE> версии 1.0. Вам
необходимо использовать версию 1.1 (или более позднюю) программы GNU
<CODE>m4</CODE>. Версии 1.3 и более поздние будут работать гораздо быстрее, чем версии
1.1 или 1.2.


<P>
See section <A HREF="#autoconf_ru_13_html_SEC96">Обновление с версии 1</A>, где описано обновление с версии 1.
See section <A HREF="#autoconf_ru_14_html_SEC103">История Autoconf</A>, где описана история разработки Autoconf.
See section <A HREF="#autoconf_ru_12_html_SEC91">Вопросы об Autoconf</A>, где даются ответы на некоторые общие вопросы об
Autoconf.


<P>
Сообщения об ошибках и свои пожелания для Autoconf посылайте по
адресу <CODE>bug-gnu-utils@prep.ai.mit.edu</CODE>. Включите в сообщение номер
версии Autoconf, который вы можете получить, выполнив команду
<SAMP>`autoconf --version'</SAMP>.


<P><HR><P>
Go to the first, previous, <A HREF="#autoconf_ru_2_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_2_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_1_html">previous</A>, <A HREF="#autoconf_ru_3_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC2" HREF="#autoconf_ru_toc_html_TOC2">Создание скриптов <CODE>configure</CODE></A></H1>

<P>
Скрипты конфигурации, создаваемые Autoconf, по принятым соглашениям называются
<CODE>configure</CODE>.  При запуске <CODE>configure</CODE> создает несколько файлов,
заменяя в них параметры конфигурации на соответствующие системе значения.
<CODE>configure</CODE> создает следующие файлы:



<UL>
<LI>

один или несколько файлов <TT>`Makefile'</TT>, по одному на каждый подкаталог
пакета (see section <A HREF="#autoconf_ru_3_html_SEC11">Подстановки в файлах Makefile</A>);

<LI>

если задано, создается заголовочный файл для языка C, имя которого можно
задать при создании скрипта и который содержит директивы <CODE>#define</CODE>
(see section <A HREF="#autoconf_ru_3_html_SEC15">Заголовочные файлы конфигурации</A>);

<LI>

скрипт командного процессора с именем <TT>`config.status'</TT>, который при 
запуске заново создаст вышеперечисленные файлы (see section <A HREF="#autoconf_ru_11_html_SEC90">Воссоздание конфигурации</A>);

<LI>

скрипт командного процессора с именем <TT>`config.cache'</TT>, который сохраняет 
результаты выполнения многих тестов (see section <A HREF="#autoconf_ru_6_html_SEC57">Кэш-файлы</A>);

<LI>

файл с именем <TT>`config.log'</TT>, который содержит все сообщения, выданные
компиляторами. Этот файл может использоваться при отладке,
если <CODE>configure</CODE> работает неправильно.
</UL>

<P>
Для того, чтобы с помощью Autoconf создать скрипт <CODE>configure</CODE>, вам
необходимо написать входной файл с именем <TT>`configure.in'</TT> и
выполнить команду <CODE>autoconf</CODE>. Если вы напишите собственный код
тестирования возможностей системы, в дополнение к поставляемым с
Autoconf, то вам придется записать его в файлы с именами <TT>`aclocal.m4'</TT> и 
<TT>`acsite.m4'</TT>.
Если вы используете заголовочный файл, который содержит
директивы <CODE>#define</CODE>, то вы также должны создать файл
<TT>`acconfig.h'</TT>, и вы сможете распространять с пакетом созданный с
помощью Autoconf файл <TT>`config.h.in'</TT>.


<P>
Вот диаграмма, показывающая, как создаются файлы, используемые при
конфигурации.  Выполняемые программы обозначены суффиксом <SAMP>`*'</SAMP>.
Необязательные файлы взяты в квадратные скобки (<SAMP>`[]'</SAMP>). Программы
<CODE>autoconf</CODE> и <CODE>autoheader</CODE> также читают установленные файлы с
макросами Autoconf (обрабатывая файл <TT>`autoconf.m4'</TT>).


<P>
Файлы, используемые при подготовке программного пакета к распространению:

<PRE>
Файлы исходных текстов --&#62; [autoscan*] --&#62; [configure.scan] --&#62; configure.in

configure.in --.   .------&#62; autoconf* -----&#62; configure
               +---+
[aclocal.m4] --+   `---.
[acsite.m4] ---'       |
                       +--&#62; [autoheader*] -&#62; [config.h.in]
[acconfig.h] ----.     |
                 +-----'
[config.h.top] --+
[config.h.bot] --'

Makefile.in -------------------------------&#62; Makefile.in
</PRE>

<P>
Файлы, используемые при конфигурации программного пакета:

<PRE>
                       .-------------&#62; config.cache
configure* ------------+-------------&#62; config.log
                       |
[config.h.in] -.       v            .-&#62; [config.h] -.
               +--&#62; config.status* -+               +--&#62; make*
Makefile.in ---'                    `-&#62; Makefile ---'
</PRE>



<H2><A NAME="SEC3" HREF="#autoconf_ru_toc_html_TOC3">Написание <TT>`configure.in'</TT></A></H2>

<P>
Для создания скрипта <CODE>configure</CODE> для программного пакета, создайте
файл с именем <TT>`configure.in'</TT>, который содержит
вызовы макросов Autoconf, которые проверяют системные возможности,
которые нужны вашему пакету или которые он может использовать.  Для
многих таких возможностей макросы Autoconf уже написаны;
See section <A HREF="#autoconf_ru_4_html_SEC21">Существующие тесты</A>, где находится их описание.  Для большинства других возможностей
вы можете использовать шаблонные макросы Autoconf, на базе которых можно 
создать специальные проверки; See section <A HREF="#autoconf_ru_5_html_SEC40">Написание тестов</A>, где это описано.
Для особо хитроумных или специализированных возможностей, в файл
<TT>`configure.in'</TT> может понадобиться включить специально написанные
скрипты командного процессора.  Программа <CODE>autoscan</CODE> может оказать вам
хорошую помощь на первых порах, при создании файла <TT>`configure.in'</TT>
(see section <A HREF="#autoconf_ru_2_html_SEC4">Использование программы <CODE>autoscan</CODE> для создания <TT>`configure.in'</TT></A>, где описана эта программа).


<P>
За некоторыми исключениями, порядок вызовов макросов Autoconf в
<TT>`configure.in'</TT> не важен.  Каждый файл <TT>`configure.in'</TT>
должен в самом начале содержать вызов макроса <CODE>AC_INIT</CODE>, а также
вызов макроса <CODE>AC_OUTPUT</CODE> в самом конце
(see section <A HREF="#autoconf_ru_3_html_SEC10">Создание выходных файлов</A>). Также некоторые макросы полагаются на то, что другие
макросы были вызваны первыми, поскольку для того, чтобы принять
решение, они проверяют уже установленные значения переменных.  Такие
макросы отдельно отмечены в описании 
(see section <A HREF="#autoconf_ru_4_html_SEC21">Существующие тесты</A>), а при создании скрипта
<CODE>configure</CODE> выдается предупреждение, если вы нарушили порядок
вызова макросов.


<P>
Для того, чтобы ваши файлы были последовательны и единообразны, мы
приведем желательный порядок вызова макросов Autoconf.  Вообще говоря,
то, что находится ближе к концу списка, может зависеть от того, что
находится в начале списка.  Например, библиотечные функции могут
зависеть от определений типов и библиотек.



<PRE>
<CODE>AC_INIT(<VAR>file</VAR>)</CODE>
Проверка программ
Проверка библиотек
Проверка заголовочных файлов
Проверка определений типов
Проверка структур
Проверка характеристик компилятора
Проверка библиотечных функций
Проверка системных сервисов
<CODE>AC_OUTPUT([<VAR>file...</VAR>])</CODE>
</PRE>

<P>
Лучше всего помещать каждый вызов макроса на отдельную строку файла
<TT>`configure.in'</TT>. Большинство макросов не добавляют дополнительных
переводов строк; они полагают, что после каждого вызова макроса
находится новая строка.  Это позволяет сделать скрипт <CODE>configure</CODE>
читабельнее, не добавляя ненужных пустых строк.  Можно спокойно
устанавливать переменные окружения в той же строке, что и вызов
макроса, потому что командные процессоры позволяют выполнять
присваивание в одной строке, без дополнительных пустых строк.


<P>
При вызове макросов с аргументами между открывающей скобкой и
названием макроса не должно быть пробелов.  Аргументы могут
занимать несколько строк если они заключены в "кавычки" языка
<CODE>m4</CODE>---  <SAMP>`['</SAMP> и <SAMP>`]'</SAMP>. Если у вас
есть длинная строка, например, список имен файлов, то можно использовать 
символ обратного слэша в конце строки для указания, что список продолжается
на следующей строке (эта возможность реализуется командным
процессором, без привлечения возможностей Autoconf).


<P>
Некоторые макросы отрабатывают два случая--- когда заданное условие
выполняется и когда условие не выполняется. В некоторых местах вы можете 
захотеть сделать что-либо, если условие выполняется, и ничего не делать в 
противном случае, и наоборот. Для того, чтобы пропустить действие при 
выполнении условия, передайте пустое значение аргументу <VAR>action-if-found</VAR> 
данного макроса. Для пропуска действия при невыполнении условия уберите 
аргумент <VAR>action-if-not-found</VAR> данного макроса, включая предшествующую 
ему запятую.


<P>
В файл <TT>`configure.in'</TT> можно включать комментарии, начиная их со
встроенного макроса <CODE>m4</CODE>--- <CODE>dnl</CODE>, который отбрасывает текст
вплоть до начала новой строки. Эти комментарии не появятся в созданных
скриптах <CODE>configure</CODE>. Например, полезно начинать файлы 
<TT>`configure.in'</TT> со строки, которая может выглядеть так:



<PRE>
dnl для создания скрипта configure обработайте этот файл программой autoconf.
</PRE>



<H2><A NAME="SEC4" HREF="#autoconf_ru_toc_html_TOC4">Использование программы <CODE>autoscan</CODE> для создания <TT>`configure.in'</TT></A></H2>
<P>
@anchor{Invoking autoscan}


<P>
Программа <CODE>autoscan</CODE> может помочь вам в создании файла
<TT>`configure.in'</TT> для программного пакета.
<CODE>autoscan</CODE> выполняет анализ дерева исходных текстов, корень
которого указан в командной строке или совпадает с текущим каталогом.
Программа ищет в
исходных текстах следы обычных проблем с переносимостью и создает
файл <TT>`configure.scan'</TT>, который является заготовкой для
<TT>`configure.in'</TT> для данного пакета.


<P>
Вы должны сами просмотреть файл <TT>`configure.scan'</TT> перед тем, как
переименовать его в <TT>`configure.in'</TT>: скорее всего, он будет нуждаться
в некоторых исправлениях. Иногда <CODE>autoscan</CODE> выдает макросы в
неправильном порядке, и поэтому
<CODE>autoconf</CODE> будет выдавать предупреждения; вам необходимо вручную
передвинуть эти макросы.  Также, если вы хотите, чтобы пакет использовал
заголовочный файл настроек, то вы должны сами добавить вызов макроса
<CODE>AC_CONFIG_HEADER</CODE> (see section <A HREF="#autoconf_ru_3_html_SEC15">Заголовочные файлы конфигурации</A>).  Вам
также необходимо добавить или изменить некоторые директивы препроцессора
<CODE>#if</CODE> в вашей программе, для того, чтобы заставить ее работать с
Autoconf (see section <A HREF="#autoconf_ru_2_html_SEC5">Использование программы <CODE>ifnames</CODE> для перечисления условных выражений</A>, где описана программа, которая поможет 
вам выполнить эту работу).


<P>
Программа <CODE>autoscan</CODE> использует несколько файлов данных, чтобы
определить, какие макросы следует использовать при обнаружении
определенных символов в исходных файлах пакета.  Эти файлы данных
устанавливаются вместе с дистрибутивными макро-файлами Autoconf и имеют
одинаковый формат.
Каждая строка
состоит из символа, пробелов и имени макроса Autoconf, которое выдается 
в том случае, если заданный символ имеется в исходных текстах.  Строки,
начинающиеся с символа <SAMP>`#'</SAMP> являются комментариями.


<P>
<CODE>autoscan</CODE> устанавливается только в том случае, если у вас установлена
программа Perl. <CODE>autoscan</CODE> распознает следующие ключи командной строки:


<DL COMPACT>

<DT><CODE>--help</CODE>
<DD>
Выдает список ключей командной строки и прекращает работу.

<DT><CODE>--macrodir=<VAR>dir</VAR></CODE>
<DD>
<A NAME="autoconf_ru_2_html_IDX1"></A>
Заставляет программу искать файлы данных в каталоге <VAR>dir</VAR>, а не
в каталоге, куда производилась установка. Вы также можете установить
значение переменной окружения <CODE>AC_MACRODIR</CODE> равным пути к этому
каталогу; данный ключ командной строки переопределяет значение переменной
окружения.

<DT><CODE>--verbose</CODE>
<DD>
Выдает имена исследуемых файлов и потенциально интересные символы,
обнаруженные в этих файлах.  Выдача может быть довольно обширной.

<DT><CODE>--version</CODE>
<DD>
выдает номер версии Autoconf и прекращает работу.
</DL>



<H2><A NAME="SEC5" HREF="#autoconf_ru_toc_html_TOC5">Использование программы <CODE>ifnames</CODE> для перечисления условных выражений</A></H2>
<P>
@anchor{Invoking ifnames}


<P>
Программа <CODE>ifnames</CODE> может помочь при создании файла
<TT>`configure.in'</TT> для программного пакета.  Она выдает
список идентификаторов, которые пакет уже использует в условных
выражениях препроцессора языка С. Если ваша программа уже была написана
с учетом возможного переноса на другие платформы, то данная программа
может помочь вам определить, какие проверки необходимо выполнить в
<CODE>configure</CODE>. Эта программа может помочь заполнить некоторые пробелы
в файле <TT>`configure.in'</TT>, который был создан программой
<CODE>autoscan</CODE> (see section <A HREF="#autoconf_ru_2_html_SEC4">Использование программы <CODE>autoscan</CODE> для создания <TT>`configure.in'</TT></A>).


<P>
Программа <CODE>ifnames</CODE> обрабатывает все исходные тексты на C,
перечисленные в командной строке (или же принимает текст со стандартного 
ввода, если ни один файл не был указан) и выдает на стандартный вывод
сортированный список
идентификаторов, которые используются в директивах <CODE>#if</CODE>,
<CODE>#elif</CODE>, <CODE>#ifdef</CODE> или <CODE>#ifndef</CODE>. Программа выдает каждый
идентификатор на отдельной строке, за которым через пробел следует
список файлов, в которых этот идентификатор встречается.


<P>
Программа <CODE>ifnames</CODE> распознает следующие ключи командной строки:


<DL COMPACT>

<DT><CODE>--help</CODE>
<DD>
<DT><CODE>-h</CODE>
<DD>
выдает список ключей командной строки и прекращает работу.

<DT><CODE>--macrodir=<VAR>dir</VAR></CODE>
<DD>
<A NAME="autoconf_ru_2_html_IDX2"></A>
Заставляет программу искать файлы данных в каталоге <VAR>dir</VAR>, а не
в каталоге, куда производилась установка. Вы также можете установить
значение переменной окружения <CODE>AC_MACRODIR</CODE> равным пути к этому
каталогу; данный ключ командной строки переопределяет значение переменной
окружения.

<DT><CODE>--version</CODE>
<DD>
выдает номер версии Autoconf и прекращает работу.
</DL>



<H2><A NAME="SEC6" HREF="#autoconf_ru_toc_html_TOC6">Использование программы <CODE>autoconf</CODE> для создания скрипта <CODE>configure</CODE></A></H2>
<P>
@anchor{Invoking autoconf}


<P>
Для того, чтобы создать скрипт <CODE>configure</CODE> из файла <TT>`configure.in'</TT>, 
просто запустите программу <CODE>autoconf</CODE> без аргументов. <CODE>autoconf</CODE> 
обработает файл <TT>`configure.in'</TT> с помощью макропроцессора <CODE>m4</CODE>,
используя макросы Autoconf. Если вы зададите аргумент программе 
<CODE>autoconf</CODE>, то программа будет выполнять чтение заданного файла, а не 
файла <TT>`configure.in'</TT> и вывод будет производиться на стандартный
вывод, не в в файл <CODE>configure</CODE>. Если вы дадите программе 
<CODE>autoconf</CODE> аргумент <SAMP>`-'</SAMP>, то она будет читать
со стандартного ввода, а не из файла <TT>`configure.in'</TT>, а результаты будут 
выдаваться на стандартный вывод.


<P>
Макросы Autoconf определены в нескольких файлах. Некоторые из них 
распространяются вместе с Autoconf; <CODE>autoconf</CODE> читает их в 
первую очередь. Затем ищется необязательный файл <TT>`acsite.m4'</TT> в каталоге, 
который содержит распространяемые с Autoconf файлы макросов, и
необязательный файл <TT>`aclocal.m4'</TT> в текущем каталоге.  Эти файлы могут содержать макросы,
специфические для вашей машины или макросы для конкретных пакетов
программного обеспечения (see section <A HREF="#autoconf_ru_7_html_SEC59">Создание макросов</A>, где приведена
дополнительная информация).  Если определение макроса существует в нескольких файлах, 
которые считывает <CODE>autoconf</CODE>, то последнее макроопределение
переопределяет все предыдущие.


<P>
<CODE>autoconf</CODE> распознает следующие ключи командной строки:


<DL COMPACT>

<DT><CODE>--help</CODE>
<DD>
<DT><CODE>-h</CODE>
<DD>
выдает список ключей командной строки и прекращает работу.

<DT><CODE>--localdir=<VAR>dir</VAR></CODE>
<DD>
<DT><CODE>-l <VAR>dir</VAR></CODE>
<DD>
Ищет файл <TT>`aclocal.m4'</TT> для данного пакета в каталоге <VAR>dir</VAR>, а не в
текущем каталоге.

<DT><CODE>--macrodir=<VAR>dir</VAR></CODE>
<DD>
<A NAME="autoconf_ru_2_html_IDX3"></A>
Заставляет программу искать файлы данных в каталоге <VAR>dir</VAR>, а не
в каталоге, куда производилась установка. Вы также можете установить
значение переменной окружения <CODE>AC_MACRODIR</CODE> равным пути к этому
каталогу; данный ключ командной строки переопределяет значение переменной
окружения.

<DT><CODE>--version</CODE>
<DD>
выдает номер версии Autoconf и прекращает работу.
</DL>



<H2><A NAME="SEC7" HREF="#autoconf_ru_toc_html_TOC7">Использование <CODE>autoreconf</CODE> для обновления ваших скриптов <CODE>configure</CODE></A></H2>
<P>
@anchor{Invoking autoreconf}


<P>
Если у вас много скриптов <CODE>configure</CODE>, созданных с помощью
Autoconf, то программа <CODE>autoreconf</CODE> может
облегчить вашу работу. Она запускает программы
<CODE>autoconf</CODE> (и, если необходимо, <CODE>autoheader</CODE>) для
повторного создания скриптов <CODE>configure</CODE> и шаблонов заголовочных
файлов настройки для исходных текстов, корневой каталог которых
находится в текущем каталоге. По умолчанию, эти программы создают заново
только те файлы, которые старше, чем соответствующий файл
<TT>`configure.in'</TT> или (если имеется) <TT>`aclocal.m4'</TT>. Поскольку
программа <CODE>autoheader</CODE> не изменяет время модификации
выходного файла в случае, если файл не изменялся, то не обязательно
будет проделано минимальное количество работы.  Если вы
установили новую версию Autoconf, то вы можете заставить
<CODE>autoreconf</CODE> заново создать <EM>все</EM> файлы, задав ключ командной
строки <SAMP>`--force'</SAMP>.


<P>
Если вы зададите программе <CODE>autoreconf</CODE> ключи командной строки 
<SAMP>`--macrodir=<VAR>dir</VAR>'</SAMP> или <SAMP>`--localdir=<VAR>dir</VAR>'</SAMP>, то она
передаст их программам <CODE>autoconf</CODE> и <CODE>autoheader</CODE> (с правильно
настроенными относительными путями).


<P>
<CODE>autoreconf</CODE> не поддерживает нахождение в одном дереве как каталогов, 
которые являются частями большого проекта (и которые используют
одни и те же файлы <TT>`aclocal.m4'</TT> и <TT>`acconfig.h'</TT>), так и каталогов, которые
являются независимыми пакетами (которые имеют собственные файлы
<TT>`aclocal.m4'</TT> и <TT>`acconfig.h'</TT>). Программа предполагает, что все
каталоги являются частями одного пакета, если вы используете ключ
командной строки <SAMP>`--localdir'</SAMP>, или что каждый каталог является
отдельным пакетом, если вы не используете этот ключ. Это
ограничение может быть убрано в будущем.


<P>
See section <A HREF="#autoconf_ru_3_html_SEC14">Автоматическая пересборка</A>, где описаны правила <TT>`Makefile'</TT>
для автоматического пересоздания скриптов <CODE>configure</CODE>, если
изменяются исходные тексты этих скриптов.  Этот метод
корректно обрабатывает изменение шаблонов заголовочных файлов
конфигурации, но не передает команде ключи командной строки
<SAMP>`--macrodir=<VAR>dir</VAR>'</SAMP> или <SAMP>`--localdir=<VAR>dir</VAR>'</SAMP>.


<P>
<CODE>autoreconf</CODE> распознает следующие ключи командной строки:


<DL COMPACT>

<DT><CODE>--help</CODE>
<DD>
<DT><CODE>-h</CODE>
<DD>
выдает список ключей командной строки и прекращает работу.

<DT><CODE>--force</CODE>
<DD>
<DT><CODE>-f</CODE>
<DD>
Пересоздать даже те скрипты <TT>`configure'</TT> и заголовочные файлы настройки,
которые новее, чем соответствующие входные файлы (<TT>`configure.in'</TT> и, 
если есть, <TT>`aclocal.m4'</TT>).

<DT><CODE>--localdir=<VAR>dir</VAR></CODE>
<DD>
<DT><CODE>-l <VAR>dir</VAR></CODE>
<DD>
Заставляет программы <CODE>autoconf</CODE> и <CODE>autoheader</CODE> искать файлы 
<TT>`aclocal.m4'</TT> и (для <CODE>autoheader</CODE>) <TT>`acconfig.h'</TT> (но не
<TT>`<VAR>file</VAR>.top'</TT> и <TT>`<VAR>file</VAR>.bot'</TT>) данного пакета в каталоге
<VAR>dir</VAR> вместо каталога, который содержит отдельный файл
<TT>`configure.in'</TT>.

<DT><CODE>--macrodir=<VAR>dir</VAR></CODE>
<DD>
<DT><CODE>-m <VAR>dir</VAR></CODE>
<DD>
<A NAME="autoconf_ru_2_html_IDX4"></A>
Заставляет программу искать файлы данных в каталоге <VAR>dir</VAR>, а не
в каталоге, куда производилась установка. Вы также можете установить
значение переменной окружения <CODE>AC_MACRODIR</CODE> равным пути к этому
каталогу; данный ключ командной строки переопределяет значение переменной
окружения.

<DT><CODE>--verbose</CODE>
<DD>
Выдает имена каждого каталога, в котором <CODE>autoreconf</CODE> запускает
<CODE>autoconf</CODE> (и если необходимо то и <CODE>autoheader</CODE>).

<DT><CODE>--version</CODE>
<DD>
Выдает номер версии Autoconf и прекращает работу.
</DL>

<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_1_html">previous</A>, <A HREF="#autoconf_ru_3_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_3_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_2_html">previous</A>, <A HREF="#autoconf_ru_4_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC8" HREF="#autoconf_ru_toc_html_TOC8">Файлы инициализации и выходные файлы</A></H1>
<P>
@anchor{Setup}


<P>
Скриптам, созданным Autoconf, нужна некоторая инициализационная
информация, как то: где найти исходные тексты пакета; какие выходные
файлы создавать.  В нижеследующей главе описана инициализация и создание 
выходных файлов.




<H2><A NAME="SEC9" HREF="#autoconf_ru_toc_html_TOC9">Нахождение ввода <CODE>configure</CODE></A></H2>
<P>
@anchor{Input}


<P>
Каждый скрипт <CODE>configure</CODE> должен первым делом вызвать макрос
<CODE>AC_INIT</CODE>.  Единственный обязательный макрос -- <CODE>AC_OUTPUT</CODE>
(see section <A HREF="#autoconf_ru_3_html_SEC10">Создание выходных файлов</A>). 


<P>
<DL>
<DT><U>Macro:</U> <B>AC_INIT</B> <I>(<VAR>unique-file-in-source-dir</VAR>)</I>
<DD><A NAME="autoconf_ru_3_html_IDX5"></A>
<A NAME="autoconf_ru_3_html_IDX6"></A>
Обрабатывает аргументы командной строки и ищет каталог с исходными
текстами. <VAR>unique-file-in-source-dir</VAR>--- это некоторый файл в каталоге
с исходными текстами пакета; <CODE>configure</CODE> проверяет существование этого 
файла, чтобы убедиться, что это именно тот каталог с исходными текстами, 
какой нужно.  Иногда люди указывают неверный каталог с исходными текстами,
используя ключ командной строки <SAMP>`--srcdir'</SAMP>; эта проверка позволяет
не допускать таких инцидентов.  Для детальной информации See section <A HREF="#autoconf_ru_10_html_SEC81">Запуск скриптов <CODE>configure</CODE></A>.
</DL>


<P>
Пакетам, которые выполняют ручную настройку или используют программу 
<CODE>install</CODE>, может понадобиться указать скрипту <CODE>configure</CODE>,
где можно найти
другие скрипты командного процессора. Это выполняется с помощью вызова 
макроса <CODE>AC_CONFIG_AUX_DIR</CODE>, хотя используемые по умолчанию значения
в большинстве случаев будут правильными.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CONFIG_AUX_DIR(<VAR>dir</VAR>)</B>
<DD><A NAME="autoconf_ru_3_html_IDX7"></A>
<A NAME="autoconf_ru_3_html_IDX8"></A>
Использует скрипты <TT>`install-sh'</TT>, <TT>`config.sub'</TT>, <TT>`config.guess'</TT> и
Cygnus-версию <CODE>configure</CODE>, которые располагаются в каталоге <VAR>dir</VAR>. 
Эти вспомогательные файлы используются при конфигурировании.  Значение <VAR>dir</VAR> может
быть задано либо абсолютным путем, либо путем относительно <TT>`<VAR>srcdir</VAR>'</TT>.
Значением по умолчанию является первый из каталогов <TT>`<VAR>srcdir</VAR>'</TT>, <TT>`<VAR>srcdir</VAR>/..'</TT>
или <TT>`<VAR>srcdir</VAR>/../..'</TT>, в котором будет найден файл
<TT>`install-sh'</TT>. Проверка наличия других файлов не производится, так
что использование <CODE>AC_PROG_INSTALL</CODE> не требует включения в
дистрибутив других вспомогательных файлов. Также проверяется наличие
файла <TT>`install.sh'</TT>, но это имя является устаревшим, поскольку
некоторые программы <CODE>make</CODE> имеют правило, которое создает файл
<TT>`install'</TT> из этого файла, в случае если <TT>`Makefile'</TT>
отсутствует.
</DL>




<H2><A NAME="SEC10" HREF="#autoconf_ru_toc_html_TOC10">Создание выходных файлов</A></H2>
<P>
@anchor{Output}


<P>
Каждый скрипт <CODE>configure</CODE>, созданный Autoconf, должен заканчиваться
вызовом макроса <CODE>AC_OUTPUT</CODE>. Этот макрос создает файлы <TT>`Makefile'</TT>
и, может быть, дополнительные файлы, которые являются результатом
конфигурации.  Еще одним обязательным макросом является <CODE>AC_INIT</CODE>
(see section <A HREF="#autoconf_ru_3_html_SEC9">Нахождение ввода <CODE>configure</CODE></A>).


<P>
<DL>
<DT><U>Macro:</U> <B>AC_OUTPUT</B> <I>([<VAR>file</VAR>... [, <VAR>extra-cmds</VAR> [, <VAR>init-cmds</VAR>]]])</I>
<DD><A NAME="autoconf_ru_3_html_IDX9"></A>
<A NAME="autoconf_ru_3_html_IDX10"></A>
Создает выходные файлы.  Вызовите этот макрос один раз в конце файла 
<TT>`configure.in'</TT>. Аргумент <VAR>file</VAR>... является списком
выходных файлов через пробел; этот список может быть пустым.  Этот макрос создает
каждый из файлов <TT>`<VAR>file</VAR>'</TT>, копируя входной файл (который по умолчанию
называется <TT>`<VAR>file</VAR>.in'</TT>) и подставляя значения выходных переменных.
Для более детального описания использования выходных переменных 
See section <A HREF="#autoconf_ru_3_html_SEC11">Подстановки в файлах Makefile</A>. 
Для детального описания того, как создавать 
такие переменные See section <A HREF="#autoconf_ru_6_html_SEC54">Установка выходных переменных</A>. Этот макрос создает 
каталог,
в котором находится файл, если этот каталог не существует (но не создает
родительские каталоги для этого каталога). Обычно таким  образом создаются
файлы <TT>`Makefile'</TT>, но можно указать также и другие файлы, такие
как <TT>`.gdbinit'</TT>.


<P>
Если вызывались макросы <CODE>AC_CONFIG_HEADER</CODE>, <CODE>AC_LINK_FILES</CODE> или
<CODE>AC_CONFIG_SUBDIRS</CODE>, то этот макрос также создает файлы, указанные в
аргументах этих макросов.


<P>
Типичный вызов <CODE>AC_OUTPUT</CODE> выглядит примерно так:

<PRE>
AC_OUTPUT(Makefile src/Makefile man/Makefile X/Imakefile)
</PRE>

<P>
Вы можете переопределить имена входных файлов, добавив к <VAR>file</VAR> список
входных файлов, который разделен двоеточием. Например:

<PRE>
AC_OUTPUT(Makefile:templates/top.mk lib/Makefile:templates/lib.mk)
AC_OUTPUT(Makefile:templates/vars.mk:Makefile.in:templates/rules.mk)
</PRE>

<P>
Это позволит вам сохранить имена файлов в формате MS-DOS, 
или для добавления стандартных кусков кода кода в начало или конец файла.


<P>
В параметре <VAR>extra-cmds</VAR> можно указать команды, которые будут
вставлены в файл <TT>`config.status'</TT> и сработают после того, как было
сделано все остальное.  В параметре <VAR>init-cmds</VAR> можно указать
команды, которые будут вставлены непосредственно перед <VAR>extra-cmds</VAR>, 
причем <CODE>configure</CODE> выполнит в них подстановку переменных, команды и 
обратных слэшей.   Аргумент <VAR>init-cmds</VAR> можно использовать для
передачи переменных из <CODE>configure</CODE> в 
<VAR>extra-cmds</VAR>.  Если был вызван макрос <CODE>AC_OUTPUT_COMMANDS</CODE>, то
команды,
переданные ему в качестве аргумента, выполняются прямо перед командами,
переданными макросу <CODE>AC_OUTPUT</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_OUTPUT_COMMANDS</B> <I>(<VAR>extra-cmds</VAR> [, <VAR>init-cmds</VAR>])</I>
<DD><A NAME="autoconf_ru_3_html_IDX11"></A>
Задает дополнительные команды командного процессора, которые выполняются 
в конце <TT>`config.status'</TT>, а также команды для инициализации
переменных в <CODE>configure</CODE>.  Этот макрос можно вызывать несколько
раз.  Вот нереальный пример:



<PRE>
fubar=27
AC_OUTPUT_COMMANDS([echo this is extra $fubar, and so on.], fubar=$fubar)
AC_OUTPUT_COMMANDS([echo this is another, extra, bit], [echo init bit])
</PRE>

</DL>

<P>
Если вам нужно запустить <CODE>make</CODE> в подкаталогах, то это следует
делать с помощью переменной <CODE>MAKE</CODE>.  Большинство версий программы
<CODE>make</CODE> устанавливают значение переменной <CODE>MAKE</CODE> равным имени
программы <CODE>make</CODE> с дополнительно заданными ключами. (Но многие
версии не включаются сюда значения переменных, заданных в командной
строке, поэтому они не передаются автоматически).  Некоторые старые версии команды
<CODE>make</CODE> не устанавливают эту переменную. Следующий макрос позволяет
вам использовать переменную <CODE>MAKE</CODE> даже таких старых версий.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_MAKE_SET</B>
<DD><A NAME="autoconf_ru_3_html_IDX12"></A>
<A NAME="autoconf_ru_3_html_IDX13"></A>
<A NAME="autoconf_ru_3_html_IDX14"></A>
Если <CODE>make</CODE> определяет переменную <CODE>MAKE</CODE>, то переменная 
<CODE>SET_MAKE</CODE> получает пустое значение. Иначе, определяется переменная 
<CODE>SET_MAKE</CODE> со значением <SAMP>`MAKE=make'</SAMP>. Для переменной <CODE>SET_MAKE</CODE>
вызывается макрос <CODE>AC_SUBST</CODE>.
</DL>


<P>
Для использования данного макроса поместите следующую строку в каждый из
файлов <TT>`Makefile.in'</TT>, в котором производится запуск <CODE>MAKE</CODE> 
для подкаталогов:



<PRE>
@SET_MAKE@
</PRE>



<H2><A NAME="SEC11" HREF="#autoconf_ru_toc_html_TOC11">Подстановки в файлах Makefile</A></H2>
<P>
@anchor{Makefile Substitutions}


<P>
Каждый подкаталог дистрибутива, который содержит что либо, что должно
компилироваться или устанавливаться, должен поставляться с файлом
<TT>`Makefile.in'</TT>, из которого <CODE>configure</CODE> создаст файл
<TT>`Makefile'</TT> для данного каталога. Для создания <TT>`Makefile'</TT>,
<CODE>configure</CODE> выполнит простую подстановку переменных, заменяя
вхождения <SAMP>`@<VAR>variable</VAR>@'</SAMP> в файле <TT>`Makefile.in'</TT> на
значения, которые определены <CODE>configure</CODE> для данной
переменной. Переменные, которые подставляются в выходных файлах таким
способом, называются <EM>выходными переменными (output variables)</EM>.  Они
являются обычными переменными командного процессора, которые
устанавливаются в <CODE>configure</CODE>. Для того, чтобы <CODE>configure</CODE>
подставлял в выходных файлах определенную переменную, необходимо вызвать
макрос <CODE>AC_SUBST</CODE> с именем переменной в качестве аргумента. Любое
вхождение <SAMP>`@<VAR>variable</VAR>@'</SAMP> для других переменных остается
неизмененным.  Для получения дополнительной информации о создании
выходных переменных с помощью макроса <CODE>AC_SUBST</CODE> See section <A HREF="#autoconf_ru_6_html_SEC54">Установка выходных переменных</A>.


<P>
Пакеты программного обеспечения, использующие скрипт <CODE>configure</CODE>, должны 
распространяться с файлами <TT>`Makefile.in'</TT>, но не с файлами <TT>`Makefile'</TT>;
таким образом, пользователь должен перед компиляцией сконфигурировать
программный пакет так, чтобы он соответствовал используемой системе.


<P>
See section `Makefile Conventions' in <CITE>The GNU Coding Standards</CITE>, для получения информации о том, что можно помещать в 
файлы <TT>`Makefile'</TT>.




<H3><A NAME="SEC12" HREF="#autoconf_ru_toc_html_TOC12">Предварительная установка выходных переменных</A></H3>
<P>
@anchor{Preset Output Variables}


<P>
Некоторые выходные переменные заранее устанавливаются макросами
Autoconf. Некоторые макросы Autoconf устанавливают дополнительные
выходные переменные, которые упомянуты в описаниях этих макросов.
Полный список выходных переменных находится в section <A HREF="#autoconf_ru_17_html_SEC111">Индекс выходных переменных</A>.
See section `Variables for Installation Directories' in <CITE>The GNU Coding Standards</CITE>, для дополнительной информации о
переменных с именами, которые заканчиваются на <SAMP>`dir'</SAMP>.


<P>
<DL>
<DT><U>Variable:</U> <B>bindir</B>
<DD><A NAME="autoconf_ru_3_html_IDX15"></A>
<A NAME="autoconf_ru_3_html_IDX16"></A>
Каталог в который устанавливаются исполняемые программы, которые
запускают пользователи. 
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>configure_input</B>
<DD><A NAME="autoconf_ru_3_html_IDX17"></A>
<A NAME="autoconf_ru_3_html_IDX18"></A>
Комментарий, сообщающий что файл был автоматически создан скриптом
<CODE>configure</CODE> и выдает имя входного файла. <CODE>AC_OUTPUT</CODE> добавляет
строку комментария, содержащую эту переменную, в начало каждого
создаваемого файла <TT>`Makefile'</TT>.  Для других файлов вы должны
сослаться на эту переменную в комментарии в заголовке каждого входного
файла. Например, входной скрипт командного процессора должен начинаться
примерно так:



<PRE>
#! /bin/sh
# @configure_input@
</PRE>

<P>
Наличие этой строки также напоминает людям, редактирующим этот файл, что
перед использованием его необходимо обработать с помощью <CODE>configure</CODE>.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>datadir</B>
<DD><A NAME="autoconf_ru_3_html_IDX19"></A>
<A NAME="autoconf_ru_3_html_IDX20"></A>
Каталог, куда устанавливаются файлы данных, не зависящие от архитектуры.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>exec_prefix</B>
<DD><A NAME="autoconf_ru_3_html_IDX21"></A>
<A NAME="autoconf_ru_3_html_IDX22"></A>
Префикс указывающий, куда будут устанавливаться файлы, зависящие от
архитектуры.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>includedir</B>
<DD><A NAME="autoconf_ru_3_html_IDX23"></A>
<A NAME="autoconf_ru_3_html_IDX24"></A>
Каталог, куда будут устанавливаться заголовочные файлы C.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>infodir</B>
<DD><A NAME="autoconf_ru_3_html_IDX25"></A>
<A NAME="autoconf_ru_3_html_IDX26"></A>
Каталог, куда будет устанавливаться документация в формате Info.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>libdir</B>
<DD><A NAME="autoconf_ru_3_html_IDX27"></A>
<A NAME="autoconf_ru_3_html_IDX28"></A>
Каталог куда будут устанавливаться скомпилированные библиотеки.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>libexecdir</B>
<DD><A NAME="autoconf_ru_3_html_IDX29"></A>
<A NAME="autoconf_ru_3_html_IDX30"></A>
Каталог, в который устанавливаются исполняемые файлы, запускаемые
другими программами.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>localstatedir</B>
<DD><A NAME="autoconf_ru_3_html_IDX31"></A>
<A NAME="autoconf_ru_3_html_IDX32"></A>
Каталог, куда будут устанавливаться изменяемые файлы данных для данной
машины. 
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>mandir</B>
<DD><A NAME="autoconf_ru_3_html_IDX33"></A>
<A NAME="autoconf_ru_3_html_IDX34"></A>
Каталог верхнего уровня, в который будут устанавливаться страницы
руководства. 
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>oldincludedir</B>
<DD><A NAME="autoconf_ru_3_html_IDX35"></A>
<A NAME="autoconf_ru_3_html_IDX36"></A>
Каталог, куда будут устанавливаться заголовочные файлы, для не-gcc
компиляторов. 
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>prefix</B>
<DD><A NAME="autoconf_ru_3_html_IDX37"></A>
<A NAME="autoconf_ru_3_html_IDX38"></A>
Префикс для установки файлов, не зависящих от архитектуры.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>sbindir</B>
<DD><A NAME="autoconf_ru_3_html_IDX39"></A>
<A NAME="autoconf_ru_3_html_IDX40"></A>
Каталог для установки исполняемых файлов, запускаемых администратором.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>sharedstatedir</B>
<DD><A NAME="autoconf_ru_3_html_IDX41"></A>
<A NAME="autoconf_ru_3_html_IDX42"></A>
Каталог в который устанавливаются изменяемые, независящие от архитектуры
файлы данных.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>srcdir</B>
<DD><A NAME="autoconf_ru_3_html_IDX43"></A>
<A NAME="autoconf_ru_3_html_IDX44"></A>
Каталог, который содержит исходный код для данного <TT>`Makefile'</TT>.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>sysconfdir</B>
<DD><A NAME="autoconf_ru_3_html_IDX45"></A>
<A NAME="autoconf_ru_3_html_IDX46"></A>
Каталог, в который устанавливаются неизменяемые файлы данных для данной
машины.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>top_srcdir</B>
<DD><A NAME="autoconf_ru_3_html_IDX47"></A>
<A NAME="autoconf_ru_3_html_IDX48"></A>
Каталог верхнего уровня, содержащий исходный код пакета. В каталоге
верхнего уровня эта переменная совпадает с <CODE>srcdir</CODE>.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>CFLAGS</B>
<DD><A NAME="autoconf_ru_3_html_IDX49"></A>
<A NAME="autoconf_ru_3_html_IDX50"></A>
Ключи оптимизации и отладочной информации для компилятора C. Если эта
переменная не установлена в среде при запуске <CODE>configure</CODE>, то
значение по умолчанию устанавливается при вызове макроса
<CODE>AC_PROG_CC</CODE> (или равно пустому значению, если вы не вызываете этот
макрос). <CODE>configure</CODE> использует эту переменную при компиляции
программ для тестирования возможностей компилятора C.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>CPPFLAGS</B>
<DD><A NAME="autoconf_ru_3_html_IDX51"></A>
<A NAME="autoconf_ru_3_html_IDX52"></A>
Каталоги поиска заголовочных файлов (<SAMP>`-I<VAR>dir</VAR>'</SAMP>) и любые другие
ключи для препроцессора и компилятора C.  Если эта переменная не
установлена в среде при запуске <CODE>configure</CODE>, то значение по
умолчанию равно пустому значению. <CODE>configure</CODE> использует эту
переменную при компиляции программ или обработке препроцессором для
тестирования возможностей компилятора C.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>CXXFLAGS</B>
<DD><A NAME="autoconf_ru_3_html_IDX53"></A>
<A NAME="autoconf_ru_3_html_IDX54"></A>
Ключи оптимизации и отладочной информации для компилятора C++. Если эта
переменная не установлена в среде при запуске <CODE>configure</CODE>, то
значение по умолчанию устанавливается при вызове макроса
<CODE>AC_PROG_CXX</CODE> (или равно пустому значению, если вы не вызываете этот
макрос). <CODE>configure</CODE> использует эту переменную при компиляции
программ для тестирования возможностей компилятора C++.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>FFLAGS</B>
<DD><A NAME="autoconf_ru_3_html_IDX55"></A>
<A NAME="autoconf_ru_3_html_IDX56"></A>
Ключи оптимизации и отладочной информации для компилятора Fortran 77. Если эта
переменная не установлена в среде при запуске <CODE>configure</CODE>, то
значение по умолчанию устанавливается при вызове макроса
<CODE>AC_PROG_F77</CODE> (или равно пустому значению, если вы не вызываете этот
макрос). <CODE>configure</CODE> использует эту переменную при компиляции
программ для тестирования возможностей компилятора Fortran 77.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>DEFS</B>
<DD><A NAME="autoconf_ru_3_html_IDX57"></A>
<A NAME="autoconf_ru_3_html_IDX58"></A>
Ключи <SAMP>`-D'</SAMP>, передаваемые компилятору C.  Если вызывается макрос
<CODE>AC_CONFIG_HEADER</CODE>, то <CODE>configure</CODE> заменяет вхождения
<SAMP>`@DEFS@'</SAMP> на <SAMP>`-DHAVE_CONFIG_H'</SAMP> (see section <A HREF="#autoconf_ru_3_html_SEC15">Заголовочные файлы конфигурации</A>).  Эта переменная не определена во время выполнения тестов
<CODE>configure</CODE>, она определяется только при создании выходных
файлов. See section <A HREF="#autoconf_ru_6_html_SEC54">Установка выходных переменных</A>, для описания того, как получить
результаты предыдущих тестов.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>LDFLAGS</B>
<DD><A NAME="autoconf_ru_3_html_IDX59"></A>
<A NAME="autoconf_ru_3_html_IDX60"></A>
Ключ для удаления отладочной информации (<SAMP>`-s'</SAMP>), а также другие
ключи для компоновщика. Если не установлена в среде при запуске
<CODE>configure</CODE>, то по умолчанию имеет пустое
значение. <CODE>configure</CODE> использует эту переменную при компоновке
программ для тестирования возможностей С.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>LIBS</B>
<DD><A NAME="autoconf_ru_3_html_IDX61"></A>
<A NAME="autoconf_ru_3_html_IDX62"></A>
Ключи <SAMP>`-l'</SAMP> и <SAMP>`-L'</SAMP>, передаваемые компоновщику.
</DL>




<H3><A NAME="SEC13" HREF="#autoconf_ru_toc_html_TOC13">Каталоги сборки программ</A></H3>
<P>
@anchor{Build Directories}


<P>
Вы можете поддерживать одновременную компиляцию пакета программного
обеспечения для различных архитектур из одной и той же копии исходного
кода. Объектные файлы для каждой из архитектур хранятся в отдельных
каталогах. 


<P>
Для поддержки этого <CODE>make</CODE> использует переменную <CODE>VPATH</CODE> для
поиска файлов, которые находятся в каталоге с исходными текстами.  Такая 
возможность
поддерживается GNU <CODE>make</CODE> и большинством других программ
<CODE>make</CODE> свежих версий. Старые версии программы <CODE>make</CODE> не
поддерживают переменную <CODE>VPATH</CODE>; при их использовании
исходные тексты должны находиться в том же каталоге, что и объектные
файлы. 


<P>
Для поддержки <CODE>VPATH</CODE> каждый файл <TT>`Makefile.in'</TT> должен
содержать две строки, которые могут выглядеть следующим образом:



<PRE>
srcdir = @srcdir@
VPATH = @srcdir@
</PRE>

<P>
Не надо устанавливать <CODE>VPATH</CODE> в значение другой переменной,
например <SAMP>`VPATH = $(srcdir)'</SAMP>, поскольку некоторые версии
<CODE>make</CODE> не выполняют подстановку переменных для
<CODE>VPATH</CODE>.


<P>
<CODE>configure</CODE> подставляет правильное значение <CODE>srcdir</CODE> при
создании файла <TT>`Makefile'</TT>.


<P>
Не используйте переменную <CODE>$&#60;</CODE> программы <CODE>make</CODE>, которая
разворачивается в имя файла с полным путем (найденным с помощью
<CODE>VPATH</CODE>), причем только в явных правилах.  (Неявные правила,
например, <SAMP>`.c.o'</SAMP>, сообщают, как создать файл <TT>`.o'</TT> из файла
<TT>`.c'</TT>.) Некоторые версии <CODE>make</CODE> не устанавливают <CODE>$&#60;</CODE> в
явных правилах; они подставляют вместо него пустое значение.


<P>
Вместо этого командные строки<TT>`Makefile'</TT> всегда должны ссылаться на
файлы с исходными текстами, с добавлением к ним префикса
<SAMP>`$(srcdir)/'</SAMP>. Например:



<PRE>
time.info: time.texinfo
        $(MAKEINFO) $(srcdir)/time.texinfo
</PRE>



<H3><A NAME="SEC14" HREF="#autoconf_ru_toc_html_TOC14">Автоматическая пересборка</A></H3>
<P>
@anchor{Automatic Remaking}


<P>
Вы можете поместить правила, упомянутые ниже, в файл
<TT>`Makefile.in'</TT> верхнего уровня пакета, для того чтобы автоматически
обновлять информацию о конфигурации при изменении файлов конфигурации.  Этот
пример использует все дополнительные файлы, такие как <TT>`aclocal.m4'</TT>, а
также то, что относятся к заголовочным файлам конфигурации.  Уберите из
правила для <TT>`Makefile.in'</TT> файлы, не использующиеся в вашем пакете.


<P>
Префикс <SAMP>`${srcdir}/'</SAMP> добавлен из-за ограничений механизма
использования <CODE>VPATH</CODE>.


<P>
Файлы <TT>`stamp-'</TT> являются необходимыми, поскольку время последнего
изменения файлов <TT>`config.h.in'</TT> и <TT>`config.h'</TT> останется прежним, 
если пересоздание этих файлов не изменит их содержимого.  Эта возможность
позволяет избежать ненужной перекомпиляции.  Вы должны включить
файл <TT>`stamp-h.in'</TT> в дистрибутив вашего пакета, так что <CODE>make</CODE>
будет считать <TT>`config.h.in'</TT> обновленным. На некоторых старых
системах BSD, команда <CODE>touch</CODE> или любая другая, создающая файл
нулевой длины, не обновляет время изменения этого файла, так что
используйте для правильной работы команду <CODE>echo</CODE>.



<PRE>
${srcdir}/configure: configure.in aclocal.m4
        cd ${srcdir} &#38;&#38; autoconf

# autoheader мог не изменить config.h.in, так что обновить дату stamp-файла.
${srcdir}/config.h.in: stamp-h.in
${srcdir}/stamp-h.in: configure.in aclocal.m4 acconfig.h \
    config.h.top config.h.bot
        cd ${srcdir} &#38;&#38; autoheader
        echo timestamp &#62; ${srcdir}/stamp-h.in

config.h: stamp-h
stamp-h: config.h.in config.status
        ./config.status

Makefile: Makefile.in config.status
        ./config.status

config.status: configure
        ./config.status --recheck
</PRE>

<P>
Вдобавок вы должны передать <SAMP>`echo timestamp &#62; stamp-h'</SAMP> в аргументе
<VAR>extra-cmds</VAR> макросу <CODE>AC_OUTPUT</CODE>, так что
<TT>`config.status'</TT> будет гарантировать, что файл <TT>`config.h'</TT> будет
рассматриваться как обновленный. See section <A HREF="#autoconf_ru_3_html_SEC10">Создание выходных файлов</A>, для дополнительной
информации о <CODE>AC_OUTPUT</CODE>.


<P>
See section <A HREF="#autoconf_ru_11_html_SEC90">Воссоздание конфигурации</A>, где описаны дополнительные примеры
обработки конфигурационных зависимостей.




<H2><A NAME="SEC15" HREF="#autoconf_ru_toc_html_TOC15">Заголовочные файлы конфигурации</A></H2>
<P>
@anchor{Configuration Headers}


<P>
Когда пакет производит тестирование большого количества символов
препроцессора C, то командная строка  ключей <SAMP>`-D'</SAMP>, передаваемых
компилятору, может получиться достаточно длинной. Это вызывает две
проблемы. Первая заключается в том, что вывод результатов команды
<CODE>make</CODE> будет тяжело читать в поисках ошибок. Вторая и более
серьезная заключается в том, что длина командной строки может
превысить предельную длину командной строки в некоторых операционных
системах. В качестве альтернативы передаче компилятору ключей <SAMP>`-D'</SAMP>,
скрипты <CODE>configure</CODE> могут создавать заголовочные файлы C, которые
содержат директивы <SAMP>`#define'</SAMP>. Макрос <CODE>AC_CONFIG_HEADER</CODE>
выбирает этот способ выдачи результатов. Макрос должен быть вызван сразу
после вызова  <CODE>AC_INIT</CODE>.


<P>
Пакет должен подключить с помощью <CODE>#include</CODE> заголовочный файл
настройки до подключения остальных заголовочных файлов, чтобы избежать
несовместимости в объявлениях (например, если этот файл переопределяет
<CODE>const</CODE>). Используйте директиву <SAMP>`#include &#60;config.h&#62;'</SAMP> вместо
<SAMP>`#include "config.h"'</SAMP>, и передайте компилятору C
ключ <SAMP>`-I.'</SAMP>  (или <SAMP>`-I..'</SAMP>, смотря где находится
файл <TT>`config.h'</TT>). Таким образом, даже если сам каталог с исходными
текстами сконфигурирован (например, для создания дистрибутива), то
другие сборочные каталоги можно будет сконфигурировать, не используя при 
этом файл <TT>`config.h'</TT> и каталога с исходными текстами.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CONFIG_HEADER</B> <I>(<VAR>header-to-create</VAR> ...)</I>
<DD><A NAME="autoconf_ru_3_html_IDX63"></A>
<A NAME="autoconf_ru_3_html_IDX64"></A>
<A NAME="autoconf_ru_3_html_IDX65"></A>
Заставляет <CODE>AC_OUTPUT</CODE> создать файлы с именами из
разделенного пробелами списка <VAR>header-to-create</VAR>, которые будут
содержать директивы <CODE>#define</CODE> препроцессора C, и заменить
<SAMP>`@DEFS@'</SAMP> в созданных файлах на <SAMP>`-DHAVE_CONFIG_H'</SAMP> вместо
значения <CODE>DEFS</CODE>. Обычным значением для <VAR>header-to-create</VAR>
является <TT>`config.h'</TT>.


<P>
Если <VAR>header-to-create</VAR> уже существует и его содержимое не
отличается от того, что в него хотят поместить, то он остается
неизмененным. Это позволяет вносить некоторые изменения в конфигурацию без
ненужной перекомпиляции объектных файлов, которые зависят от данных
заголовочных файлов.


<P>
Обычно входной файл называется <TT>`<VAR>header-to-create</VAR>.in'</TT>; однако
вы можете переопределить имя входного файла, добавив к
<VAR>header-to-create</VAR> список входных файлов, разделенный двоеточием.
Примеры:



<PRE>
AC_CONFIG_HEADER(defines.h:defines.hin)
AC_CONFIG_HEADER(defines.h:defs.pre:defines.h.in:defs.post)
</PRE>

<P>
Это позволяет вам сохранить имена в виде, приемлемом для использования в
MS-DOS, а также для добавления стандартных кусков кода к файлам.
</DL>




<H3><A NAME="SEC16" HREF="#autoconf_ru_toc_html_TOC16">Шаблоны заголовочных файлов</A></H3>
<P>
@anchor{Header Templates}


<P>
Ваш дистрибутив должен содержать файл шаблона, который должен выглядеть
так, как будет выглядеть окончательный заголовочный файл, включая
комментарии, но при этом все значения директив <CODE>#define</CODE> в нем
будут установлены по умолчанию.  Например,
предположим, что ваш файл <TT>`configure.in'</TT> производит следующие
вызовы:



<PRE>
AC_CONFIG_HEADER(conf.h)
AC_CHECK_HEADERS(unistd.h)
</PRE>

<P>
Для этого примера необходимо вставить в <TT>`conf.h.in'</TT> нижеследующий
код.  В системах, в которых есть <TT>`unistd.h'</TT>,
<CODE>configure</CODE> заменит 0 на 1.  В других системах эта строка останется
неизмененной.



<PRE>
/* Определить со значением 1 если у вас есть unistd.h.  */
#define HAVE_UNISTD_H 0
</PRE>

<P>
Если ваш код проверяет конфигурацию, используя директиву
препроцессора <CODE>#ifdef</CODE> вместо <CODE>#if</CODE>, то значение по умолчанию
может быть удалено директивой <CODE>#undef</CODE> вместо определения
значения. В системах в которых имеется файл <TT>`unistd.h'</TT>,
<CODE>configure</CODE> изменит вторую строку на <SAMP>`#define HAVE_UNISTD_H
1'</SAMP>. В других системах эта строка будет закомментирована (в случае, если
система предопределяет этот символ).



<PRE>
/* Определяется, если в системе есть unistd.h.  */
#undef HAVE_UNISTD_H
</PRE>



<H3><A NAME="SEC17" HREF="#autoconf_ru_toc_html_TOC17">Использование <CODE>autoheader</CODE> для создания <TT>`config.h.in'</TT></A></H3>
<P>
@anchor{Invoking autoheader}


<P>
Программа <CODE>autoheader</CODE> может создать шаблон файла, содержащего
директивы <SAMP>`#define'</SAMP>, для использования с <CODE>configure</CODE>.  Если
<TT>`configure.in'</TT> использует <CODE>AC_CONFIG_HEADER(<VAR>file</VAR>)</CODE>, то
<CODE>autoheader</CODE> создает <TT>`<VAR>file</VAR>.in'</TT>; если в качестве
аргумента задано несколько имен файлов, то используется только первое
имя. В противном случае <CODE>autoheader</CODE> создаст файл <TT>`config.h.in'</TT>.


<P>
Если вы зададите аргумент программе <CODE>autoheader</CODE>, то она будет
считывать данные из этого файла, а не из файла <TT>`configure.in'</TT> и
будет выводить данные в поток стандартного вывода вместо
<TT>`config.h.in'</TT>. Если вы зададите <CODE>autoheader</CODE> аргумент
<SAMP>`-'</SAMP>, то программа будет считывать данные со стандартного ввода
вместо <TT>`configure.in'</TT> и выдавать результаты на стандартный вывод.


<P>
<CODE>autoheader</CODE> сканирует файл <TT>`configure.in'</TT> и 
определяет, какие символы препроцессора C могут быть определены в нем.
Программа копирует комментарии и директивы <CODE>#define</CODE> и <CODE>#undef</CODE> 
из файла с именем <TT>`acconfig.h'</TT>, который поставляется вместе с Autoconf. 
Программа также использует файл с именем <TT>`acconfig.h'</TT> из текущего 
каталога, если он присутствует. Если вы определите с помощью макроса
<CODE>AC_DEFINE</CODE> дополнительные символы, то вы должны создать этот файл с 
записями для них.  Для символов, определенных макросами
<CODE>AC_CHECK_HEADERS</CODE>, <CODE>AC_CHECK_FUNCS</CODE>, <CODE>AC_CHECK_SIZEOF</CODE>
или <CODE>AC_CHECK_LIB</CODE>, программа <CODE>autoheader</CODE> сама создает комментарии 
и директивы <CODE>#undef</CODE>, а не копирует их из файла, поскольку
количество возможных символов фактически бесконечно.


<P>
Файл, который создается <CODE>autoheader</CODE>, содержит в основном директивы
<CODE>#define</CODE> и <CODE>#undef</CODE> и комментарии к ним.  Если
<TT>`./acconfig.h'</TT> содержит строку <SAMP>`@TOP@'</SAMP>, то <CODE>autoheader</CODE> 
копирует строки, которые находятся выше строки <SAMP>`@TOP@'</SAMP>, прямо в
заголовок создаваемого файла. Аналогично, если <TT>`./acconfig.h'</TT> содержит
строку <SAMP>`@BOTTOM@'</SAMP>, то <CODE>autoheader</CODE> скопирует строки, расположенные
сразу после этой строки, в конец создаваемого файла.  Можно не
использовать как <SAMP>`@TOP@'</SAMP>, так и <SAMP>`@BOTTOM@'</SAMP>.


<P>
Другой способ добиться точно такого же результата -- создать 
в текущем каталоге файлы <TT>`<VAR>file</VAR>.top'</TT> (обычно 
<TT>`config.h.top'</TT>) и/или <TT>`<VAR>file</VAR>.bot'</TT>. Если эти файлы
существуют, то <CODE>autoheader</CODE> копирует их содержимое в начало и в конец 
выводимых данных. Их использование не рекомендуется, поскольку имена этих 
файлов содержат две точки и не могут применяться в MS-DOS; также это
увеличивает содержимое каталога еще на два файла. Но если вы воспользуетесь
ключом <SAMP>`--localdir=<VAR>dir</VAR>'</SAMP> для использования <TT>`acconfig.h'</TT> 
находящегося в другом каталоге, то эти файлы позволят вам вставлять
произвольные куски кода в каждый конкретный файл <TT>`config.h.in'</TT>.


<P>
<CODE>autoheader</CODE> распознает следующие ключи командной строки:


<DL COMPACT>

<DT><CODE>--help</CODE>
<DD>
<DT><CODE>-h</CODE>
<DD>
Выдает список ключей командной строки и прекращает работу.

<DT><CODE>--localdir=<VAR>dir</VAR></CODE>
<DD>
<DT><CODE>-l <VAR>dir</VAR></CODE>
<DD>
Искать файлы <TT>`aclocal.m4'</TT> и <TT>`acconfig.h'</TT> (но не 
файлы <TT>`<VAR>file</VAR>.top'</TT> и <TT>`<VAR>file</VAR>.bot'</TT>) в каталоге <VAR>dir</VAR> 
вместо текущего каталога.

<DT><CODE>--macrodir=<VAR>dir</VAR></CODE>
<DD>
<DT><CODE>-m <VAR>dir</VAR></CODE>
<DD>
<A NAME="autoconf_ru_3_html_IDX66"></A>
Искать инсталлированные файлы макросов и <TT>`acconfig.h'</TT> в 
каталоге <VAR>dir</VAR>. Вы можете также установить переменную среды 
<CODE>AC_MACRODIR</CODE>, указывающую на этот каталог; этот ключ переопределяет
значение переменной среды.

<DT><CODE>--version</CODE>
<DD>
Выдает номер версии Autoconf и прекращает работу.
</DL>



<H2><A NAME="SEC18" HREF="#autoconf_ru_toc_html_TOC18">Настройка других пакетов, находящихся в подкаталогах</A></H2>
<P>
@anchor{Subdirectories}


<P>
В большинстве ситуаций для создания
файлов <TT>`Makefile'</TT> в подкаталогах  достаточно вызова макроса 
<CODE>AC_OUTPUT</CODE>. Однако скрипты <CODE>configure</CODE>, которые 
контролируют более чем один независимый пакет, могут использовать макрос 
<CODE>AC_CONFIG_SUBDIRS</CODE> для запуска скриптов <CODE>configure</CODE> для других 
пакетов, находящихся в подкаталогах.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CONFIG_SUBDIRS</B> <I>(<VAR>dir</VAR> ...)</I>
<DD><A NAME="autoconf_ru_3_html_IDX67"></A>
<A NAME="autoconf_ru_3_html_IDX68"></A>
<A NAME="autoconf_ru_3_html_IDX69"></A>
Заставляет <CODE>AC_OUTPUT</CODE> запустить <CODE>configure</CODE> в каждом
подкаталоге <VAR>dir</VAR>, которые заданы в списке через пробел. 
Если заданный
каталог <VAR>dir</VAR> не найден, то сообщение об ошибке не выдается, поэтому
скрипт <CODE>configure</CODE> может производить конфигурацию, даже если часть
подкаталогов отсутствует.  Если заданный каталог <VAR>dir</VAR> содержит файл 
<TT>`configure.in'</TT>, но не содержит <CODE>configure</CODE>, то  будет
использоваться Cygnus-версия скрипта <CODE>configure</CODE>, местонахождение которой
определяется макросом <CODE>AC_CONFIG_AUXDIR</CODE>.


<P>
Скриптам <CODE>configure</CODE>, находящимся в подкаталогах, передается та же
командная строка, что задана текущему скрипту <CODE>configure</CODE>, только с
некоторыми изменениями, когда это необходимо (например, исправление
относительных путевых имен для кэш-файла или каталога с исходными
текстами). Этот макрос также устанавливает выходную переменную
<CODE>subdirs</CODE> равной списку каталогов <SAMP>`<VAR>dir</VAR> ...'</SAMP>. Правила
<TT>`Makefile'</TT> могут использовать эту переменную для определения того,
в какие подкаталоги будет осуществляться рекурсивный переход. Этот
макрос может вызываться много раз.
</DL>




<H2><A NAME="SEC19" HREF="#autoconf_ru_toc_html_TOC19">Префикс по умолчанию</A></H2>
<P>
@anchor{Default Prefix}


<P>
По умолчанию <CODE>configure</CODE> задает префикс для устанавливаемых файлов
равным <TT>`/usr/local'</TT>. Пользователь <CODE>configure</CODE> может выбрать
другой префикс, используя ключи командной строки <SAMP>`--prefix'</SAMP> и
<SAMP>`--exec-prefix'</SAMP>.  Есть два способа изменения значения по
умолчанию: при создании <CODE>configure</CODE> и при его запуске.


<P>
Некоторые пакеты программного обеспечения могут требовать установки по
умолчанию в каталог, отличный от <TT>`/usr/local'</TT>.  Чтобы изменить
значение по умолчанию, используйте макрос <CODE>AC_PREFIX_DEFAULT</CODE>.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PREFIX_DEFAULT</B> <I>(<VAR>prefix</VAR>)</I>
<DD><A NAME="autoconf_ru_3_html_IDX70"></A>
Устанавливает значение префикса установки по умолчанию в значение
<VAR>prefix</VAR> вместо <TT>`/usr/local'</TT>.
</DL>


<P>
Для пользователей может быть удобным, чтобы <CODE>configure</CODE> попытался
угадать префикс для установки на основе расположения некоторых программ, 
которые уже установлены в системе.  Если вы хотите именно этого,
используйте макрос <CODE>AC_PREFIX_PROGRAM</CODE>.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PREFIX_PROGRAM</B> <I>(<VAR>program</VAR>)</I>
<DD><A NAME="autoconf_ru_3_html_IDX71"></A>
<A NAME="autoconf_ru_3_html_IDX72"></A>
Если пользователь не указал префикс для установки (используя ключ
<SAMP>`--prefix'</SAMP>), то попробовать определить значение префикса на основе
поиска <VAR>program</VAR> в списке каталогов из <CODE>PATH</CODE>. Если
<VAR>program</VAR> найдена, то установить префикс равным родительскому
каталогу каталога, в котором находится <VAR>program</VAR>; иначе оставить
неизмененным значение префикса, указанного <TT>`Makefile.in'</TT>. Например,
если значением <VAR>program</VAR> является <CODE>gcc</CODE>, а в путях найдена программа
<TT>`/usr/local/gnu/bin/gcc'</TT>, то значением префикса будет
<TT>`/usr/local/gnu'</TT>.
</DL>




<H2><A NAME="SEC20" HREF="#autoconf_ru_toc_html_TOC20">Номера версий в <CODE>configure</CODE></A></H2>
<P>
@anchor{Versions}


<P>
Следующие макросы используются для работы с номерами версий в скриптах 
<CODE>configure</CODE>. Их использование не обязательно.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PREREQ</B> <I>(<VAR>version</VAR>)</I>
<DD><A NAME="autoconf_ru_3_html_IDX73"></A>
<A NAME="autoconf_ru_3_html_IDX74"></A>
Обеспечивает проверку того, что используется достаточно свежая версия
Autoconf. Если версия Autoconf, используемая для создания
<CODE>configure</CODE>, является более старой, чем <VAR>version</VAR>, то в
стандартный поток сообщений об ошибках выдается сообщение и
<CODE>configure</CODE> не создается. Например:



<PRE>
AC_PREREQ(1.8)
</PRE>

<P>
Этот макрос полезен в том случае, если ваш <TT>`configure.in'</TT>
полагается на неочевидное поведение, которое изменилось между
версиями Autoconf.  Если вам необходимы только недавно добавленные
макросы, то <CODE>AC_PREREQ</CODE> чуть менее полезен, поскольку программа
<CODE>autoconf</CODE> и так сообщит пользователю о том, какие макросы не
найдены. То же самое случится в том случае, если файл <TT>`configure.in'</TT>
будет обрабатываться версией Autoconf, более старой, чем та, в которой
был добавлен макрос <CODE>AC_PREREQ</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_REVISION</B> <I>(<VAR>revision-info</VAR>)</I>
<DD><A NAME="autoconf_ru_3_html_IDX75"></A>
<A NAME="autoconf_ru_3_html_IDX76"></A>
Копирует метки ревизий <VAR>revision-info</VAR> в скрипт <CODE>configure</CODE>,
удаляя знаки доллара и двойные кавычки.  Этот макрос позволяет
вам помещать метки версий из файла <TT>`configure.in'</TT> в
<CODE>configure</CODE>, но при этом RCS или CVS не станут изменять
их при помещении <CODE>configure</CODE> в репозиторий.  Таким образом, вы
можете легко определить, какая версия  
<TT>`configure.in'</TT> соответствует конкретному <CODE>configure</CODE>.


<P>
Хорошей идеей является вызов этого макроса перед <CODE>AC_INIT</CODE>, чтобы
номер ревизии располагался в начале и <TT>`configure.in'</TT>, и
<CODE>configure</CODE>. Для поддержки этого выдача <CODE>AC_REVISION</CODE> 
начинается с <SAMP>`#! /bin/sh'</SAMP>, подобно обычному началу скрипта
<CODE>configure</CODE>.


<P>
Вот пример этой строки в <TT>`configure.in'</TT>:



<PRE>
AC_REVISION($Revision: 1.1.1.1 $)dnl
</PRE>

<P>
это создает в <CODE>configure</CODE> строки:



<PRE>
#! /bin/sh
# From configure.in Revision: 1.30
</PRE>

</DL>

<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_2_html">previous</A>, <A HREF="#autoconf_ru_4_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_4_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_3_html">previous</A>, <A HREF="#autoconf_ru_5_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC21" HREF="#autoconf_ru_toc_html_TOC21">Существующие тесты</A></H1>
<P>
@anchor{Existing Tests}


<P>
Эти макросы выполняют проверку отдельных возможностей системы, в которых 
пакет нуждается или которые он может использовать.  
Если вам необходимо протестировать возможность, которую не
проверяет ни один из имеющихся макросов, то, скорее всего, вы сможете это
сделать путем вызова примитивных макросов с соответствующими аргументами
(see section <A HREF="#autoconf_ru_5_html_SEC40">Написание тестов</A>).


<P>
Эти тесты сообщают пользователю, что именно они проверяют и каков
результат проверки.  Результаты кэшируются для ускорения последующих
запусков <CODE>configure</CODE>
(see section <A HREF="#autoconf_ru_6_html_SEC55">Кэширование результатов</A>).


<P>
Некоторые из этих макросов устанавливают выходные
переменные. See section <A HREF="#autoconf_ru_3_html_SEC11">Подстановки в файлах Makefile</A>, для того, чтобы узнать о том,
как получить значения этих переменных. Фраза "определить <VAR>name</VAR>"
ниже используется как сокращение, обозначающее "определить символ
<VAR>name</VAR> препроцессора C в значение 1".  See section <A HREF="#autoconf_ru_6_html_SEC53">Определение символов препроцессора С</A>,
для того, чтобы узнать о том, как получить определения этих символов в
вашей программе.




<H2><A NAME="SEC22" HREF="#autoconf_ru_toc_html_TOC22">Альтернативные программы</A></H2>
<P>
@anchor{Alternative Programs}


<P>
Эти макросы проверяют наличие или поведение определенных программ.  Они
используются для выбора между несколькими различными программами и для
решения того, что делать, когда нужная программа выбрана. Если для
проверки наличия необходимой вам программы нет отдельного макроса, и вам
не нужно выполнять проверку специальных возможностей этой программы, то
можно использовать один из стандартных макросов проверки программ.




<H3><A NAME="SEC23" HREF="#autoconf_ru_toc_html_TOC23">Проверка отдельных программ</A></H3>
<P>
@anchor{Particular Programs}


<P>
Эти макросы выполняют проверку отдельных программ--- существуют ли они, 
а также, в некоторых случаях, проверку того, поддерживают ли эти программы
определенные свойства.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_DECL_YYTEXT</B>
<DD><A NAME="autoconf_ru_4_html_IDX77"></A>
<A NAME="autoconf_ru_4_html_IDX78"></A>
<A NAME="autoconf_ru_4_html_IDX79"></A>
<A NAME="autoconf_ru_4_html_IDX80"></A>
Определяет <CODE>YYTEXT_POINTER</CODE>, если <CODE>yytext</CODE> имеет тип
<SAMP>`char *'</SAMP>, а не <SAMP>`char []'</SAMP>.  Также устанавливает значение
выходной переменной <CODE>LEX_OUTPUT_ROOT</CODE> равным основе имени файла,
создаваемого лексическим генератором; обычно это значение равно
<TT>`lex.yy'</TT>, но иногда используется что-то другое. Эти результаты
различаются в зависимости от того, используется ли <CODE>lex</CODE> или
<CODE>flex</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_AWK</B>
<DD><A NAME="autoconf_ru_4_html_IDX81"></A>
<A NAME="autoconf_ru_4_html_IDX82"></A>
<A NAME="autoconf_ru_4_html_IDX83"></A>
Проверяет наличие <CODE>mawk</CODE>, <CODE>gawk</CODE>, <CODE>nawk</CODE> и <CODE>awk</CODE>, в таком
порядке и устанавливает выходную переменную <CODE>AWK</CODE>, равную имени найденной 
программы. Сначала пытается найти <CODE>mawk</CODE>, который считается
самой быстрой реализацией.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_CC</B>
<DD><A NAME="autoconf_ru_4_html_IDX84"></A>
<A NAME="autoconf_ru_4_html_IDX85"></A>
<A NAME="autoconf_ru_4_html_IDX86"></A>
<A NAME="autoconf_ru_4_html_IDX87"></A>
Определяет компилятор C, который надо использовать.  Если переменная
среды <CODE>CC</CODE> не 
установлена, то проверить наличие <CODE>gcc</CODE> и использовать
<CODE>cc</CODE>, если <CODE>gcc</CODE> не найден. Устанавливает выходную переменную
<CODE>CC</CODE>, равную имени найденного компилятора.


<P>
Если используется компилятор GNU C, то значение переменной <CODE>GCC</CODE>
устанавливается в значение <SAMP>`yes'</SAMP>, в противном случае оно остается
пустым. Если выходная переменная <CODE>CFLAGS</CODE> еще не была установлена,
то установить ее равной <SAMP>`-g -O2'</SAMP> для компилятора GNU C (<SAMP>`-O2'</SAMP>
на системах, в которых GCC не понимает ключа <SAMP>`-g'</SAMP>) или равной
<SAMP>`-g'</SAMP> для других компиляторов.


<P>
Если используемый компилятор C не создает исполняемых файлов, которые
могут запускаться в той системе, где исполняется <CODE>configure</CODE>, то
переменной командного процессора <CODE>cross_compiling</CODE> присваивается
значение <SAMP>`yes'</SAMP>, в противном случае она получает значение
<SAMP>`no'</SAMP>.  Другими словами, здесь проверяется, отличается ли тип системы, для
которой производится сборка, от системы, на которой производится сборка
(тип целевой системы не относится к этому тесту). Для получения
дополнительной информации о кросс-компиляции See section <A HREF="#autoconf_ru_8_html_SEC67">Ручная настройка</A>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_CC_C_O</B>
<DD><A NAME="autoconf_ru_4_html_IDX88"></A>
<A NAME="autoconf_ru_4_html_IDX89"></A>
<A NAME="autoconf_ru_4_html_IDX90"></A>
Если компилятор C не может запускаться одновременно с ключами <SAMP>`-c'</SAMP> и 
<SAMP>`-o'</SAMP>, то определяется переменная <CODE>NO_MINUS_C_MINUS_O</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_CPP</B>
<DD><A NAME="autoconf_ru_4_html_IDX91"></A>
<A NAME="autoconf_ru_4_html_IDX92"></A>
<A NAME="autoconf_ru_4_html_IDX93"></A>
Значение выходной переменной <CODE>CPP</CODE> устанавливается равным имени
команды, которая запускает препроцессор C. Если <SAMP>`$CC -E'</SAMP> не
работает, то используется <TT>`/lib/cpp'</TT>. Переносимым решением является
запуск <CODE>CPP</CODE> только для обработки файлов с расширением <TT>`.c'</TT>.


<P>
Если текущим языком является C (see section <A HREF="#autoconf_ru_5_html_SEC51">Выбор языка</A>), то многие
специфические тесты косвенно используют значение переменной <CODE>CPP</CODE>,
вызывая макросы <CODE>AC_TRY_CPP</CODE>, <CODE>AC_CHECK_HEADER</CODE>,
<CODE>AC_EGREP_HEADER</CODE> или <CODE>AC_EGREP_CPP</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_CXX</B>
<DD><A NAME="autoconf_ru_4_html_IDX94"></A>
<A NAME="autoconf_ru_4_html_IDX95"></A>
<A NAME="autoconf_ru_4_html_IDX96"></A>
<A NAME="autoconf_ru_4_html_IDX97"></A>
Определяет имя используемого компилятора C++.  Проверяется,
установлены ли переменные среды <CODE>CXX</CODE> или <CODE>CCC</CODE> (именно в
таком порядке); если одна из них установлена, то значение выходной переменной
<CODE>CXX</CODE> устанавливается равным значению этой переменной.  В противном
случае производится поиск компилятора C++, используя вероятные имена (<CODE>c++</CODE>,
<CODE>g++</CODE>, <CODE>gcc</CODE>, <CODE>CC</CODE>, <CODE>cxx</CODE> и <CODE>cc++</CODE>). Если ни
одна из этих проверок не прошла успешно, то в качестве последнего шанса
значение переменной <CODE>CXX</CODE> устанавливается равным <CODE>gcc</CODE>.


<P>
Если используется компилятор GNU C++, то переменная командного
процессора <CODE>GXX</CODE> получает значение <SAMP>`yes'</SAMP>, иначе ей
присваивается пустое значение.  Если выходная переменная <CODE>CXXFLAGS</CODE>
еще не была установлена, то ей присваивается значение <SAMP>`-g -O2'</SAMP> для
компилятора GNU C++ (<SAMP>`-O2'</SAMP> на системах, где G++ не распознает ключ
<SAMP>`-g'</SAMP>) или значение <SAMP>`-g'</SAMP> для других систем.


<P>
Если используемый компилятор C++ не создает исполняемых файлов, которые
могут запускаться в системе, где выполняется <CODE>configure</CODE>, то
переменной командного процессора <CODE>cross_compiling</CODE> присваивается
значение <SAMP>`yes'</SAMP>, в противном случае устанавливается значение
<SAMP>`no'</SAMP>. Другими словами, здесь проверяется, отличается ли тип системы, для
которой производится сборка, от системы, на которой производится сборка
(тип целевой системы не относится к этому тесту).  Для получения
дополнительной информации о кросс-компиляции See section <A HREF="#autoconf_ru_8_html_SEC67">Ручная настройка</A>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_CXXCPP</B>
<DD><A NAME="autoconf_ru_4_html_IDX98"></A>
<A NAME="autoconf_ru_4_html_IDX99"></A>
<A NAME="autoconf_ru_4_html_IDX100"></A>


<P>
Значение выходной переменной <CODE>CXXCPP</CODE> устанавливается равным имени
команды, которая запускает препроцессор C++. Если <SAMP>`$CXX -E'</SAMP> не
работает, то используется <TT>`/lib/cpp'</TT>. Переносимым решением является
запуск <CODE>CXXCPP</CODE> только для обработки файлов с расширениями <TT>`.c'</TT>,
<TT>`.C'</TT> или <TT>`.cc'</TT>.


<P>
Если текущим языком является C++ (see section <A HREF="#autoconf_ru_5_html_SEC51">Выбор языка</A>), то многие
специфические тесты косвенно используют значение переменной
<CODE>CXXCPP</CODE>, вызывая <CODE>AC_TRY_CPP</CODE>, <CODE>AC_CHECK_HEADER</CODE>,
<CODE>AC_EGREP_HEADER</CODE> или <CODE>AC_EGREP_CPP</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_F77</B>
<DD><A NAME="autoconf_ru_4_html_IDX101"></A>
<A NAME="autoconf_ru_4_html_IDX102"></A>
<A NAME="autoconf_ru_4_html_IDX103"></A>
<A NAME="autoconf_ru_4_html_IDX104"></A>
Определяет имя используемого компилятора Fortran 77. Если переменная
среды <CODE>F77</CODE> не установлена, то производится проверка наличия
программ <CODE>g77</CODE>, <CODE>f77</CODE> and <CODE>f2c</CODE>, в описанном порядке. Имя
найденной программы присваивается выходной переменной <CODE>F77</CODE>.


<P>
Если используется программа <CODE>g77</CODE> (компилятор GNU Fortran 77), то
макрос <CODE>AC_PROG_F77</CODE> установит переменную <CODE>G77</CODE> равной
значению <SAMP>`yes'</SAMP>, а в противном случае ей будет присвоено пустое
значение. Если выходная переменная <CODE>FFLAGS</CODE> не была установлена в
среде, то для <CODE>g77</CODE> данной переменной присваивается значение
<SAMP>`-g -02'</SAMP> (или <SAMP>`-O2'</SAMP> в тех случаях когда <CODE>g77</CODE> не
принимает ключ <SAMP>`-g'</SAMP>). Иначе, для всех остальных компиляторов
Fortran 77, переменной <CODE>FFLAGS</CODE> присваивается значение <SAMP>`-g'</SAMP>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_F77_C_O</B>
<DD><A NAME="autoconf_ru_4_html_IDX105"></A>
<A NAME="autoconf_ru_4_html_IDX106"></A>
<A NAME="autoconf_ru_4_html_IDX107"></A>
Выполняет проверку того, что компилятор Fortran 77 может запускаться 
одновременно с ключами <SAMP>`-c'</SAMP> и <SAMP>`-o'</SAMP>. Если компилятор не принимает
эти ключи одновременно, то определяется переменная 
<CODE>F77_NO_MINUS_C_MINUS_O</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_GCC_TRADITIONAL</B>
<DD><A NAME="autoconf_ru_4_html_IDX108"></A>
<A NAME="autoconf_ru_4_html_IDX109"></A>
<A NAME="autoconf_ru_4_html_IDX110"></A>
Добавляет строку <SAMP>`-traditional'</SAMP> к выходной переменной <CODE>CC</CODE> в
том случае, если используемый компилятор GNU C и функции <CODE>ioctl</CODE>
неправильно работают без нее.  Обычно это
случается, если в старой системе не были установлены исправленные
заголовочные файлы. Поскольку свежие версии компилятора GNU C при
установке исправляют заголовочные файлы, это становится менее
распространенной проблемой.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_INSTALL</B>
<DD><A NAME="autoconf_ru_4_html_IDX111"></A>
<A NAME="autoconf_ru_4_html_IDX112"></A>
<A NAME="autoconf_ru_4_html_IDX113"></A>
<A NAME="autoconf_ru_4_html_IDX114"></A>
<A NAME="autoconf_ru_4_html_IDX115"></A>
<A NAME="autoconf_ru_4_html_IDX116"></A>
Устанавливает выходную переменную <CODE>INSTALL</CODE>, равной полному пути к
совместимой с BSD программе <CODE>install</CODE>, если она найдена в текущей
переменной <CODE>PATH</CODE>. Иначе, переменная <CODE>INSTALL</CODE> получает
значение <SAMP>`<VAR>dir</VAR>/install-sh -c'</SAMP>, проверяя каталоги, указанные в
<CODE>AC_CONFIG_AUX_DIR</CODE> (или каталоги по умолчанию) для определения
<VAR>dir</VAR> (see section <A HREF="#autoconf_ru_3_html_SEC10">Создание выходных файлов</A>). Этот макрос также устанавливает переменные
<CODE>INSTALL_PROGRAM</CODE> и <CODE>INSTALL_SCRIPT</CODE> равными значениям
<SAMP>`${INSTALL}'</SAMP>, а <CODE>INSTALL_DATA</CODE> значение <SAMP>`${INSTALL}
-m 644'</SAMP>.


<P>
Этот макрос не замечает версии <CODE>install</CODE> о которых известно, что
они не работают. Этот макрос также предпочитает использовать программу
на языке C вместо скриптов командного процессора. Вместо
<TT>`install-sh'</TT>, он также может использовать <TT>`install.sh'</TT>, но это
имя устарело, поскольку некоторые программы <CODE>make</CODE> имеют правило,
которое создает файл <TT>`install'</TT> из этого файла, если нет файла
<TT>`Makefile'</TT>.


<P>
Копия <TT>`install-sh'</TT>, которую вы можете использовать, поставляется с
Autoconf. Если вы используете <CODE>AC_PROG_INSTALL</CODE>, то вы должны
включить в свой дистрибутив либо <TT>`install-sh'</TT>, либо
<TT>`install.sh'</TT>, иначе <CODE>configure</CODE> выдаст ошибку, сообщающую о
том, что он не может найти эти файлы--- даже если система имеет
нормальную программу <CODE>install</CODE>.  Это мера безопасности, чтобы вы
случайно не забыли про этот файл, тем самым лишив пользователя
возможности установить ваш пакет в системе, в которой нет
BSD-совместимой
программы <CODE>install</CODE>.


<P>
Если вам необходимо использовать вашу собственную программу установки
(поскольку она имеет возможности, отсутствующие в стандартных программах
<CODE>install</CODE>), то нет никакой надобности в использовании макроса
<CODE>AC_PROG_INSTALL</CODE>; просто поместите путь к вашей программе в ваши
файлы <TT>`Makefile.in'</TT>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_LEX</B>
<DD><A NAME="autoconf_ru_4_html_IDX117"></A>
<A NAME="autoconf_ru_4_html_IDX118"></A>
<A NAME="autoconf_ru_4_html_IDX119"></A>
<A NAME="autoconf_ru_4_html_IDX120"></A>
Если найдена программа <CODE>flex</CODE>, то выходная переменная <CODE>LEX</CODE>
получает значение <SAMP>`flex'</SAMP>, а <CODE>LEXLIB</CODE> -- значение <SAMP>`-lfl'</SAMP>, в
случае, если библиотека располагается в стандартном месте.  Иначе
переменная <CODE>LEX</CODE> получает значение <SAMP>`lex'</SAMP>, а <CODE>LEXLIB</CODE> ---
значение <SAMP>`-ll'</SAMP>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_LN_S</B>
<DD><A NAME="autoconf_ru_4_html_IDX121"></A>
<A NAME="autoconf_ru_4_html_IDX122"></A>
<A NAME="autoconf_ru_4_html_IDX123"></A>
Если команда <SAMP>`ln -s'</SAMP> работает в текущей файловой системе (и
операционная, и файловая системы поддерживают символьные ссылки), то
выходная переменная <CODE>LN_S</CODE> получает значение <SAMP>`ln -s'</SAMP>, в
противном случае значение равно <SAMP>`ln'</SAMP>.


<P>
Если ссылка помещается в другой, отличный от текущего, каталог, то смысл 
этой ссылки зависит от того, какая команда будет использована: <SAMP>`ln'</SAMP> или
<SAMP>`ln -s'</SAMP>.  Чтобы безбоязненно создавать ссылки, используя
<SAMP>`$(LN_S)'</SAMP>, либо определите, какая форма команды используется и
соответственно измените ее аргументы, либо всегда запускайте <CODE>ln</CODE> в
том каталоге, где будет создаваться ссылка.


<P>
Другими словами, не делайте

<PRE>
$(LN_S) foo /x/bar
</PRE>

<P>
Вместо этого выполняйте



<PRE>
(cd /x &#38;&#38; $(LN_S) foo bar)
</PRE>

</DL>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_RANLIB</B>
<DD><A NAME="autoconf_ru_4_html_IDX124"></A>
<A NAME="autoconf_ru_4_html_IDX125"></A>
<A NAME="autoconf_ru_4_html_IDX126"></A>
Если команда <CODE>ranlib</CODE> найдена, то выходная переменная
<CODE>RANLIB</CODE> получает значение равное <SAMP>`ranlib'</SAMP>, в противном случае
используется значение <SAMP>`:'</SAMP> (не делать ничего).
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROG_YACC</B>
<DD><A NAME="autoconf_ru_4_html_IDX127"></A>
<A NAME="autoconf_ru_4_html_IDX128"></A>
<A NAME="autoconf_ru_4_html_IDX129"></A>
Если найдена программа <CODE>bison</CODE>, то выходная переменная <CODE>YACC</CODE>
получает значение <SAMP>`bison -y'</SAMP>. В противном случае, если найдена команда 
<CODE>byacc</CODE>, то переменная <CODE>YACC</CODE> получит значение <SAMP>`byacc'</SAMP>. В 
противном случае <CODE>YACC</CODE> устанавливается в <SAMP>`yacc'</SAMP>.
</DL>




<H3><A NAME="SEC24" HREF="#autoconf_ru_toc_html_TOC24">Общие программы и проверки файлов</A></H3>
<P>
@anchor{Generic Programs}


<P>
Эти макросы используются для обнаружения программ, для которых нет
отдельных макросов. Если вам необходимо проверить не только присутствие
программы, но и ее поведение, то вам необходимо написать свой
тест для данной программы (see section <A HREF="#autoconf_ru_5_html_SEC40">Написание тестов</A>).  По умолчанию эти
макросы используют переменную среды <CODE>PATH</CODE>. Если вам необходимо
проверить наличие программы, которая может находится в каталогах
пользовательской переменной <CODE>PATH</CODE>, то вы можете передать макросу
измененную переменную <CODE>PATH</CODE>, вот как в этом случае:



<PRE>
AC_PATH_PROG(INETD, inetd, /usr/libexec/inetd,
  $PATH:/usr/libexec:/usr/sbin:/usr/etc:etc)
</PRE>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_FILE</B> <I>(<VAR>file</VAR> [, <VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX130"></A>
<A NAME="autoconf_ru_4_html_IDX131"></A>
Выполняет проверку, существует ли в системе файл <VAR>file</VAR>. Если он
найден, то выполняются команды <VAR>action-if-found</VAR>, в противном случае
выполняется <VAR>action-if-not-found</VAR>, если задано.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_FILES</B> <I>(<VAR>files</VAR>[, <VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX132"></A>
<A NAME="autoconf_ru_4_html_IDX133"></A>
Выполняет макрос <CODE>AC_CHECK_FILE</CODE> для каждого из файлов в списке 
<VAR>files</VAR>. Дополнительно определяет переменную <SAMP>`HAVE<VAR>file</VAR>'</SAMP> 
для каждого из найденных файлов и устанавливает ее равной 1.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_PROG</B> <I>(<VAR>variable</VAR>, <VAR>prog-to-check-for</VAR>, <VAR>value-if-found</VAR> [, <VAR>value-if-not-found</VAR> [, <VAR>path</VAR>, [ <VAR>reject</VAR> ]]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX134"></A>
<A NAME="autoconf_ru_4_html_IDX135"></A>
Проверяет, находится ли программа <VAR>prog-to-check-for</VAR> в каталогах,
перечисленных в переменной <CODE>PATH</CODE>. Если эта программа найдена, то
переменная <VAR>variable</VAR> устанавливается равным значению
<VAR>value-if-found</VAR>, в противном случае равным значению
<VAR>value-if-not-found</VAR> (если оно задано).  Никогда не использует
<VAR>reject</VAR> (имя файла с абсолютным путем), даже если такая программа была
найдена в путях поиска; в этом случае переменная <VAR>variable</VAR>
устанавливается, используя абсолютное имя найденной программы
<VAR>prog-to-check-for</VAR>, которая не является <VAR>reject</VAR>. Если
переменная <VAR>variable</VAR> уже установлена, то ничего не делается.
Вызывает макрос <CODE>AC_SUBST</CODE> для <VAR>variable</VAR>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_PROGS</B> <I>(<VAR>variable</VAR>, <VAR>progs-to-check-for</VAR> [, <VAR>value-if-not-found</VAR> [, <VAR>path</VAR>]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX136"></A>
<A NAME="autoconf_ru_4_html_IDX137"></A>
Проверяет наличие в <CODE>PATH</CODE> каждой программы из списка через пробел
<VAR>progs-to-check-for</VAR>.  Если программа найдена, то
переменная <VAR>variable</VAR> устанавливается в значение, равное имени
найденной программы. В противном случае продолжается проверка наличия
следующей программы. Если ни одна из программ не найдена, то переменная
<VAR>variable</VAR> получает значение <VAR>value-if-not-found</VAR>; если
<VAR>value-if-not-found</VAR> не указано, то значение <VAR>variable</VAR> не
изменяется. Вызывает макрос <CODE>AC_SUBST</CODE> для <VAR>variable</VAR>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_TOOL</B> <I>(<VAR>variable</VAR>, <VAR>prog-to-check-for</VAR> [, <VAR>value-if-not-found</VAR> [, <VAR>path</VAR>]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX138"></A>
<A NAME="autoconf_ru_4_html_IDX139"></A>
Работает подобно <CODE>AC_CHECK_PROG</CODE>, но сначала проверяет наличие 
<VAR>prog-to-check-for</VAR> с префиксом типа системы, который определяется
макросом <CODE>AC_CANONICAL_HOST</CODE>, за которым следует тире
(see section <A HREF="#autoconf_ru_8_html_SEC69">Получение канонического типа системы</A>). Например, если пользователь запустит 
<SAMP>`configure --host=i386-gnu'</SAMP>, то этот вызов:

<PRE>
AC_CHECK_TOOL(RANLIB, ranlib, :)
</PRE>

<P>
установит переменную <CODE>RANLIB</CODE> в значение <TT>`i386-gnu-ranlib'</TT>,
если эта программа находится в каталогах, перечисленных в <CODE>PATH</CODE>,
или в <SAMP>`ranlib'</SAMP>, если эта программа находится в <CODE>PATH</CODE>, или в
<SAMP>`:'</SAMP>, если ни одна из программ не существует.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PATH_PROG</B> <I>(<VAR>variable</VAR>, <VAR>prog-to-check-for</VAR> [, <VAR>value-if-not-found</VAR> [, <VAR>path</VAR>]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX140"></A>
<A NAME="autoconf_ru_4_html_IDX141"></A>
Работает подобно <CODE>AC_CHECK_PROG</CODE>, но устанавливает <VAR>variable</VAR>
равной полному пути к найденной программе <VAR>prog-to-check-for</VAR>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PATH_PROGS</B> <I>(<VAR>variable</VAR>, <VAR>progs-to-check-for</VAR> [, <VAR>value-if-not-found</VAR> [, <VAR>path</VAR>]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX142"></A>
<A NAME="autoconf_ru_4_html_IDX143"></A>
Подобен макросу <CODE>AC_CHECK_PROGS</CODE>, но если найдена любая из программ
<VAR>progs-to-check-for</VAR>, то переменная <VAR>variable</VAR> получает значение,
равное полному пути к найденной программе.
</DL>




<H2><A NAME="SEC25" HREF="#autoconf_ru_toc_html_TOC25">Файлы библиотек</A></H2>
<P>
@anchor{Libraries}


<P>
Нижеописанные макросы проверяют наличие определенных библиотек C,
C++ или Fortran 77.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_LIB</B> <I>(<VAR>library</VAR>, <VAR>function</VAR> [, <VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR> [, <VAR>other-libraries</VAR>]]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX144"></A>
<A NAME="autoconf_ru_4_html_IDX145"></A>
В зависимости от текущего языка (see section <A HREF="#autoconf_ru_5_html_SEC51">Выбор языка</A>), макрос пытается
убедиться, что функция C, C++ или Fortran 77 с именем <VAR>function</VAR>
доступна (путем проверки, что тестовая программа компонуется с
библиотекой <VAR>library</VAR> для получения доступа к функции).
<VAR>library</VAR> является базовым именем библиотеки; например, для
<SAMP>`-lmp'</SAMP>, используйте <SAMP>`mp'</SAMP> в качестве аргумента <VAR>library</VAR>.


<P>
<VAR>action-if-found</VAR> является списком команд командного процессора,
которые запускаются в случае, если процесс компоновки прошел удачно;
<VAR>action-if-not-found</VAR> является списком команд, которые запускаются,
если процесс компоновки потерпел неудачу.  Если аргумент <VAR>action-if-found</VAR>
не указан, то действие по умолчанию добавит <SAMP>`-l<VAR>library</VAR>'</SAMP> в
переменную <CODE>LIBS</CODE> и определит переменную
<SAMP>`HAVE_LIB<VAR>library</VAR>'</SAMP> (все буквы заглавные).


<P>
Если при компоновке с <VAR>library</VAR> выдаются сообщения о ненайденных
символах, которые могут быть найдены, компонуя программы с
дополнительными библиотеками, то вы должны передать список этих
библиотек через пробелы в аргументе <VAR>other-libraries</VAR>: <SAMP>`-lXt
-lX11'</SAMP>. В противном случае этот макрос
не сможет определить, что библиотека <VAR>library</VAR> присутствует,
поскольку компоновка тестовой программы всегда будет аварийно
завершаться с сообщениями о ненайденных символах.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_HAVE_LIBRARY</B> <I>(<VAR>library</VAR>, [, <VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR> [, <VAR>other-libraries</VAR>]]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX146"></A>
<A NAME="autoconf_ru_4_html_IDX147"></A>
Этот макрос аналогичен вызову <CODE>AC_CHECK_LIB</CODE> с аргументом
<VAR>function</VAR>, равным <CODE>main</CODE>.  Вдобавок, <VAR>library</VAR>
может быть указана как <SAMP>`foo'</SAMP>, <SAMP>`-lfoo'</SAMP> или <SAMP>`libfoo.a'</SAMP>. Во
всех этих случаях компилятору передается строка <SAMP>`-lfoo'</SAMP>. Однако
<VAR>library</VAR> не может быть переменной командного процессора; ее
значение должно быть символьным именем. Этот макрос считается
устаревшим.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_SEARCH_LIBS</B> <I>(<VAR>function</VAR>, <VAR>search-libs</VAR> [, <VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR> [, <VAR>other-libraries</VAR>]]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX148"></A>
<A NAME="autoconf_ru_4_html_IDX149"></A>
Производит поиск библиотеки, определяющей функцию <VAR>function</VAR>, если
она еще не доступна. Это подобно вызову макроса
<CODE>AC_TRY_LINK_FUNC</CODE> сначала без указания библиотек, а затем для каждой из
библиотек, перечисленных в списке <VAR>search-libs</VAR>.


<P>
Если функция найдена, то выполняются команды <VAR>action-if-found</VAR>, в
противном случае выполняются <VAR>action-if-not-found</VAR>.


<P>
Если при компоновке с <VAR>library</VAR> выдаются сообщения о ненайденных
символах, которые могут быть найдены, компонуя программы с
дополнительными библиотеками, то вы должны передать список этих
библиотек через пробел, используя аргумент <VAR>other-libraries</VAR>:
<SAMP>`-lXt -lX11'</SAMP>. В противном случае этот макрос
не сможет определить, что библиотека <VAR>library</VAR> присутствует,
поскольку компоновка тестовой программы всегда будет аварийно
завершаться с сообщениями о ненайденных символах.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_SEARCH_LIBS</B> <I>(<VAR>function</VAR>, <VAR>search-libs</VAR>[, <VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX150"></A>
<A NAME="autoconf_ru_4_html_IDX151"></A>
Этот макрос эквивалентен вызову <CODE>AC_TRY_LINK_FUNC</CODE> для каждой из
библиотек, перечисленных в списке <VAR>search-libs</VAR>. Макрос добавляет
<SAMP>`-l<VAR>library</VAR>'</SAMP> к содержимому переменной <CODE>LIBS</CODE> для первой
библиотеки, которая содержит <VAR>function</VAR> и выполняет
<VAR>action-if-found</VAR>. В противном случае выполняется
<VAR>action-if-not-found</VAR>.
</DL>




<H2><A NAME="SEC26" HREF="#autoconf_ru_toc_html_TOC26">Библиотечные функции</A></H2>
<P>
@anchor{Library Functions}


<P>
Следующие макросы проверяют отдельные функции библиотеки C.  Если для
функции, которая вам нужна, нет отдельного макроса, и вам не нужно
проверять специальные возможности этой функции, то можно использовать
один из общих макросов проверки функций.




<H3><A NAME="SEC27" HREF="#autoconf_ru_toc_html_TOC27">Проверка отдельных функций</A></H3>
<P>
@anchor{Particular Functions}


<P>
Эти макросы выполняют проверку отдельных функций: существуют ли
они и, в отдельных случаях, как они работают при задании
определенных аргументов.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_ALLOCA</B>
<DD><A NAME="autoconf_ru_4_html_IDX152"></A>
<A NAME="autoconf_ru_4_html_IDX153"></A>
<A NAME="autoconf_ru_4_html_IDX154"></A>
<A NAME="autoconf_ru_4_html_IDX155"></A>
<A NAME="autoconf_ru_4_html_IDX156"></A>
Проверяет, как получить <CODE>alloca</CODE>.  Макрос пробует получить
встроенную версию, проверяя наличие файла <TT>`alloca.h'</TT> или
предопределенных макросов препроцессора C <CODE>__GNUC__</CODE> и
<CODE>_AIX</CODE>. Если этот макрос находит <TT>`alloca.h'</TT>, то определяется
переменная <CODE>HAVE_ALLOCA_H</CODE>.


<P>
Если эти попытки оканчиваются неудачей, то макрос будет искать функцию в
стандартной библиотеке C. Если любой из этих методов закончится успешно,
то будет определена переменная <CODE>HAVE_ALLOCA</CODE>. В противном случае
выходная переменная <CODE>ALLOCA</CODE> получит значение <SAMP>`alloca.o'</SAMP> и
будет определена переменная <CODE>C_ALLOCA</CODE> (так что программы смогут
периодически вызывать <SAMP>`alloca(0)'</SAMP> для сборки мусора). Эта
переменная отделена от <CODE>LIBOBJS</CODE>, так что несколько программ смогут 
использовать одно и то же значение <CODE>ALLOCA</CODE>, без необходимости создания настоящей
библиотеки, если лишь некоторые из них используют код в
<CODE>LIBOBJS</CODE>.


<P>
Эти макросы не пытаются получить <CODE>alloca</CODE> из библиотеки System V
R3 <TT>`libPW'</TT> или из библиотеки System V R4 <TT>`libucb'</TT>, поскольку
эти библиотеки содержат некоторые несовместимые функции, что может в
дальнейшем вызвать проблемы. Некоторые версии библиотек даже не содержат
<CODE>alloca</CODE> или содержат версию с ошибками. Если вы все таки хотите
использовать <CODE>alloca</CODE> из этих библиотек, то вместо компиляции файла
<TT>`alloca.c'</TT> используйте <CODE>ar</CODE> для извлечения из них
<TT>`alloca.o'</TT>.


<P>
Для правильного объявления этой функции исходные тексты, использующие
<CODE>alloca</CODE>, должны начинаться примерно с нижеизложенного кода.  В некоторых
версиях AIX, объявление <CODE>alloca</CODE> должно предшествовать всему, за
исключением комментариев и директив препроцессора.  Директива
<CODE>#pragma</CODE> специальным образом выровнена (перед ней стоит несколько
пробелов), чтобы старые не-ANSI компиляторы C игнорировали ее, а не
выдавали ошибку.



<PRE>
/* AIX требует, чтобы это было первым кодом в файле.  */
#ifndef __GNUC__
# if HAVE_ALLOCA_H
#  include &#60;alloca.h&#62;
# else
#  ifdef _AIX
 #pragma alloca
#  else
#   ifndef alloca /* предопределено в cc +Olibcalls фирмы HP */
char *alloca ();
#   endif
#  endif
# endif
#endif
</PRE>

</DL>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_CLOSEDIR_VOID</B>
<DD><A NAME="autoconf_ru_4_html_IDX157"></A>
<A NAME="autoconf_ru_4_html_IDX158"></A>
<A NAME="autoconf_ru_4_html_IDX159"></A>
Если значение, возвращаемое функцией <CODE>closedir</CODE>, не несет полезной
информации, то определяется <CODE>CLOSEDIR_VOID</CODE>. В противном случае
тот, кто вызывает эту функцию, может проверить возвращаемое значение на
наличие ошибки.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_FNMATCH</B>
<DD><A NAME="autoconf_ru_4_html_IDX160"></A>
<A NAME="autoconf_ru_4_html_IDX161"></A>
<A NAME="autoconf_ru_4_html_IDX162"></A>
Если функция <CODE>fnmatch</CODE> доступна и работает (в отличие от имеющейся
в SunOS 5.4), то определяется переменная <CODE>HAVE_FNMATCH</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_GETLOADAVG</B>
<DD><A NAME="autoconf_ru_4_html_IDX163"></A>
<A NAME="autoconf_ru_4_html_IDX164"></A>
<A NAME="autoconf_ru_4_html_IDX165"></A>
<A NAME="autoconf_ru_4_html_IDX166"></A>
<A NAME="autoconf_ru_4_html_IDX167"></A>
<A NAME="autoconf_ru_4_html_IDX168"></A>
<A NAME="autoconf_ru_4_html_IDX169"></A>
<A NAME="autoconf_ru_4_html_IDX170"></A>
<A NAME="autoconf_ru_4_html_IDX171"></A>
<A NAME="autoconf_ru_4_html_IDX172"></A>
<A NAME="autoconf_ru_4_html_IDX173"></A>
<A NAME="autoconf_ru_4_html_IDX174"></A>
<A NAME="autoconf_ru_4_html_IDX175"></A>
Проверка того, как получить данные о загрузке системы. Если система
имеет функцию <CODE>getloadavg</CODE>, то этот макрос определяет переменную
<CODE>HAVE_GETLOADAVG</CODE>, и добавляет к <CODE>LIBS</CODE> библиотеки,
необходимые для получения этой функции.


<P>
В противном случае макрос добавляет <SAMP>`getloadavg.o'</SAMP> к выходной
переменной <CODE>LIBOBJS</CODE> и, возможно, определяет другие макросы
препроцессора C и выходные переменные:



<OL>
<LI>

Он определяет <CODE>SVR4</CODE>, <CODE>DGUX</CODE>, <CODE>UMAX</CODE> или <CODE>UMAX4_3</CODE>
на соответствующих системах.

<LI>

Если он находит <TT>`nlist.h'</TT>, то он определяет переменную
<CODE>NLIST_STRUCT</CODE>.

<LI>

Если <SAMP>`struct nlist'</SAMP> имеет поле <SAMP>`n_un'</SAMP>, то определяется
переменная <CODE>NLIST_NAME_UNION</CODE>.

<LI>

Если компиляция <TT>`getloadavg.c'</TT> определяет <CODE>LDAV_PRIVILEGED</CODE>,
то программы необходимо специальным образом устанавливать на эту систему, чтобы
<CODE>getloadavg</CODE> работала, и этот макрос определяет
<CODE>GETLOADAVG_PRIVILEGED</CODE>.

<LI>

Этот макрос устанавливает выходную переменную <CODE>NEED_SETGID</CODE>. Ее значением
является <SAMP>`true'</SAMP>, если требуется специальная установка, и <SAMP>`false'</SAMP> 
в противном случае. Если <CODE>NEED_SETGID</CODE> равен <SAMP>`true'</SAMP>, то этот 
макрос устанавливает <CODE>KMEM_GROUP</CODE> в значение, равное названию группы,
которая должна владеть установленной программой.
</OL>

</DL>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_GETMNTENT</B>
<DD><A NAME="autoconf_ru_4_html_IDX176"></A>
<A NAME="autoconf_ru_4_html_IDX177"></A>
<A NAME="autoconf_ru_4_html_IDX178"></A>
Проверяет наличие <CODE>getmntent</CODE> в библиотеках <TT>`sun'</TT>, <TT>`seq'</TT>
и <TT>`gen'</TT> для Irix 4, PTX и Unixware, соответственно.  Затем, если
функция <CODE>getmntent</CODE> доступна, определяется переменная
<CODE>HAVE_GETMNTENT</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_GETPGRP</B>
<DD><A NAME="autoconf_ru_4_html_IDX179"></A>
<A NAME="autoconf_ru_4_html_IDX180"></A>
<A NAME="autoconf_ru_4_html_IDX181"></A>
Если <CODE>getpgrp</CODE> запускается без аргументов (версия POSIX.1), то
определяется <CODE>GETPGRP_VOID</CODE>.  В противном случае функция является
BSD-версией, которая принимает в качестве аргумента идентификатор процесса.
Этот макрос не выполняет проверку наличия <CODE>getpgrp</CODE>; если вам
необходимо работать в такой ситуации, то сначала вызовите
<CODE>AC_CHECK_FUNC</CODE> для <CODE>getpgrp</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_MEMCMP</B>
<DD><A NAME="autoconf_ru_4_html_IDX182"></A>
<A NAME="autoconf_ru_4_html_IDX183"></A>
<A NAME="autoconf_ru_4_html_IDX184"></A>
Если функция <CODE>memcmp</CODE> недоступна, или не работает с восьмибитными
данными (как функция в SunOS 4.1.3), то <SAMP>`memcmp.o'</SAMP> добавляется к
выходной переменной <CODE>LIBOBJS</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_MMAP</B>
<DD><A NAME="autoconf_ru_4_html_IDX185"></A>
<A NAME="autoconf_ru_4_html_IDX186"></A>
<A NAME="autoconf_ru_4_html_IDX187"></A>
Если функция <CODE>mmap</CODE> существует и работает правильно, то
определяется переменная <CODE>HAVE_MMAP</CODE>. Проверяется только
фиксированное приватное отображение уже отображенной памяти.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_SELECT_ARGTYPES</B>
<DD><A NAME="autoconf_ru_4_html_IDX188"></A>
<A NAME="autoconf_ru_4_html_IDX189"></A>
<A NAME="autoconf_ru_4_html_IDX190"></A>
<A NAME="autoconf_ru_4_html_IDX191"></A>
<A NAME="autoconf_ru_4_html_IDX192"></A>
Определяет правильный тип, передаваемый каждому из аргументов функции
<CODE>select</CODE>, и определяет эти типы в переменных
<CODE>SELECT_TYPE_ARG1</CODE>, <CODE>SELECT_TYPE_ARG234</CODE> и
<CODE>SELECT_TYPE_ARG5</CODE>. Значением по умолчанию для
<CODE>SELECT_TYPE_ARG1</CODE> является <SAMP>`int'</SAMP>, для
<CODE>SELECT_TYPE_ARG234</CODE> типом по умолчанию является <SAMP>`int *'</SAMP> и для
<CODE>SELECT_TYPE_ARG5</CODE> типом по умолчанию является <SAMP>`struct timeval
*'</SAMP>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_SETPGRP</B>
<DD><A NAME="autoconf_ru_4_html_IDX193"></A>
<A NAME="autoconf_ru_4_html_IDX194"></A>
<A NAME="autoconf_ru_4_html_IDX195"></A>
Если <CODE>setpgrp</CODE> запускается без аргументов (версия POSIX.1), то
определяется <CODE>SETPGRP_VOID</CODE>. В противном случае, функция является
BSD-версией, которая принимает в качестве аргумента идентификатор процесса.
Этот макрос не выполняет проверку наличия <CODE>setpgrp</CODE>; если вам
необходимо работать в такой ситуации, то сначала вызовите
<CODE>AC_CHECK_FUNC</CODE> для <CODE>setpgrp</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_SETVBUF_REVERSED</B>
<DD><A NAME="autoconf_ru_4_html_IDX196"></A>
<A NAME="autoconf_ru_4_html_IDX197"></A>
<A NAME="autoconf_ru_4_html_IDX198"></A>
Если <CODE>setvbuf</CODE> принимает тип буферизации как второй аргумент, а
указатель на буфер как третий аргумент, а не наоборот, то
определяется переменная <CODE>SETVBUF_REVERSED</CODE>. Это справедливо для
System V до выпуска 3.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_STRCOLL</B>
<DD><A NAME="autoconf_ru_4_html_IDX199"></A>
<A NAME="autoconf_ru_4_html_IDX200"></A>
<A NAME="autoconf_ru_4_html_IDX201"></A>
Если функция <CODE>strcoll</CODE> существует и работает правильно, то
определяется переменная <CODE>HAVE_STRCOLL</CODE>. Этот макрос выполняет
больше проверок, чем просто вызов <SAMP>`AC_CHECK_FUNCS(strcoll)'</SAMP>,
потому что некоторые системы имеют неправильные определения
<CODE>strcoll</CODE>, которыми не следует пользоваться.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_STRFTIME</B>
<DD><A NAME="autoconf_ru_4_html_IDX202"></A>
<A NAME="autoconf_ru_4_html_IDX203"></A>
<A NAME="autoconf_ru_4_html_IDX204"></A>
Проверка наличия <CODE>strftime</CODE> в библиотеке <TT>`intl'</TT>, для SCO UNIX.
Затем, если <CODE>strftime</CODE> доступна, определяется переменная
<CODE>HAVE_STRFTIME</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_UTIME_NULL</B>
<DD><A NAME="autoconf_ru_4_html_IDX205"></A>
<A NAME="autoconf_ru_4_html_IDX206"></A>
<A NAME="autoconf_ru_4_html_IDX207"></A>
Если вызов <SAMP>`utime(<VAR>file</VAR>, NULL)'</SAMP> устанавливает время
модификации файла <VAR>file</VAR> в текущее время, то определить переменную
<CODE>HAVE_UTIME_NULL</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_VFORK</B>
<DD><A NAME="autoconf_ru_4_html_IDX208"></A>
<A NAME="autoconf_ru_4_html_IDX209"></A>
<A NAME="autoconf_ru_4_html_IDX210"></A>
<A NAME="autoconf_ru_4_html_IDX211"></A>
Если найден файл <TT>`vfork.h'</TT>, то определяется переменная
<CODE>HAVE_VFORK_H</CODE>. Если работающая версия <CODE>vfork</CODE> не найдена, то
определить <CODE>vfork</CODE> как <CODE>fork</CODE>. Этот макрос проверяет несколько
известных ошибок в реализации <CODE>vfork</CODE> и если найдена одна из таких
реализаций, то считается, что система не имеет работающей версии
<CODE>vfork</CODE>. Макрос не считает, ошибкой реализации, если
при вызове потомком функции <CODE>signal</CODE> изменяются обработчики
сигналов родителя, поскольку потомки редко изменяют обработчики
сигналов родительского процесса.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_VPRINTF</B>
<DD><A NAME="autoconf_ru_4_html_IDX212"></A>
<A NAME="autoconf_ru_4_html_IDX213"></A>
<A NAME="autoconf_ru_4_html_IDX214"></A>
<A NAME="autoconf_ru_4_html_IDX215"></A>
Если найдена функция <CODE>vprintf</CODE>, то определяется переменная
<CODE>HAVE_VPRINTF</CODE>. В противном случае, если найдена функция
<CODE>_doprnt</CODE>, то определяется переменная <CODE>HAVE_DOPRNT</CODE>. (Если
функция <CODE>vprintf</CODE> доступна, то вы можете считать, что
функции <CODE>vfprintf</CODE> и <CODE>vsprintf</CODE> тоже доступны).
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_FUNC_WAIT3</B>
<DD><A NAME="autoconf_ru_4_html_IDX216"></A>
<A NAME="autoconf_ru_4_html_IDX217"></A>
<A NAME="autoconf_ru_4_html_IDX218"></A>
Если функция <CODE>wait3</CODE> найдена, и заполняет содержимое своего
третьего аргумента (<SAMP>`struct rusage *'</SAMP>), чего не делает HP-UX, то
определяется переменная <CODE>HAVE_WAIT3</CODE>.
</DL>




<H3><A NAME="SEC28" HREF="#autoconf_ru_toc_html_TOC28">Проверка базовых функций</A></H3>
<P>
@anchor{Generic Functions}
 
Эти макросы используются для нахождения функций, которые не имеют
специальных макросов проверки. Если функции могут находиться в других
библиотеках, а не в стандартной библиотеке C, то сначала вызовите макрос
<CODE>AC_CHECK_LIB</CODE> для проверки наличия нужных библиотек. Если вам
нужно не только проверить, существует ли функция, но и уточнить ее
поведение, то вам придется написать свой собственный тест для этой
функции (see section <A HREF="#autoconf_ru_5_html_SEC40">Написание тестов</A>).


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_FUNC</B> <I>(<VAR>function</VAR>, [<VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX219"></A>
<A NAME="autoconf_ru_4_html_IDX220"></A>
Если функция C с именем <VAR>function</VAR> доступна, то запускаются команды
командного процессора <VAR>action-if-found</VAR>, в противном случае
запускаются <VAR>action-if-not-found</VAR>. Если вы просто хотите определить
символ препроцессора, если функция существует, то вместо этого макроса попробуйте
использовать <CODE>AC_CHECK_FUNCS</CODE>. Этот макрос проверяет 
компоновку с библиотекой C, даже если был вызван макрос
<CODE>AC_LANG_CPLUSPLUS</CODE>, поскольку C++ является более
стандартизованным, чем C. (see section <A HREF="#autoconf_ru_5_html_SEC51">Выбор языка</A>, для дополнительной
информации о выборе языка, для которого проводятся проверки).
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_FUNCS</B> <I>(<VAR>function</VAR>... [, <VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX221"></A>
<A NAME="autoconf_ru_4_html_IDX222"></A>
<A NAME="autoconf_ru_4_html_IDX223"></A>
Для каждой из заданных <VAR>function</VAR> в списке, разделенном пробелами, в
случае если она доступна, определить переменную
<CODE>HAVE_<VAR>function</VAR></CODE> (все буквы заглавные). Если задан аргумент
<VAR>action-if-found</VAR>, то выполняется дополнительный код командного
процессора, если одна из функций найдена. Вы можете задать значение
<SAMP>`break'</SAMP> для прекращения цикла при нахождении первой функции. Если
задан аргумент <VAR>action-if-not-found</VAR>, то эти команды выполняются,
когда одна из функций не найдена.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_REPLACE_FUNCS</B> <I>(<VAR>function</VAR>...)</I>
<DD><A NAME="autoconf_ru_4_html_IDX224"></A>
<A NAME="autoconf_ru_4_html_IDX225"></A>
<A NAME="autoconf_ru_4_html_IDX226"></A>
Этот макрос подобен вызову макроса <CODE>AC_CHECK_FUNCS</CODE>, используя код
<VAR>action-if-not-found</VAR>, который добавляет <SAMP>`<VAR>function</VAR>.o'</SAMP> к
выходной переменной <CODE>LIBOBJS</CODE>. Вы можете объявить функцию, для
которой будет использована ваша замена, поместив ее прототип
между директивами <SAMP>`#ifndef HAVE_<VAR>function</VAR>'</SAMP>. Если система имеет
нужную функцию, то эта функция, вероятно, будет объявлена в заголовочном
файле, который вы должны включить в свою программу, так что вы не должны 
повторно объявлять ее, во избежание конфликта объявлений.
</DL>




<H2><A NAME="SEC29" HREF="#autoconf_ru_toc_html_TOC29">Заголовочные файлы</A></H2>
<P>
@anchor{Header Files}


<P>
Следующие макросы проверяют наличие определенных заголовочных
файлов языка C.   Если для нужного вам заголовочного файла нет
специального макроса, и при этом вам не нужно проверять специальные
особенности этого файла, то можно использовать один из стандартных
макросов проверки заголовочных файлов.




<H3><A NAME="SEC30" HREF="#autoconf_ru_toc_html_TOC30">Проверка отдельных заголовочных файлов</A></H3>
<P>
@anchor{Particular Headers}


<P>
Эти макросы выполняют проверку отдельных заголовочных файлов---
существуют ли они и, в некоторых случаях, объявлены ли в них какие-либо
символы.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_DECL_SYS_SIGLIST</B>
<DD><A NAME="autoconf_ru_4_html_IDX227"></A>
<A NAME="autoconf_ru_4_html_IDX228"></A>
<A NAME="autoconf_ru_4_html_IDX229"></A>
Определяет переменную <CODE>SYS_SIGLIST_DECLARED</CODE>, если переменная
<CODE>sys_siglist</CODE> объявлена в системном заголовочном файле--- либо
в <TT>`signal.h'</TT>, либо в <TT>`unistd.h'</TT>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_DIR_HEADER</B>
<DD><A NAME="autoconf_ru_4_html_IDX230"></A>
<A NAME="autoconf_ru_4_html_IDX231"></A>
<A NAME="autoconf_ru_4_html_IDX232"></A>
<A NAME="autoconf_ru_4_html_IDX233"></A>
<A NAME="autoconf_ru_4_html_IDX234"></A>
<A NAME="autoconf_ru_4_html_IDX235"></A>
<A NAME="autoconf_ru_4_html_IDX236"></A>
Подобен вызову макросов <CODE>AC_HEADER_DIRENT</CODE> и
<CODE>AC_FUNC_CLOSEDIR_VOID</CODE>, но определяет немного другой набор макросов
препроцессора C, для указания того, какой заголовочный файл найден. Этот
макрос и имена, которые он определяет, считаются устаревшими.  Макрос
определяет следующие имена:


<DL COMPACT>

<DT><TT>`dirent.h'</TT>
<DD>
<CODE>DIRENT</CODE>
<DT><TT>`sys/ndir.h'</TT>
<DD>
<CODE>SYSNDIR</CODE>
<DT><TT>`sys/dir.h'</TT>
<DD>
<CODE>SYSDIR</CODE>
<DT><TT>`ndir.h'</TT>
<DD>
<CODE>NDIR</CODE>
</DL>

<P>
Вдобавок, если функция <CODE>closedir</CODE> не возвращает информативного
значения, то определяется переменная <CODE>VOID_CLOSEDIR</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_HEADER_DIRENT</B>
<DD><A NAME="autoconf_ru_4_html_IDX237"></A>
<A NAME="autoconf_ru_4_html_IDX238"></A>
<A NAME="autoconf_ru_4_html_IDX239"></A>
<A NAME="autoconf_ru_4_html_IDX240"></A>
<A NAME="autoconf_ru_4_html_IDX241"></A>
<A NAME="autoconf_ru_4_html_IDX242"></A>


<P>
Проверка следующих заголовочных файлов, и для первого файла, который
найден и определяет <SAMP>`DIR'</SAMP>, определить нижеследующие макросы
препроцессора C:


<DL COMPACT>

<DT><TT>`dirent.h'</TT>
<DD>
<CODE>HAVE_DIRENT_H</CODE>
<DT><TT>`sys/ndir.h'</TT>
<DD>
<CODE>HAVE_SYS_NDIR_H</CODE>
<DT><TT>`sys/dir.h'</TT>
<DD>
<CODE>HAVE_SYS_DIR_H</CODE>
<DT><TT>`ndir.h'</TT>
<DD>
<CODE>HAVE_NDIR_H</CODE>
</DL>

<P>
В исходном тексте объявления библиотеки каталогов должны выглядеть
примерно так:



<PRE>
#if HAVE_DIRENT_H
# include &#60;dirent.h&#62;
# define NAMLEN(dirent) strlen((dirent)-&#62;d_name)
#else
# define dirent direct
# define NAMLEN(dirent) (dirent)-&#62;d_namlen
# if HAVE_SYS_NDIR_H
#  include &#60;sys/ndir.h&#62;
# endif
# if HAVE_SYS_DIR_H
#  include &#60;sys/dir.h&#62;
# endif
# if HAVE_NDIR_H
#  include &#60;ndir.h&#62;
# endif
#endif
</PRE>

<P>
Используя нижеследующие объявления, программа должна объявить переменные с
типом <CODE>struct dirent</CODE>, а не <CODE>struct direct</CODE>, а доступ к полю
длины имени каталога она должна получать путем передачи указателя на
<CODE>struct dirent</CODE> макросу <CODE>NAMLEN</CODE>.


<P>
Этот макрос также проверяет наличие библиотек <TT>`dir'</TT> и <TT>`x'</TT> в
SCO Xenix.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_HEADER_MAJOR</B>
<DD><A NAME="autoconf_ru_4_html_IDX243"></A>
<A NAME="autoconf_ru_4_html_IDX244"></A>
<A NAME="autoconf_ru_4_html_IDX245"></A>
<A NAME="autoconf_ru_4_html_IDX246"></A>
Если <TT>`sys/types.h'</TT> не определяет <CODE>major</CODE>, <CODE>minor</CODE> и
<CODE>makedev</CODE>, но это делается в <TT>`sys/mkdev.h'</TT>, то определяется
переменная <CODE>MAJOR_IN_MKDEV</CODE>; в противном случае, если эти функции
определяются в <TT>`sys/sysmacros.h'</TT>, то определяется переменная
<CODE>MAJOR_IN_SYSMACROS</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_HEADER_STDC</B>
<DD><A NAME="autoconf_ru_4_html_IDX247"></A>
<A NAME="autoconf_ru_4_html_IDX248"></A>
<A NAME="autoconf_ru_4_html_IDX249"></A>
Определяет <CODE>STDC_HEADERS</CODE>, если система имеет заголовочные файлы
ANSI C.  Это макрос проверяет наличие <TT>`stdlib.h'</TT>, <TT>`stdarg.h'</TT>,
<TT>`string.h'</TT> и <TT>`float.h'</TT>; если система имеет эти файлы, то,
скорее всего, имеются и остальные заголовочные файлы ANSI C. Этот макрос
также проверяет, что <TT>`string.h'</TT> объявляет <CODE>memchr</CODE> (и поэтому, 
скорее всего, еще и другие функции <CODE>mem</CODE>), объявляется ли в
<TT>`stdlib.h'</TT> функция <CODE>free</CODE> (и, по видимому, <CODE>malloc</CODE> и
другие относящиеся к ним функции), и будут ли макросы из <TT>`ctype.h'</TT>
работать с символами с установленным старшим битом, как этого требует
ANSI C.


<P>
Используйте <CODE>STDC_HEADERS</CODE> вместо of <CODE>__STDC__</CODE> для
определения, имеются ли в системе совместимые с ANSI заголовочные файлы
(и, вероятно, функции библиотеки C), поскольку многие системы, имеющие GCC,
не имеют заголовочные файлы ANSI C.


<P>
На системах без заголовочных файлов ANSI C существует так много
вариантов, что, вероятно, легче объявить используемые вами функции, чем
точно определять, какой из заголовочные файлов определяет эти
функции. Некоторые системы содержат смесь функций ANSI и BSD; некоторые
из них по большей части совместимы с ANSI, но не имеют
<SAMP>`memmove'</SAMP>; некоторое определяют функции BSD как макросы в файлах
<TT>`string.h'</TT> или <TT>`strings.h'</TT>; некоторые из них имеют только
функции BSD, но с <TT>`string.h'</TT>; некоторые объявляют функции работы с
памятью в <TT>`memory.h'</TT>, некоторые в <TT>`string.h'</TT>; и т. п.
Скорее всего,
достаточно проверить наличие одной функции работы со строками и одной
функции работы с памятью; если библиотека имеет ANSI-версии этих
функций, то, скорее всего, она имеет и большинство других функций. Вы
должны поместить следующий код в <TT>`configure.in'</TT>:



<PRE>
AC_HEADER_STDC
AC_CHECK_FUNCS(strchr memcpy)
</PRE>

<P>
а затем, в вашем коде вы можете поместить следующие строки:



<PRE>
#if STDC_HEADERS
# include &#60;string.h&#62;
#else
# ifndef HAVE_STRCHR
#  define strchr index
#  define strrchr rindex
# endif
char *strchr (), *strrchr ();
# ifndef HAVE_MEMCPY
#  define memcpy(d, s, n) bcopy ((s), (d), (n))
#  define memmove(d, s, n) bcopy ((s), (d), (n))
# endif
#endif
</PRE>

<P>
Если вы используете функции, которые не имеют эквивалентов в BSD, такие
как <CODE>memchr</CODE>, <CODE>memset</CODE> <CODE>strtok</CODE> или <CODE>strspn</CODE>, то
просто макросов будет недостаточно; вы должны предоставить реализацию
каждой из функций.  Простой способ подключить ваши реализации только
если они действительно нужны (потому что функции из системной библиотеки 
могут быть вручную оптимизированы) --- это, например, поместить
функцию <CODE>memchr</CODE> в файл <TT>`memchr.c'</TT>, и использовать макрос
<SAMP>`AC_REPLACE_FUNCS(memchr)'</SAMP>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_HEADER_SYS_WAIT</B>
<DD><A NAME="autoconf_ru_4_html_IDX250"></A>
<A NAME="autoconf_ru_4_html_IDX251"></A>
<A NAME="autoconf_ru_4_html_IDX252"></A>
Если <TT>`sys/wait.h'</TT> существует и совместим с POSIX.1, то определяется
переменная <CODE>HAVE_SYS_WAIT_H</CODE>. Несовместимость может возникнуть,
если файла <TT>`sys/wait.h'</TT> не существует, или для сохранения значения
статуса он использует старую BSD-версию <CODE>union wait</CODE> вместо
<CODE>int</CODE>. Если <TT>`sys/wait.h'</TT> не является совместимым с POSIX.1, то
вместо его включения определяется макрос POSIX.1 с его обычной
реализацией. Вот пример:



<PRE>
#include &#60;sys/types.h&#62;
#if HAVE_SYS_WAIT_H
# include &#60;sys/wait.h&#62;
#endif
#ifndef WEXITSTATUS
# define WEXITSTATUS(stat_val) ((unsigned)(stat_val) &#62;&#62; 8)
#endif
#ifndef WIFEXITED
# define WIFEXITED(stat_val) (((stat_val) &#38; 255) == 0)
#endif
</PRE>

</DL>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_MEMORY_H</B>
<DD><A NAME="autoconf_ru_4_html_IDX253"></A>
<A NAME="autoconf_ru_4_html_IDX254"></A>
<A NAME="autoconf_ru_4_html_IDX255"></A>
Определяет <CODE>NEED_MEMORY_H</CODE>, если <CODE>memcpy</CODE>, <CODE>memcmp</CODE>, и
т. п. не объявлены в файле <TT>`string.h'</TT> и существует файл
<TT>`memory.h'</TT>. Этот макрос является устаревшим; вместо него
используйте вызов <CODE>AC_CHECK_HEADERS(memory.h)</CODE>. Смотрите пример для
<CODE>AC_HEADER_STDC</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_UNISTD_H</B>
<DD><A NAME="autoconf_ru_4_html_IDX256"></A>
<A NAME="autoconf_ru_4_html_IDX257"></A>
<A NAME="autoconf_ru_4_html_IDX258"></A>
Определяет переменную <CODE>HAVE_UNISTD_H</CODE>, если в системе имеется файл
<TT>`unistd.h'</TT>. Этот макрос является устаревшим; вместо него
используйте вызов <SAMP>`AC_CHECK_HEADERS(unistd.h)'</SAMP>.


<P>
Для проверки того, что система поддерживает POSIX.1, можно использовать
следующий код:



<PRE>
#if HAVE_UNISTD_H
# include &#60;sys/types.h&#62;
# include &#60;unistd.h&#62;
#endif

#ifdef _POSIX_VERSION
/* Код для систем POSIX.1 */
#endif
</PRE>

<P>
<A NAME="autoconf_ru_4_html_IDX259"></A>
<CODE>_POSIX_VERSION</CODE> определяется, когда <TT>`unistd.h'</TT> подключен в
системах, совместимых с POSIX.1.  Если файла <TT>`unistd.h'</TT> не существует,
то, скорее всего, эта система не относится к POSIX.1.  Однако некоторые
не-POSIX.1 системы имеют файл <TT>`unistd.h'</TT>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_USG</B>
<DD><A NAME="autoconf_ru_4_html_IDX260"></A>
<A NAME="autoconf_ru_4_html_IDX261"></A>
<A NAME="autoconf_ru_4_html_IDX262"></A>


<P>
Определяет <CODE>USG</CODE>, если система не имеет файла <TT>`strings.h'</TT>,
<CODE>rindex</CODE>, <CODE>bzero</CODE> и т. п. Это означает, что система имеет
<TT>`string.h'</TT>, <CODE>strrchr</CODE>, <CODE>memset</CODE> и т. п.


<P>
Символ <CODE>USG</CODE> является устаревшим.  Вместо этого макроса смотрите
пример для <CODE>AC_HEADER_STDC</CODE>.
</DL>




<H3><A NAME="SEC31" HREF="#autoconf_ru_toc_html_TOC31">Базовые проверки заголовочных файлов</A></H3>
<P>
@anchor{Generic Headers}


<P>
Эти макросы используются для нахождения системных заголовочных файлов,
для которых не существует отдельного теста.  Если вам надо проверить не
только наличие заголовочного файла, но и его содержимое, то придется
написать для этого собственный тест
(see section <A HREF="#autoconf_ru_5_html_SEC40">Написание тестов</A>).


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_HEADER</B> <I>(<VAR>header-file</VAR>, [<VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX263"></A>
<A NAME="autoconf_ru_4_html_IDX264"></A>
Если системный заголовочный файл <VAR>header-file</VAR> существует, то
исполняются команды командного процессора <VAR>action-if-found</VAR>, в
противном случае выполняются <VAR>action-if-not-found</VAR>. Если вы просто
хотите определить символ, если заголовочный файл доступен, то лучше
используйте макрос <CODE>AC_CHECK_HEADERS</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_HEADERS</B> <I>(<VAR>header-file</VAR>... [, <VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_4_html_IDX265"></A>
<A NAME="autoconf_ru_4_html_IDX266"></A>
<A NAME="autoconf_ru_4_html_IDX267"></A>
Для каждого системного заголовочного файла <VAR>header-file</VAR>, заданного
в списке через пробел, в случае его существования определить
переменную <CODE>HAVE_<VAR>header-file</VAR></CODE> (все буквы заглавные). Если
задан аргумент <VAR>action-if-found</VAR>, то выполняется дополнительный код
командного процессора в случае, когда файл найден. Вы можете задать
аргумент <SAMP>`break'</SAMP> для прекращения итераций, когда найден первый
файл.  Если задан аргумент <VAR>action-if-not-found</VAR>, то он выполняется,
когда заголовочный файл не найден.
</DL>




<H2><A NAME="SEC32" HREF="#autoconf_ru_toc_html_TOC32">Структуры</A></H2>
<P>
@anchor{Structures}


<P>
Следующие макросы проверяют наличие определенных структур или полей
структур.  Для проверки структур, не перечисленных в этом разделе,
используйте макрос <CODE>AC_EGREP_CPP</CODE> (see section <A HREF="#autoconf_ru_5_html_SEC41">Исследование деклараций</A>)
или <CODE>AC_TRY_COMPILE</CODE> (see section <A HREF="#autoconf_ru_5_html_SEC42">Проверка синтаксиса</A>).


<P>
<DL>
<DT><U>Macro:</U> <B>AC_HEADER_STAT</B>
<DD><A NAME="autoconf_ru_4_html_IDX268"></A>
<A NAME="autoconf_ru_4_html_IDX269"></A>
<A NAME="autoconf_ru_4_html_IDX270"></A>
Если макросы <CODE>S_ISDIR</CODE>, <CODE>S_ISREG</CODE> и т. п., определенные в
<TT>`sys/stat.h'</TT>, работают неправильно (возвращая неверные
положительные результаты), то определяется переменная
<CODE>STAT_MACROS_BROKEN</CODE>. Это происходит на системах Tektronix UTekV,
Amdahl UTS и Motorola System V/88.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_HEADER_TIME</B>
<DD><A NAME="autoconf_ru_4_html_IDX271"></A>
<A NAME="autoconf_ru_4_html_IDX272"></A>
<A NAME="autoconf_ru_4_html_IDX273"></A>
Если программа может подключать как <TT>`time.h'</TT>, так и <TT>`sys/time.h'</TT>, то
определяется переменная <CODE>TIME_WITH_SYS_TIME</CODE>. В некоторых старых
системах <TT>`sys/time.h'</TT> подключает <TT>`time.h'</TT>, но <TT>`time.h'</TT>
не защищен от многократного подключения, так что программы не должны
явно подключать оба файла. Этот макрос полезен для программ, которые,
например, используют структуры <CODE>struct timeval</CODE> или <CODE>struct
timezone</CODE>, вместе с <CODE>struct tm</CODE>.  Этот макрос лучше всего
использовать
вместе с <CODE>HAVE_SYS_TIME_H</CODE>, который может быть проверен с помощью
<CODE>AC_CHECK_HEADERS(sys/time.h)</CODE>.



<PRE>
#if TIME_WITH_SYS_TIME
# include &#60;sys/time.h&#62;
# include &#60;time.h&#62;
#else
# if HAVE_SYS_TIME_H
#  include &#60;sys/time.h&#62;
# else
#  include &#60;time.h&#62;
# endif
#endif
</PRE>

</DL>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_STRUCT_ST_BLKSIZE</B>
<DD><A NAME="autoconf_ru_4_html_IDX274"></A>
<A NAME="autoconf_ru_4_html_IDX275"></A>
<A NAME="autoconf_ru_4_html_IDX276"></A>
Если <CODE>struct stat</CODE> содержит поле <CODE>st_blksize</CODE>, то определяется
переменная <CODE>HAVE_ST_BLKSIZE</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_STRUCT_ST_BLOCKS</B>
<DD><A NAME="autoconf_ru_4_html_IDX277"></A>
<A NAME="autoconf_ru_4_html_IDX278"></A>
<A NAME="autoconf_ru_4_html_IDX279"></A>
<A NAME="autoconf_ru_4_html_IDX280"></A>
Если <CODE>struct stat</CODE> содержит поле <CODE>st_blocks</CODE>, то определяется 
переменная <CODE>HAVE_ST_BLOCKS</CODE>. В противном случае, <SAMP>`fileblocks.o'</SAMP> 
добавляется к выходной переменной <CODE>LIBOBJS</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_STRUCT_ST_RDEV</B>
<DD><A NAME="autoconf_ru_4_html_IDX281"></A>
<A NAME="autoconf_ru_4_html_IDX282"></A>
<A NAME="autoconf_ru_4_html_IDX283"></A>
Если <CODE>struct stat</CODE> содержит поле <CODE>st_rdev</CODE>, то определяется
переменная <CODE>HAVE_ST_RDEV</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_STRUCT_TM</B>
<DD><A NAME="autoconf_ru_4_html_IDX284"></A>
<A NAME="autoconf_ru_4_html_IDX285"></A>
<A NAME="autoconf_ru_4_html_IDX286"></A>
Если <TT>`time.h'</TT> не определяет <CODE>struct tm</CODE>, то определяется
символ <CODE>TM_IN_SYS_TIME</CODE>, что означает, что <TT>`sys/time.h'</TT>
следовало бы определить <CODE>struct tm</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_STRUCT_TIMEZONE</B>
<DD><A NAME="autoconf_ru_4_html_IDX287"></A>
<A NAME="autoconf_ru_4_html_IDX288"></A>
<A NAME="autoconf_ru_4_html_IDX289"></A>
<A NAME="autoconf_ru_4_html_IDX290"></A>
Определяет, как получить текущую временную зону.  Если <CODE>struct tm</CODE>
имеет поле <CODE>tm_zone</CODE>, то определяется переменная
<CODE>HAVE_TM_ZONE</CODE>. В противном случае, если найден внешний массив
<CODE>tzname</CODE>, то определяется переменная <CODE>HAVE_TZNAME</CODE>.
</DL>




<H2><A NAME="SEC33" HREF="#autoconf_ru_toc_html_TOC33">Объявления типов</A></H2>
<P>
@anchor{Typedefs}


<P>
Следующие макросы проверяют определения типов (typedef) языка C.  Если для нужного
вам определения типа нет специального макроса, и вам не нужно выполнять
проверку специальных возможностей, то можно использовать общие
макросы проверки объявлений типов.




<H3><A NAME="SEC34" HREF="#autoconf_ru_toc_html_TOC34">Проверка отдельных объявлений типов</A></H3>
<P>
@anchor{Particular Typedefs}


<P>
Эти макросы проверяют конкретные объявления типов C в файлах
<TT>`sys/types.h'</TT> и <TT>`stdlib.h'</TT> (если он существует).


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TYPE_GETGROUPS</B>
<DD><A NAME="autoconf_ru_4_html_IDX291"></A>
<A NAME="autoconf_ru_4_html_IDX292"></A>
<A NAME="autoconf_ru_4_html_IDX293"></A>
Определяет <CODE>GETGROUPS_T</CODE> равным <CODE>gid_t</CODE> или <CODE>int</CODE>, в
зависимости от того, что именно является базовым типом массива-аргумента 
функции <CODE>getgroups</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TYPE_MODE_T</B>
<DD><A NAME="autoconf_ru_4_html_IDX294"></A>
<A NAME="autoconf_ru_4_html_IDX295"></A>
<A NAME="autoconf_ru_4_html_IDX296"></A>
Если <CODE>mode_t</CODE> не определен, то определить тип <CODE>mode_t</CODE> равным
<CODE>int</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TYPE_OFF_T</B>
<DD><A NAME="autoconf_ru_4_html_IDX297"></A>
<A NAME="autoconf_ru_4_html_IDX298"></A>
<A NAME="autoconf_ru_4_html_IDX299"></A>
Если <CODE>off_t</CODE> не определен, то определить <CODE>off_t</CODE> равным
<CODE>long</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TYPE_PID_T</B>
<DD><A NAME="autoconf_ru_4_html_IDX300"></A>
<A NAME="autoconf_ru_4_html_IDX301"></A>
<A NAME="autoconf_ru_4_html_IDX302"></A>
Если <CODE>pid_t</CODE> не определен, то определить <CODE>pid_t</CODE> равным
<CODE>int</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TYPE_SIGNAL</B>
<DD><A NAME="autoconf_ru_4_html_IDX303"></A>
<A NAME="autoconf_ru_4_html_IDX304"></A>
<A NAME="autoconf_ru_4_html_IDX305"></A>
Если <TT>`signal.h'</TT> определяет <CODE>signal</CODE> как возвращающий указатель
на функцию, возвращающую <CODE>void</CODE>, то переменная <CODE>RETSIGTYPE</CODE>
становится равной <CODE>void</CODE>; в противном случае она определяется с
типом <CODE>int</CODE>.


<P>
Определить обработчики сигналов как возвращающие тип <CODE>RETSIGTYPE</CODE>:



<PRE>
RETSIGTYPE
hup_handler ()
{
...
}
</PRE>

</DL>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_TYPE_SIZE_T</B>
<DD><A NAME="autoconf_ru_4_html_IDX306"></A>
<A NAME="autoconf_ru_4_html_IDX307"></A>
<A NAME="autoconf_ru_4_html_IDX308"></A>
Если <CODE>size_t</CODE> не определен, то определить <CODE>size_t</CODE> как
<CODE>unsigned</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TYPE_UID_T</B>
<DD><A NAME="autoconf_ru_4_html_IDX309"></A>
<A NAME="autoconf_ru_4_html_IDX310"></A>
<A NAME="autoconf_ru_4_html_IDX311"></A>
<A NAME="autoconf_ru_4_html_IDX312"></A>
Если <CODE>uid_t</CODE> не определен, то определить <CODE>uid_t</CODE> равным
<CODE>int</CODE> и <CODE>gid_t</CODE> равным <CODE>int</CODE>.
</DL>




<H3><A NAME="SEC35" HREF="#autoconf_ru_toc_html_TOC35">Базовые проверки объявлений типов</A></H3>
<P>
@anchor{Generic Typedefs}


<P>
Эти макросы используются для проверки определений типов (typedef), которые не были
описаны в разделе конкретных макросов проверок.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_TYPE</B> <I>(<VAR>type</VAR>, <VAR>default</VAR>)</I>
<DD><A NAME="autoconf_ru_4_html_IDX313"></A>
<A NAME="autoconf_ru_4_html_IDX314"></A>
Если тип <VAR>type</VAR> не определен в <TT>`sys/types.h'</TT>, или в
<TT>`stdlib.h'</TT>, или в <TT>`stddef.h'</TT> (если они существуют), то
определить этот тип равным встроенному типу C (или C++) <VAR>default</VAR>;
например, <SAMP>`short'</SAMP> или <SAMP>`unsigned'</SAMP>.
</DL>




<H2><A NAME="SEC36" HREF="#autoconf_ru_toc_html_TOC36">Характеристики компилятора C</A></H2>
<P>
@anchor{C Compiler Characteristics}


<P>
Следующие макросы выполняют проверку свойств компилятора C или
архитектуры машины. Для проверки характеристик, не перечисленных в этом
разделе, используйте макросы <CODE>AC_TRY_COMPILE</CODE> (see section <A HREF="#autoconf_ru_5_html_SEC42">Проверка синтаксиса</A>) или <CODE>AC_TRY_RUN</CODE> (see section <A HREF="#autoconf_ru_5_html_SEC44">Проверка поведения во время выполнения</A>).


<P>
<DL>
<DT><U>Macro:</U> <B>AC_C_BIGENDIAN</B>
<DD><A NAME="autoconf_ru_4_html_IDX315"></A>
<A NAME="autoconf_ru_4_html_IDX316"></A>
<A NAME="autoconf_ru_4_html_IDX317"></A>
Если слова хранятся в порядке, когда самый значимый байт хранится первым
(подобно процессорам Motorola и SPARC, но не Intel и VAX), то
определяется переменная <CODE>WORDS_BIGENDIAN</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_C_CONST</B>
<DD><A NAME="autoconf_ru_4_html_IDX318"></A>
<A NAME="autoconf_ru_4_html_IDX319"></A>
<A NAME="autoconf_ru_4_html_IDX320"></A>
Если компилятор C не поддерживает полностью ключевое слово <CODE>const</CODE>,
то макросу <CODE>const</CODE> присваивается пустое значение. Некоторые
компиляторы C не определяют константу <CODE>__STDC__</CODE>, но поддерживают
<CODE>const</CODE>; некоторые компиляторы, определяющие
<CODE>__STDC__</CODE>, не полностью поддерживают <CODE>const</CODE>.  Программы могут
просто использовать <CODE>const</CODE>, как будто любой компилятор C
поддерживает его; для тех компиляторов, которые не имеют такой поддержки,
<TT>`Makefile'</TT> или заголовочный файл настройки определят это слово как
имеющее пустое значение.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_C_INLINE</B>
<DD><A NAME="autoconf_ru_4_html_IDX321"></A>
<A NAME="autoconf_ru_4_html_IDX322"></A>
<A NAME="autoconf_ru_4_html_IDX323"></A>
Если компилятор C поддерживает <CODE>inline</CODE>, то ничего не
делается. В противном случае, <CODE>inline</CODE> определяется равным
<CODE>__inline__</CODE> или <CODE>__inline</CODE>, если компилятор поддерживает один
из этих вариантов, иначе <CODE>inline</CODE> определяется равным пустому
значению.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_C_CHAR_UNSIGNED</B>
<DD><A NAME="autoconf_ru_4_html_IDX324"></A>
<A NAME="autoconf_ru_4_html_IDX325"></A>
<A NAME="autoconf_ru_4_html_IDX326"></A>
Если тип C <CODE>char</CODE> является беззнаковым, то определяется переменная
<CODE>__CHAR_UNSIGNED__</CODE> (если компилятор C еще не определил ее).
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_C_LONG_DOUBLE</B>
<DD><A NAME="autoconf_ru_4_html_IDX327"></A>
<A NAME="autoconf_ru_4_html_IDX328"></A>
<A NAME="autoconf_ru_4_html_IDX329"></A>
Если компилятор C поддерживает тип <CODE>long double</CODE>, то определяется
переменная <CODE>HAVE_LONG_DOUBLE</CODE>. Некоторые компиляторы C, которые не
определяют <CODE>__STDC__</CODE>, поддерживают <CODE>long double</CODE>; а
некоторые компиляторы, определяющие <CODE>__STDC__</CODE>, не поддерживают тип
<CODE>long double</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_C_STRINGIZE</B>
<DD><A NAME="autoconf_ru_4_html_IDX330"></A>
<A NAME="autoconf_ru_4_html_IDX331"></A>
<A NAME="autoconf_ru_4_html_IDX332"></A>
Если препроцессор C поддерживает строковый (stringizing) оператор, то определяется
переменная <CODE>HAVE_STRINGIZE</CODE>. Строковым (stringinzing)оператором является <SAMP>`#'</SAMP>
и он используется в макросах, например:



<PRE>
#define x(y) #y
</PRE>

</DL>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECK_SIZEOF</B> <I>(<VAR>type</VAR> [, <VAR>cross-size</VAR>])</I>
<DD><A NAME="autoconf_ru_4_html_IDX333"></A>
<A NAME="autoconf_ru_4_html_IDX334"></A>
Определить <CODE>SIZEOF_<VAR>uctype</VAR></CODE> равным числу байтов во встроенном
типе C (или C++) <VAR>type</VAR>, например, <SAMP>`int'</SAMP> или <SAMP>`char *'</SAMP>.
Если <SAMP>`type'</SAMP> неизвестен компилятору, то переменная получает
значение 0.
<VAR>uctype</VAR> является <VAR>type</VAR>, со строчными буквами,
преобразованными в прописные, пробелы преобразуются в знаки
подчеркивания, и знаки звездочка (<CODE>*</CODE>) заменяются на <SAMP>`P'</SAMP>. Если
производится кросс-компиляция, то используется значение <VAR>cross-size</VAR>
(если оно задано), в противном случае <CODE>configure</CODE> прекращает работу
с выдачей сообщения об ошибке.


<P>
Например, вызов

<PRE>
AC_CHECK_SIZEOF(int *)
</PRE>

<P>
определяет <CODE>SIZEOF_INT_P</CODE> равным 8 на системах DEC Alpha AXP.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_INT_16_BITS</B>
<DD><A NAME="autoconf_ru_4_html_IDX335"></A>
<A NAME="autoconf_ru_4_html_IDX336"></A>
<A NAME="autoconf_ru_4_html_IDX337"></A>
Если тип <CODE>int</CODE> имеет размер 16 бит, то определяется переменная
<CODE>INT_16_BITS</CODE>. Этот макрос является устаревшим; вместо него лучше
использовать общий макрос <SAMP>`AC_CHECK_SIZEOF(int)'</SAMP>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_LONG_64_BITS</B>
<DD><A NAME="autoconf_ru_4_html_IDX338"></A>
<A NAME="autoconf_ru_4_html_IDX339"></A>
<A NAME="autoconf_ru_4_html_IDX340"></A>
Если тип <CODE>long int</CODE> имеет размер 64 бита, то определяется
переменная <CODE>LONG_64_BITS</CODE>. Этот макрос является устаревшим; вместо
него лучше использовать вызов <SAMP>`AC_CHECK_SIZEOF(long)'</SAMP>.
</DL>




<H2><A NAME="SEC37" HREF="#autoconf_ru_toc_html_TOC37">Характеристики компилятора Fortran 77</A></H2>
<P>
@anchor{Fortran 77 Compiler Characteristics}


<P>
Следующие макросы используются для проверки характеристик компилятора
Fortran 77.  Для проверки характеристик, не перечисленных в этом разделе,
используйте макросы <CODE>AC_TRY_COMPILE</CODE> (see section <A HREF="#autoconf_ru_5_html_SEC42">Проверка синтаксиса</A>)
или <CODE>AC_TRY_RUN</CODE> (see section <A HREF="#autoconf_ru_5_html_SEC44">Проверка поведения во время выполнения</A>), убедившись, что перед
этим вы установили Fortran 77 текущим языком.
<CODE>AC_LANG_FORTRAN77</CODE> (see section <A HREF="#autoconf_ru_5_html_SEC51">Выбор языка</A>).


<P>
<DL>
<DT><U>Macro:</U> <B>AC_F77_LIBRARY_LDFLAGS</B>
<DD><A NAME="autoconf_ru_4_html_IDX341"></A>
<A NAME="autoconf_ru_4_html_IDX342"></A>
<A NAME="autoconf_ru_4_html_IDX343"></A>
Определяет ключи командной строки компоновщика (например, <SAMP>`-L'</SAMP> и
<SAMP>`-l'</SAMP>) для <EM>внутренних библиотек Fortran 77 и библиотек времени
исполнения</EM>, которые требуются для правильной компоновки программ на
Fortran 77 или разделяемых библиотек.  Выходная переменная <CODE>FLIBS</CODE>
устанавливается равной этим флагам.


<P>
Этот макрос предназначен для использования в ситуациях, когда необходимо
смешать исходный код, например на C++ и Fortran 77, в одну программу или
разделяемую библиотеку (see section `Смешивание кода Fortran 77 с кодом на C и C++' in <CITE>GNU Automake</CITE>).


<P>
Например, если объектные файлы от компиляторов C++ и Fortran 77 должны
быть скомпонованы вместе, то для компоновки должен использоваться
компилятор/компоновщик C++, поскольку специфические для C++ вещи,
такие как вызовы
глобальных конструкторов, подстановке шаблонов, разрешении обработки
исключений, и т. п., нуждаются в специальных действиях во время компоновки.


<P>
Однако в этих случаях должны быть подключены и внутренние библиотеки
Fortran 77, а также библиотеки времени исполнения, а
компилятор/компоновщик C++ просто не знает, какие библиотеки Fortran 77
должны быть добавлены. Для определения библиотек Fortran 77 и был создан
макрос <CODE>AC_F77_LIBRARY_LDFLAGS</CODE>.
</DL>




<H2><A NAME="SEC38" HREF="#autoconf_ru_toc_html_TOC38">Системные сервисы</A></H2>
<P>
@anchor{System Services}


<P>
Следующие макросы проверяют наличие сервисов операционной системы или ее
возможности.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CYGWIN</B>
<DD><A NAME="autoconf_ru_4_html_IDX344"></A>
<A NAME="autoconf_ru_4_html_IDX345"></A>
Проверяет наличие среды Cygwin. Если она присутствует, то переменная
среды <CODE>CYGWIN</CODE> получает значение <SAMP>`yes'</SAMP>.  В противном случае 
переменная <CODE>CYGWIN</CODE> получает пустое значение.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_EXEEXT</B>
<DD><A NAME="autoconf_ru_4_html_IDX346"></A>
<A NAME="autoconf_ru_4_html_IDX347"></A>
<A NAME="autoconf_ru_4_html_IDX348"></A>
Определяет переменную подстановки <CODE>EXEEXT</CODE>, основанную на
расширении файла, выдаваемого компилятором, после исключения файлов с
расширениями .c, .o и .obj.  Для Unix обычным значением является пустая
строка, а для Win32 --- <SAMP>`.exe'</SAMP> и <SAMP>`.EXE'</SAMP>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_OBJEXT</B>
<DD><A NAME="autoconf_ru_4_html_IDX349"></A>
<A NAME="autoconf_ru_4_html_IDX350"></A>
<A NAME="autoconf_ru_4_html_IDX351"></A>
Определяет переменную подстановки <CODE>OBJEXT</CODE>, основанную на выводе
компилятора, после исключения файлов с расширением .c. Обычно имеет
значение <SAMP>`.o'</SAMP> в Unix, и <SAMP>`.obj'</SAMP> на системах Win32.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_MINGW32</B>
<DD><A NAME="autoconf_ru_4_html_IDX352"></A>
<A NAME="autoconf_ru_4_html_IDX353"></A>
Проверяет наличие среды компилятора MingW32. Если она присутствует, то
переменная <CODE>MINGW32</CODE> получает значение <SAMP>`yes'</SAMP>.  В противном
случае переменная <CODE>MINGW32</CODE> получает пустое значение.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PATH_X</B>
<DD><A NAME="autoconf_ru_4_html_IDX354"></A>
<A NAME="autoconf_ru_4_html_IDX355"></A>
Этот макрос пробует определить расположение заголовочных файлов и
библиотек X Window System. Если пользователь задал ключи командной
строки <SAMP>`--x-includes=<VAR>dir</VAR>'</SAMP> и <SAMP>`--x-libraries=<VAR>dir</VAR>'</SAMP>,
то используются заданные каталоги. Если один из ключей или оба не
заданы, то пропущенные значения получают запуском <CODE>xmkmf</CODE> для
простого <TT>`Imakefile'</TT> и разбора полученного файла
<TT>`Makefile'</TT>. Если произошел сбой (например, если <CODE>xmkmf</CODE>
отсутствует), то производится поиск в нескольких каталогах, где часто
располагаются эти файлы. Если один из этих способов был удачен, то
переменные командного процессора <CODE>x_includes</CODE> и <CODE>x_libraries</CODE>
устанавливаются равными найденным каталогам (в том случае, если эти
каталоги не входят в пути, в которых компилятор по умолчанию производит
поиск).


<P>
Если оба этих метода дают сбой, или пользователь задал ключ командной
строки <SAMP>`--without-x'</SAMP>, то переменная командного процессора <CODE>no_x</CODE> 
получает значение <SAMP>`yes'</SAMP>; в противном случае она получает пустое
значение.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PATH_XTRA</B>
<DD><A NAME="autoconf_ru_4_html_IDX356"></A>
<A NAME="autoconf_ru_4_html_IDX357"></A>
<A NAME="autoconf_ru_4_html_IDX358"></A>
<A NAME="autoconf_ru_4_html_IDX359"></A>
<A NAME="autoconf_ru_4_html_IDX360"></A>
<A NAME="autoconf_ru_4_html_IDX361"></A>
Расширенная версия <CODE>AC_PATH_X</CODE>. Она добавляет к выходной переменной
<CODE>X_CFLAGS</CODE> ключи компилятора C, которые необходимы X, а также флаги
X для компоновщика к переменной <CODE>X_LIBS</CODE>. Если X не доступна, то
добавляется <SAMP>`-DX_DISPLAY_MISSING'</SAMP> к <CODE>X_CFLAGS</CODE>.


<P>
Этот макрос также выполняет проверки специальных библиотек, в которых
нуждаются некоторые системы для того, чтобы скомпилировать программу
для X.
Он добавляет все, что необходимо для таких систем, к выходной
переменной <CODE>X_EXTRA_LIBS</CODE>. Он также проверяет наличие специальных
библиотек X11R6, которые необходимо скомпоновать до использования
<SAMP>`-lX11'</SAMP>, и добавляет найденные библиотеки к выходной переменной
<CODE>X_PRE_LIBS</CODE>.


</DL>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_SYS_INTERPRETER</B>
<DD><A NAME="autoconf_ru_4_html_IDX362"></A>
<A NAME="autoconf_ru_4_html_IDX363"></A>
Проверяет, поддерживает ли система начало скриптов со строки в форме
<SAMP>`#! /bin/csh'</SAMP> для выбора интерпретатора, который будет
использоваться для данного скрипта. После запуска этого макроса код
командного процессора в
<CODE>configure.in</CODE> может проверить переменную <CODE>interpval</CODE>; она будет 
равна <SAMP>`yes'</SAMP>, если система поддерживает <SAMP>`#!'</SAMP>, и <SAMP>`no'</SAMP> в
противном случае.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_SYS_LONG_FILE_NAMES</B>
<DD><A NAME="autoconf_ru_4_html_IDX364"></A>
<A NAME="autoconf_ru_4_html_IDX365"></A>
<A NAME="autoconf_ru_4_html_IDX366"></A>
Если система поддерживает имена файлов длиннее 14 символов, то будет
определена переменная <CODE>HAVE_LONG_FILE_NAMES</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_SYS_RESTARTABLE_SYSCALLS</B>
<DD><A NAME="autoconf_ru_4_html_IDX367"></A>
<A NAME="autoconf_ru_4_html_IDX368"></A>
<A NAME="autoconf_ru_4_html_IDX369"></A>
Если система автоматически перезапускает системный вызов, который был
прерван сигналом, то определяется переменная
<CODE>HAVE_RESTARTABLE_SYSCALLS</CODE>.
</DL>




<H2><A NAME="SEC39" HREF="#autoconf_ru_toc_html_TOC39">Варианты UNIX</A></H2>
<P>
@anchor{UNIX Variants}


<P>
Следующие макросы проверяют наличие конкретных операционных систем, что
может потребовать специальной обработки в программах из-за
исключительных странностей в их заголовочных файлах или библиотеках. Эти
макросы являются бородавками (наростами); они будут заменены на более
систематизированные, разбитые на предоставляемые ими функции или
устанавливаемые ими параметры среды.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_AIX</B>
<DD><A NAME="autoconf_ru_4_html_IDX370"></A>
<A NAME="autoconf_ru_4_html_IDX371"></A>
<A NAME="autoconf_ru_4_html_IDX372"></A>
На AIX определяет переменную <CODE>_ALL_SOURCE</CODE>.  Позволяет использовать
некоторые функции BSD. Должен вызываться до макросов,
запускающих компилятор C.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_DYNIX_SEQ</B>
<DD><A NAME="autoconf_ru_4_html_IDX373"></A>
<A NAME="autoconf_ru_4_html_IDX374"></A>
На Dynix/PTX (Sequent UNIX) добавляет <SAMP>`-lseq'</SAMP> к выходной
переменной <CODE>LIBS</CODE>. Этот макрос является устаревшим; используйте
вместо него <CODE>AC_FUNC_GETMNTENT</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_IRIX_SUN</B>
<DD><A NAME="autoconf_ru_4_html_IDX375"></A>
<A NAME="autoconf_ru_4_html_IDX376"></A>
На IRIX (Silicon Graphics UNIX) добавляет <SAMP>`-lsun'</SAMP> к выходной
переменной <CODE>LIBS</CODE>. Этот макрос является устаревшим. Если вы
используете его для проверки наличия <CODE>getmntent</CODE>, то вместо него
используйте макрос <CODE>AC_FUNC_GETMNTENT</CODE>. Если вы использовали его
для NIS-версий функций работы с паролями и группами, то вместо него
используйте <SAMP>`AC_CHECK_LIB(sun, getpwnam)'</SAMP>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_ISC_POSIX</B>
<DD><A NAME="autoconf_ru_4_html_IDX377"></A>
<A NAME="autoconf_ru_4_html_IDX378"></A>
<A NAME="autoconf_ru_4_html_IDX379"></A>
<A NAME="autoconf_ru_4_html_IDX380"></A>
На POSIX-версии ISC UNIX определяет переменную <CODE>_POSIX_SOURCE</CODE> и
добавляет <SAMP>`-posix'</SAMP> (для компилятора GNU C) или <SAMP>`-Xp'</SAMP> (для
других компиляторов C) к выходной переменной <CODE>CC</CODE>. Это позволяет
использовать возможности POSIX. Макрос должен быть вызван после вызова
<CODE>AC_PROG_CC</CODE> и до вызова любых других макросов, которые запускают
компилятор C.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_MINIX</B>
<DD><A NAME="autoconf_ru_4_html_IDX381"></A>
<A NAME="autoconf_ru_4_html_IDX382"></A>
<A NAME="autoconf_ru_4_html_IDX383"></A>
<A NAME="autoconf_ru_4_html_IDX384"></A>
<A NAME="autoconf_ru_4_html_IDX385"></A>
На Minix определяет переменные <CODE>_MINIX</CODE> и <CODE>_POSIX_SOURCE</CODE> и
определяет <CODE>_POSIX_1_SOURCE</CODE> со значением 2. Это позволяет
использовать возможности POSIX. Должен вызываться до вызова других
макросов, запускающих компилятор C.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_SCO_INTL</B>
<DD><A NAME="autoconf_ru_4_html_IDX386"></A>
<A NAME="autoconf_ru_4_html_IDX387"></A>
<A NAME="autoconf_ru_4_html_IDX388"></A>
На SCO UNIX добавляет <SAMP>`-lintl'</SAMP> к выходной переменной <CODE>LIBS</CODE>.
Этот макрос является устаревшим; вместо него используйте макрос
<CODE>AC_FUNC_STRFTIME</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_XENIX_DIR</B>
<DD><A NAME="autoconf_ru_4_html_IDX389"></A>
<A NAME="autoconf_ru_4_html_IDX390"></A>
<A NAME="autoconf_ru_4_html_IDX391"></A>
На Xenix добавляет <SAMP>`-lx'</SAMP> к выходной переменной <CODE>LIBS</CODE>. Также,
если используется <TT>`dirent.h'</TT>, то к переменной <CODE>LIBS</CODE> добавляется
<SAMP>`-ldir'</SAMP>. Этот макрос является устаревшим; вместо него используйте
<CODE>AC_HEADER_DIRENT</CODE>.
</DL>


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_3_html">previous</A>, <A HREF="#autoconf_ru_5_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_5_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_4_html">previous</A>, <A HREF="#autoconf_ru_6_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC40" HREF="#autoconf_ru_toc_html_TOC40">Написание тестов</A></H1>
<P>
@anchor{Writing Tests}


<P>
Если существующие тесты делают не то, что вам надо, то вы
можете написать собственные тесты. Эти макросы являются строительными
блоками для этих тестов. Они предоставляют другим макросам возможность
проверить доступность различных свойств и сообщить о результатах.


<P>
Эта глава содержит некоторые пожелания и описание того, почему
существующие тесты написаны так, а не иначе.  Вы также можете научиться
тому, как писать тесты Autoconf, разглядывая существующие тесты.  Если в
одном или нескольких тестах Autoconf что-нибудь пойдет не так, то эта
информация может помочь вам понять предположения, которые стоят за ними,
что, в свою очередь, может помочь вам определить наилучший способ решения
проблемы.


<P>
Эти макросы проверяют вывод системного компилятора C. Они не кэшируют
результаты тестов для последующего использования (see section <A HREF="#autoconf_ru_6_html_SEC55">Кэширование результатов</A>), поскольку для генерации имени переменной кэша они не
имеют достаточно информации о том, что они проверяют. Также по некоторым
причинам они не печатают никаких сообщений. Проверки отдельных свойств
компилятора С вызывают эти макросы и кэшируют свои результаты, а также
выводят сообщения о том, что они проверяют.


<P>
Когда вы пишете тест свойства, который может быть применим для более чем
одного пакета программного обеспечения, то лучше всего будет описать его
как новый макрос. Для того, чтобы узнать, как это делается See section <A HREF="#autoconf_ru_7_html_SEC59">Создание макросов</A>.




<H2><A NAME="SEC41" HREF="#autoconf_ru_toc_html_TOC41">Исследование деклараций</A></H2>
<P>
@anchor{Examining Declarations}


<P>
Макрос <CODE>AC_TRY_CPP</CODE> используется для проверки существования
конкретных заголовочных файлов.  You can check for one at a time, or
more than one if you need several header files to all exist for some
purpose.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TRY_CPP</B> <I>(<VAR>includes</VAR>, [<VAR>action-if-true</VAR> [, <VAR>action-if-false</VAR>]])</I>
<DD><A NAME="autoconf_ru_5_html_IDX392"></A>
<A NAME="autoconf_ru_5_html_IDX393"></A>
<VAR>includes</VAR> содержит директивы <CODE>#include</CODE> языков C или C++, а также
объявления, над которыми выполняются подстановки переменных командного
процессора, обратных кавычек и обратных слэшей.  (В действительности, <VAR>includes</VAR>
может быть любой программой на C, но другие выражения, вероятно, бесполезны).
Если препроцессор не выдает сообщений об ошибках в
течении обработки директивы, то выполняется код командного процессора
<VAR>action-if-true</VAR>. В противном случае выполняется код
<VAR>action-if-false</VAR>.


<P>
Этот макрос использует переменную <CODE>CPPFLAGS</CODE>, а не <CODE>CFLAGS</CODE>,
поскольку <SAMP>`-g'</SAMP>, <SAMP>`-O'</SAMP> и т. п. не являются правильными ключами
для многих препроцессоров C.
</DL>


<P>
Вот как узнать, содержит ли конкретный заголовочный файл определенное
объявление, например, объявление типа, структуры, члена структуры или
функции. Используйте макрос <CODE>AC_EGREP_HEADER</CODE> вместо прямого
запуска команды <CODE>grep</CODE> для заголовочного файла; в некоторых
системах символ может быть объявлен в другом заголовочном файле, а не в
том, который вы проверяете в <SAMP>`#include'</SAMP>.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_EGREP_HEADER</B> <I>(<VAR>pattern</VAR>, <VAR>header-file</VAR>, <VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>])</I>
<DD><A NAME="autoconf_ru_5_html_IDX394"></A>
<A NAME="autoconf_ru_5_html_IDX395"></A>
Если вывод препроцессора, запущенного для системного заголовочного файла
<VAR>header-file</VAR> соответствует регулярному выражению <CODE>egrep</CODE>
<VAR>pattern</VAR>, то выполняются команды командного процессора
<VAR>action-if-found</VAR>, в противном случае выполняются команды
<VAR>action-if-not-found</VAR>.
</DL>


<P>
Для проверки символов препроцессора C, определенных в заголовочном
файле, либо предопределенных препроцессором C, используйте макрос
<CODE>AC_EGREP_CPP</CODE>. Вот пример последнего:



<PRE>
AC_EGREP_CPP(yes,
[#ifdef _AIX
  yes
#endif
], is_aix=yes, is_aix=no)
</PRE>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_EGREP_CPP</B> <I>(<VAR>pattern</VAR>, <VAR>program</VAR>, [<VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_5_html_IDX396"></A>
<A NAME="autoconf_ru_5_html_IDX397"></A>
<VAR>program</VAR> является текстом программы на C или C++, для которой
выполняются подстановки переменных командного процессора, обратных
кавычек и обратных слэшей. Если вывод препроцессора, обрабатывавшего
<VAR>program</VAR>, соответствует регулярному выражению команды <CODE>egrep</CODE>
<VAR>pattern</VAR>, то выполняется код командного процессора
<VAR>action-if-found</VAR>, иначе выполняется <VAR>action-if-not-found</VAR>.


<P>
Этот макрос вызывает <CODE>AC_PROG_CPP</CODE> или <CODE>AC_PROG_CXXCPP</CODE> (в
зависимости от того, какой из языков является текущим, see section <A HREF="#autoconf_ru_5_html_SEC51">Выбор языка</A>), если эти макросы еще не вызывались.
</DL>




<H2><A NAME="SEC42" HREF="#autoconf_ru_toc_html_TOC42">Проверка синтаксиса</A></H2>
<P>
@anchor{Examining Syntax}


<P>
Для проверки синтаксических возможностей компиляторов C, C++ или Fortran
77, например, распознавания определенных ключевых слов, используется
макрос <CODE>AC_TRY_COMPILE</CODE>, который пробует откомпилировать маленькую
программу, которая использует заданную возможность.  Вы также можете
использовать этот макрос для проверки структур и полей структур, которые
присутствуют не во всех системах.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TRY_COMPILE</B> <I>(<VAR>includes</VAR>, <VAR>function-body</VAR>, [<VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_5_html_IDX398"></A>
<A NAME="autoconf_ru_5_html_IDX399"></A>
Создает тестовую программу на C, C++ или Fortran 77 (в зависимости от того, 
какой язык является текущим, see section <A HREF="#autoconf_ru_5_html_SEC51">Выбор языка</A>), для того, чтобы 
убедиться, что функция, чье тело состоит из <VAR>function-body</VAR> может 
быть скомпилирована.


<P>
Для C и C++, <VAR>includes</VAR> является любыми директивами <CODE>#include</CODE>, в
которых нуждается код в <VAR>function-body</VAR> (параметр <VAR>includes</VAR> будет 
проигнорирован, если текущим языком является Fortran 77). Этот макрос
при компиляции помимо переменной <CODE>CPPFLAGS</CODE>
также использует переменные <CODE>CFLAGS</CODE> или <CODE>CXXFLAGS</CODE>, если 
текущим языком является C или C++.  Переменная <CODE>FFLAGS</CODE> будет
использована при компиляции, если текущим языком является Fortran 77.


<P>
Если файл компилируется нормально, то выполняются команды
<VAR>action-if-found</VAR>, иначе выполняется <VAR>action-if-not-found</VAR>.


<P>
Этот макрос не пытается выполнить компоновку программы -- для этого вам
придется использовать макрос
<CODE>AC_TRY_LINK</CODE> (see section <A HREF="#autoconf_ru_5_html_SEC43">Проверка библиотек</A>).
</DL>




<H2><A NAME="SEC43" HREF="#autoconf_ru_toc_html_TOC43">Проверка библиотек</A></H2>
<P>
@anchor{Examining Libraries}


<P>
Для проверки библиотеки, функции или глобальной переменной скрипт
<CODE>configure</CODE> попытается скомпилировать и скомпоновать
небольшую программу, которая использует тестируемые возможности.  Этим
Autoconf отличается от Metaconfig, который обрабатывает файлы
библиотеки C, используя <CODE>nm</CODE> или <CODE>ar</CODE>, чтобы определить,
какие функции
доступны.  Попытка скомпоновать программу с функцией -- более надежный
вариант, поскольку он избавляет от необходимости обрабатывать различные
ключи командной строки и форматы выдачи результатов
программ <CODE>nm</CODE> и <CODE>ar</CODE>, а также выяснять расположение
стандартных библиотек. Этот подход также позволяет конфигурировать
кросс-компиляцию, а также проверять поведение функции во время
выполнения.  С
другой стороны, этот подход может оказаться значительно более медленным, чем однократное
сканирование библиотек.


<P>
Компоновщики в нескольких существующих системах не возвращают статус
ошибки, если не могут найти какие-либо символы при компоновке.  Эта ошибка делает
невозможным использование на таких системах скриптов настройки, созданных
Autoconf.  Однако, некоторым из них могут быть заданы ключи, которые
позволяют получить правильный статус завершения работы. 
Эту проблему в настоящий момент Autoconf не может обработать
автоматически. Если пользователь столкнется с таким, то он может
решить эту проблему установкой переменной среды <CODE>LDFLAGS</CODE>,
передавая компоновщику необходимые ключи командной строки (например,
<SAMP>`-Wl,-dn'</SAMP> на MIPS RISC/OS).


<P>
Макрос <CODE>AC_TRY_LINK</CODE> используется для компиляции тестовой программы
для проверки функций и глобальных переменных. Он также используется
макросом <CODE>AC_CHECK_LIB</CODE> для проверки библиотек
(see section <A HREF="#autoconf_ru_4_html_SEC25">Файлы библиотек</A>), временно добавляя проверяемую библиотеку в
переменную <CODE>LIBS</CODE> и пытаясь скомпоновать маленькую программу.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TRY_LINK</B> <I>(<VAR>includes</VAR>, <VAR>function-body</VAR>, [<VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_5_html_IDX400"></A>
<A NAME="autoconf_ru_5_html_IDX401"></A>
В зависимости от текущего языка (see section <A HREF="#autoconf_ru_5_html_SEC51">Выбор языка</A>), создается
тестовая программа, для того чтобы выяснить, может ли быть
скомпилирована и скомпонована функция, чье тело состоит из аргумента
<VAR>function-body</VAR>.


<P>
Для C и C++, <VAR>includes</VAR> является любыми директивами <CODE>#include</CODE>, в
которых нуждается код в <VAR>function-body</VAR> (параметр <VAR>includes</VAR> будет 
проигнорирован, если текущим языком является Fortran 77). Этот макрос
при компиляции помимо переменной <CODE>CPPFLAGS</CODE>
также использует переменные <CODE>CFLAGS</CODE> или <CODE>CXXFLAGS</CODE>, если 
текущим языком является C или C++.  Переменная <CODE>FFLAGS</CODE> будет
использована при компиляции, если текущим языком является Fortran 77. 
Однако в любом случае при компоновке будут использованы
переменные <CODE>LDFLAGS</CODE> и <CODE>LIBS</CODE>.


<P>
Если файл компилируется и компонуется, то выполняются команды
<VAR>action-if-found</VAR>, в противном случае ---
<VAR>action-if-not-found</VAR>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TRY_LINK_FUNC</B> <I>(<VAR>function</VAR>, [<VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_5_html_IDX402"></A>
<A NAME="autoconf_ru_5_html_IDX403"></A>
В зависимости от текущего языка see section <A HREF="#autoconf_ru_5_html_SEC51">Выбор языка</A>), создается тестовая
программа для того, чтобы убедиться, что программа, чье тело состоит их
прототипа и вызова <VAR>function</VAR>, может быть скомпилирована и
скомпонована.


<P>
Если файл компилируется и компонуется без ошибок, то выполняется код
<VAR>action-if-found</VAR>, в противном случае выполняется
<VAR>action-if-not-found</VAR>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TRY_LINK_FUNC</B> <I>(<VAR>function</VAR>, [<VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>]])</I>
<DD><A NAME="autoconf_ru_5_html_IDX404"></A>
<A NAME="autoconf_ru_5_html_IDX405"></A>
Этот макрос пробует скомпилировать и скомпоновать маленькую программу,
которая компонуется с <VAR>function</VAR>. Если файл компилируется и
компонуется без ошибок, то запускается код командного процессора
<VAR>action-if-found</VAR>, в противном случае выполняется
<VAR>action-if-not-found</VAR>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_COMPILE_CHECK</B> <I>(<VAR>echo-text</VAR>, <VAR>includes</VAR>, <VAR>function-body</VAR>, <VAR>action-if-found</VAR> [, <VAR>action-if-not-found</VAR>])</I>
<DD><A NAME="autoconf_ru_5_html_IDX406"></A>
<A NAME="autoconf_ru_5_html_IDX407"></A>
Этот макрос является устаревшей версией <CODE>AC_TRY_LINK</CODE>.  Он
отличается тем, что выдает сообщение <SAMP>`checking for
<VAR>echo-text</VAR>'</SAMP> в поток стандартного вывода, в том случае, если аргумент
<VAR>echo-text</VAR> не является пустым.  Вместо этого макроса для выдачи
сообщений используйте <CODE>AC_MSG_CHECKING</CODE> и <CODE>AC_MSG_RESULT</CODE>
(see section <A HREF="#autoconf_ru_6_html_SEC58">Выдача сообщений</A>).
</DL>




<H2><A NAME="SEC44" HREF="#autoconf_ru_toc_html_TOC44">Проверка поведения во время выполнения</A></H2>
<P>
@anchor{Run Time}


<P>
Иногда вам необходимо определить, как система работает во время
выполнения программы, например, имеет ли заданная функция определенные
возможности или ошибки.  Старайтесь выполнять такие проверки
непосредственно во время выполнения программы, а не во время
конфигурирования.   Такие вещи, как расположение байтов в памяти машины
также следует проверять при
инициализации программы.


<P>
Если вам действительно необходимо протестировать поведение программы во
время выполнения при конфигурировании, то вы можете написать тестовую программу
для определения результатов, откомпилировать и запустить ее с помощью
макроса <CODE>AC_TRY_RUN</CODE>.  Если возможно, избегайте запуска тестовых программ,
поскольку их использование мешает пользователям
настраивать ваш пакет для кросс-компиляции.




<H3><A NAME="SEC45" HREF="#autoconf_ru_toc_html_TOC45">Запуск тестовых программ</A></H3>
<P>
@anchor{Test Programs}


<P>
Используйте нижеописанный макрос, если вам нужно при конфигурировании
протестировать поведение системы во время исполнения.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_TRY_RUN</B> <I>(<VAR>program</VAR>, [<VAR>action-if-true</VAR> [, <VAR>action-if-false</VAR> [, <VAR>action-if-cross-compiling</VAR>]]])</I>
<DD><A NAME="autoconf_ru_5_html_IDX408"></A>
<A NAME="autoconf_ru_5_html_IDX409"></A>
Аргумент <VAR>program</VAR> является текстом программы на языке C, для
которой выполняются подстановки переменных командного процессора, а
также обратных кавычек и обратных слэшей. Если она компилируется и
компонуется, и при выполнении возвращает код завершения 0, то
выполняется код командного процессора <VAR>action-if-true</VAR>. В противном
случае выполняются команды <VAR>action-if-false</VAR>; код завершения
тестовой программы доступен в переменной командного процессора
<SAMP>`$?'</SAMP>. При компиляции этот макрос использует переменные
<CODE>CFLAGS</CODE> или <CODE>CXXFLAGS</CODE>, <CODE>CPPFLAGS</CODE>, <CODE>LDFLAGS</CODE> и
<CODE>LIBS</CODE>.


<P>
Если используемый компилятор C не создает исполняемых файлов, которые
запускаются на той же системе, где выполняется скрипт <CODE>configure</CODE>, то
тестовая программа не запускается. Если задан аргумент
<VAR>action-if-cross-compiling</VAR>, то вместо программы запускается код,
заданный в этом аргументе.  В противном случае <CODE>configure</CODE>
выдает сообщение об ошибке и прекращает работу.
</DL>


<P>
Постарайтесь сделать значения по умолчанию пессимистическими, если
кросс-компиляция не позволяет проверить поведение времени выполнения.
Это можно сделать, передав макросу <CODE>AC_TRY_RUN</CODE> необязательный
последний аргумент.  <CODE>autoconf</CODE> выдает предупреждающее
сообщение при создании <CODE>configure</CODE> каждый раз, когда встречается
вызов макроса <CODE>AC_TRY_RUN</CODE> с незаданным аргументом
<VAR>action-if-cross-compiling</VAR>. Вы можете игнорировать это
предупреждение, хотя пользователи не смогут настроить ваш пакет для
кросс-компиляции. Несколько макросов, поставляемых в составе Autoconf,
выдают это предупреждающее сообщение.


<P>
Для конфигурирования для кросс-компиляции вы также можете выбрать значения
параметров, основываясь на каноническом имени системы (see section <A HREF="#autoconf_ru_8_html_SEC67">Ручная настройка</A>). В качестве альтернативы, вы можете установить правильное
значение для целевой системы в кэш-файле с результатами тестов
(see section <A HREF="#autoconf_ru_6_html_SEC55">Кэширование результатов</A>).


<P>
Для задания значений по умолчанию для вызовов макроса <CODE>AC_TRY_RUN</CODE>,
которые включены в другие макросы (включая те, которые поставляются с
Autoconf), вы можете вызвать макрос <CODE>AC_PROG_CC</CODE> до их вызова.
Затем, если переменная командного процессора <CODE>cross_compiling</CODE>
имеет значение <SAMP>`yes'</SAMP>, то используется альтернативный метод для
получения результатов, вместо вызова макросов.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_C_CROSS</B>
<DD><A NAME="autoconf_ru_5_html_IDX410"></A>
<A NAME="autoconf_ru_5_html_IDX411"></A>
Этот макрос является устаревшим; он ничего не делает.
</DL>




<H3><A NAME="SEC46" HREF="#autoconf_ru_toc_html_TOC46">Рекомендации по написанию тестовых программ</A></H3>
<P>
@anchor{Guidelines}


<P>
Тестовые программы не должны выдавать никаких сообщений на  поток стандартного
вывода.  Они должны возвращать значение 0 в случае удачи и ненулевое
значение --- в противном случае, так что удачное выполнение можно легко отличить
от выдачи дампа при крахе программы или другого неудачного
выполнения; нарушение доступа к памяти и другие сбои возвращают
ненулевой статус завершения. Тестовые программы должны завершать работу
с помощью вызова функции <CODE>exit</CODE>, а не с помощью оператора
<CODE>return</CODE> из подпрограммы <CODE>main</CODE>, поскольку на некоторых
системах (по крайней мере, на старых машинах Sun) в подпрограмме
<CODE>main</CODE> игнорируется аргумент оператора <CODE>return</CODE>.


<P>
Тестовые программы могут использовать директивы <CODE>#if</CODE> или
<CODE>#ifdef</CODE> для проверки значений макросов препроцессора, определенных
уже проведенными тестами. Например, если вы вызовете
<CODE>AC_HEADER_STDC</CODE>, то далее в <TT>`configure.in'</TT> можно
использовать тестовую программу, которая в зависимости от условия
включает заголовочные файлы ANSI C:



<PRE>
#if STDC_HEADERS
# include &#60;stdlib.h&#62;
#endif
</PRE>

<P>
Если тестовой программе нужно использовать или создать файл
данных, то задавайте этому файлу имя, которое начинаются с
<TT>`conftest'</TT>, например, <TT>`conftestdata'</TT>.  Скрипт <CODE>configure</CODE> 
после выполнения тестовых программ а также в случае прерывания работы
скрипта 
удаляет эти файлы с помощью команды <SAMP>`rm -rf conftest*'</SAMP>.




<H3><A NAME="SEC47" HREF="#autoconf_ru_toc_html_TOC47">Тестовые функции</A></H3>
<P>
@anchor{Test Functions}


<P>
Объявления функций в тестовой программе должны быть с помощью условной
компиляции объявлены как для компилятора C++, так и для компилятора C. 
На практике, однако, тестовые программы
редко нуждаются в функциях, которым передаются аргументы.



<PRE>
#ifdef __cplusplus
foo(int i)
#else
foo(i) int i;
#endif
</PRE>

<P>
Функции, которые объявляются в тестовых программах, должны быть также
объявлены с применением прототипов <SAMP>`extern "C"'</SAMP>, для использования
с компиляторами C++.  Убедитесь, что вы не включаете заголовочные файлы, содержащие
конфликтующие прототипы.



<PRE>
#ifdef __cplusplus
extern "C" void *malloc(size_t);
#else
char *malloc();
#endif
</PRE>

<P>
Если тестовая программа вызывает функцию с неправильными параметрами
(просто чтобы убедиться, что такая существует), то организуйте
программу таким образом, чтобы эта функция никогда не была вызвана.  Это
можно сделать путем вызова ее в другой функции, которая никогда не
вызывается.  Вы не можете сделать это, поместив вызов функции после
вызова функции <CODE>exit</CODE>, поскольку GCC версии 2 знает о том, что
функция <CODE>exit</CODE> никогда не возвращается в точку вызова, и оптимизирует
любой код, который следует за ней в том же блоке.


<P>
Если вы включаете какой-либо заголовочный файл, то убедитесь, что
функции, находящиеся в этих файлах, вызываются с правильным числом
параметров, даже если все эти параметры равны нулю.  Это нужно, чтобы
избежать ошибок компиляции из-за
несоответствия прототипов. GCC версии 2 имеет внутренние прототипы
нескольких функций, которые он встраивает в код автоматически; например, 
к таким относится
<CODE>memcpy</CODE>. Для того, чтобы избежать ошибок при их проверке, либо
передавайте этим функциям правильное количество аргументов, либо
повторно объявите эти функции с другим типом возвращаемого значения
(например, как <CODE>char</CODE>).




<H2><A NAME="SEC48" HREF="#autoconf_ru_toc_html_TOC48">Переносимое программирование на языке командного процессора</A></H2>
<P>
@anchor{Portable Shell}


<P>
Есть определенные техники программирования скриптов командного
процессора, которых вам следует избегать, чтобы ваш код был переносим.  
Bourne shell и совместимые с ним процессора, такие как Bash и Korn,
развивались в течении многих лет, но для того, чтобы избежать
трудностей, не используйте возможностей, которые были добавлены после
выпуска UNIX версии 7, примерно в 1977 году.  Вы не должны использовать
функции командного процессора, псевдонимы (aliases), отрицательные классы
символов и другие возможности, которые присутствуют не во всех версиях
командных процессоров, совместимых с процессором Bourne; ограничьте себя
общим знаменателем. Даже <CODE>unset</CODE> не поддерживается всеми командными
процессорами! При указании интерпретатора ставьте пробел после символов
<SAMP>`#!'</SAMP>, например,



<PRE>
#! /usr/bin/perl
</PRE>

<P>
Если вы уберете пробел перед путевым именем, то системы типа
4.2BSD, такие как Sequent DYNIX, будут просто игнорировать эту строку,
поскольку они интерпретируют <SAMP>`#! /'</SAMP> как 4-х байтовое магическое
число.


<P>
Набор внешних программ, которые можно запускать из скрипта
<CODE>configure</CODE>, довольно мал.  See section `Utilities in Makefiles' in <CITE>GNU Coding Standards</CITE>,
ниже приведен список этих программ.
Это ограничение позволяет пользователям начать с небольшого количества
программ, постепенно компилируя остальные, и избежать слишком большого
числа зависимостей между пакетами.


<P>
Многие такие внешние утилиты обладают общим подмножеством переносимых
возможностей;
например, не полагайтесь на то, что команда <CODE>ln</CODE> имеет ключ
<SAMP>`-f'</SAMP>, а <CODE>cat</CODE> вообще имеет какие-либо ключи.  Скрипты <CODE>sed</CODE> не
должны содержать комментариев или использовать метки длиннее 8
символов. Не используйте <SAMP>`grep -s'</SAMP> для запрещения вывода, поскольку
<SAMP>`grep -s'</SAMP> на System V не запрещает вывод, а запрещает только
сообщения об ошибках. Вместо этого ключа лучше перенаправьте стандартные
потоки вывода и сообщений об ошибках (сообщения о несуществующих файлах)
программы <CODE>grep</CODE> на устройство <TT>`/dev/null'</TT>. Проверяйте код
возврата <CODE>grep</CODE>, чтобы узнать, произошло ли совпадение.




<H2><A NAME="SEC49" HREF="#autoconf_ru_toc_html_TOC49">Тестирование значений и файлов</A></H2>
<P>
@anchor{Testing Values and Files}


<P>
Скрипты <CODE>configure</CODE> должны проверять различные свойства разных
файлов и строк.  Вот небольшой список проблем с переносимостью, которых
нужно избегать при написании проверок.


<P>
Программа <CODE>test</CODE> используется для выполнения многих проверок файлов
и строк. Она часто запускается альтернативным способом, через имя
<SAMP>`['</SAMP>, но использование этого имени в коде Autoconf приведет к
ошибкам, потому что этот символ является символом кавычек в <CODE>m4</CODE>.


<P>
Если вам необходимо выполнить несколько проверок, используя команду
<CODE>test</CODE>, то объединяйте их с помощью операторов командного
процессора <SAMP>`&#38;&#38;'</SAMP> и <SAMP>`||'</SAMP>, а не используйте операторы программы
<CODE>test</CODE> <SAMP>`-a'</SAMP> и <SAMP>`-o'</SAMP>. На System V приоритеты операторов
<SAMP>`-a'</SAMP> и <SAMP>`-o'</SAMP> неправильно соотносятся с приоритетами унарных
операторов; из-за этого POSIX не определяет эти операторы, так что их использование
приводит к непереносимому коду.  Если вы в одном выражении используете как
<SAMP>`&#38;&#38;'</SAMP>, так и <SAMP>`||'</SAMP>, то помните, что они имеют одинаковый
приоритет.


<P>
Скрипты <CODE>configure</CODE>, поддерживающие
кросс-компиляцию, не должны не делать ничего, что тестирует свойства
системы, на которой выполняется скрипт.  Но иногда вам может понадобиться
проверить, существует ли определенный файл. Чтобы сделать это
используйте команды <SAMP>`test -f'</SAMP> или <SAMP>`test -r'</SAMP>. Не используйте
команду <SAMP>`test -x'</SAMP>, поскольку 4.3BSD не поддерживает ее.


<P>
Другой непереносимой конструкцией программирования командного процессора
является



<PRE>
<VAR>var</VAR>=${<VAR>var</VAR>:-<VAR>value</VAR>}
</PRE>

<P>


<P>
Она предназначена для установки значения переменной <VAR>var</VAR> равным
<VAR>value</VAR>, но только в тех случаях, когда переменная еще не имеет
значения.  Если <VAR>var</VAR> уже было присвоено значение, даже равное
пустой строке, то оно остается неизменным.  Старые командные процессоры
BSD, включая Ultrix-версию <CODE>sh</CODE>, не воспринимают символ двоеточия,
выдают ошибку и прекращают работу. Переносимым эквивалентом данной
конструкции является



<PRE>
: ${<VAR>var</VAR>=<VAR>value</VAR>}
</PRE>



<H2><A NAME="SEC50" HREF="#autoconf_ru_toc_html_TOC50">Множество вариантов</A></H2>
<P>
@anchor{Multiple Cases}


<P>
Некоторые операции выполняются несколькими разными способами в зависимости от
используемого варианта UNIX.  Их проверка требует "оператора выбора".
Autoconf напрямую не обеспечивает такой оператор, однако достаточно
легко эмулировать его, используя переменную командного
процессора для запоминания, найден ли уже пригодный способ.


<P>
Вот пример, который использует переменную <CODE>fstype</CODE> для отслеживания
того, остались ли варианты, которые необходимо проверить.



<PRE>
AC_MSG_CHECKING(как получить тип файловой системы)
fstype=no
# Порядок этих действий является важным.
AC_TRY_CPP([#include &#60;sys/statvfs.h&#62;
#include &#60;sys/fstyp.h&#62;], AC_DEFINE(FSTYPE_STATVFS) fstype=SVR4)
if test $fstype = no; then
AC_TRY_CPP([#include &#60;sys/statfs.h&#62;
#include &#60;sys/fstyp.h&#62;], AC_DEFINE(FSTYPE_USG_STATFS) fstype=SVR3)
fi
if test $fstype = no; then
AC_TRY_CPP([#include &#60;sys/statfs.h&#62;
#include &#60;sys/vmount.h&#62;], AC_DEFINE(FSTYPE_AIX_STATFS) fstype=AIX)
fi
# (остальные варианты пропущены в этом примере)
AC_MSG_RESULT($fstype)
</PRE>



<H2><A NAME="SEC51" HREF="#autoconf_ru_toc_html_TOC51">Выбор языка</A></H2>
<P>
@anchor{Language Choice}


<P>
Пакеты, использующие одновременно и C, и C++, нуждаются в проверке
возможностей обоих компиляторов. Созданные Autoconf скрипты
<CODE>configure</CODE> по умолчанию выполняют проверку возможностей
компилятора C.  Нижеописанные макросы определяют, компилятор какого языка
будет использоваться в тестах, которые последуют за вызовом этого макроса в
<TT>`configure.in'</TT>.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_LANG_C</B>
<DD><A NAME="autoconf_ru_5_html_IDX412"></A>
<A NAME="autoconf_ru_5_html_IDX413"></A>
Выполняет тесты компиляции, используя переменные <CODE>CC</CODE> и <CODE>CPP</CODE>, 
а также используя расширение <TT>`.c'</TT> для тестовых программ.  Устанавливает
переменную командного процессора <CODE>cross_compiling</CODE> в значение,
вычисленное макросом <CODE>AC_PROG_CC</CODE>, если он был запущен, и в пустое
значение в противном случае.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_LANG_CPLUSPLUS</B>
<DD><A NAME="autoconf_ru_5_html_IDX414"></A>
<A NAME="autoconf_ru_5_html_IDX415"></A>
Выполняет тесты компиляции, используя переменные <CODE>CXX</CODE> и
<CODE>CXXPP</CODE>, а также используя расширение <TT>`.C'</TT> для тестовых
программ. Устанавливает переменную командного процессора
<CODE>cross_compiling</CODE> в значение, вычисленное макросом
<CODE>AC_PROG_CXX</CODE>, если он был запущен, и в пустое значение в противном
случае.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_LANG_FORTRAN77</B>
<DD><A NAME="autoconf_ru_5_html_IDX416"></A>
<A NAME="autoconf_ru_5_html_IDX417"></A>
Выполняет тесты компиляции, используя переменную <CODE>F77</CODE>, а также используя
расширение <TT>`.f'</TT> для тестовых программ. Устанавливает переменную
командного процессора <CODE>cross_compiling</CODE> в значение, вычисленное
макросом <CODE>AC_PROG_F77</CODE>, если он был запущен, и в пустое значение в
противном случае.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_LANG_SAVE</B>
<DD><A NAME="autoconf_ru_5_html_IDX418"></A>
<A NAME="autoconf_ru_5_html_IDX419"></A>
Запоминает в стеке значение текущего языка (установленное макросами
<CODE>AC_LANG_C</CODE>, <CODE>AC_LANG_CPLUSPLUS</CODE> или
<CODE>AC_LANG_FORTRAN77</CODE>).  Не изменяет значение текущего
языка. Используйте этот макрос и <CODE>AC_LANG_RESTORE</CODE> в макросах,
которым необходимо временно переключиться на конкретный язык.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_LANG_RESTORE</B>
<DD><A NAME="autoconf_ru_5_html_IDX420"></A>
<A NAME="autoconf_ru_5_html_IDX421"></A>
Выбирает язык, который был сохранен на вершине стека, где он был
сохранен макросом <CODE>AC_LANG_SAVE</CODE>, и удаляет его со стека. Этот
макрос эквивалентен вызову <CODE>AC_LANG_C</CODE>,
<CODE>AC_LANG_CPLUSPLUS</CODE> или <CODE>AC_LANG_FORTRAN77</CODE>, в зависимости от
того, который из них действовал во время последнего вызова
макроса <CODE>AC_LANG_SAVE</CODE>.


<P>
Не вызывайте этот макрос больше раз, чем было вызовов
<CODE>AC_LANG_SAVE</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_REQUIRE_CPP</B>
<DD><A NAME="autoconf_ru_5_html_IDX422"></A>
<A NAME="autoconf_ru_5_html_IDX423"></A>
Убеждается, что препроцессор, который должен сейчас использоваться, был
найден. Вызывает макрос <CODE>AC_REQUIRE</CODE> (see section <A HREF="#autoconf_ru_7_html_SEC64">Требуемые макросы</A>)
с аргументом, равным либо <CODE>AC_PROG_CPP</CODE>, либо
<CODE>AC_PROG_CXXCPP</CODE>, в зависимости от того, какой язык был выбран.
</DL>


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_4_html">previous</A>, <A HREF="#autoconf_ru_6_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_19_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_18_html">previous</A>, next, last section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC113" HREF="#autoconf_ru_toc_html_TOC113">Индекс макросов</A></H1>
<P>
@anchor{Macro Index}


<P>
Вот алфавитный список макросов Autoconf. Для того, чтобы сделать список
читабельнее, макросы перечислены без префикса
<SAMP>`AC_'</SAMP>.


<P>
Jump to:
<A HREF="#autoconf_ru_19_html_maindex_a">a</A>
-
<A HREF="#autoconf_ru_19_html_maindex_b">b</A>
-
<A HREF="#autoconf_ru_19_html_maindex_c">c</A>
-
<A HREF="#autoconf_ru_19_html_maindex_d">d</A>
-
<A HREF="#autoconf_ru_19_html_maindex_e">e</A>
-
<A HREF="#autoconf_ru_19_html_maindex_f">f</A>
-
<A HREF="#autoconf_ru_19_html_maindex_g">g</A>
-
<A HREF="#autoconf_ru_19_html_maindex_h">h</A>
-
<A HREF="#autoconf_ru_19_html_maindex_i">i</A>
-
<A HREF="#autoconf_ru_19_html_maindex_l">l</A>
-
<A HREF="#autoconf_ru_19_html_maindex_m">m</A>
-
<A HREF="#autoconf_ru_19_html_maindex_o">o</A>
-
<A HREF="#autoconf_ru_19_html_maindex_p">p</A>
-
<A HREF="#autoconf_ru_19_html_maindex_r">r</A>
-
<A HREF="#autoconf_ru_19_html_maindex_s">s</A>
-
<A HREF="#autoconf_ru_19_html_maindex_t">t</A>
-
<A HREF="#autoconf_ru_19_html_maindex_u">u</A>
-
<A HREF="#autoconf_ru_19_html_maindex_v">v</A>
-
<A HREF="#autoconf_ru_19_html_maindex_w">w</A>
-
<A HREF="#autoconf_ru_19_html_maindex_x">x</A>
-
<A HREF="#autoconf_ru_19_html_maindex_y">y</A>
<P>
<H2><A NAME="autoconf_ru_19_html_maindex_a">a</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX371">AIX</A>
<LI><A HREF="#autoconf_ru_15_html_IDX506">ALLOCA</A>
<LI><A HREF="#autoconf_ru_15_html_IDX507">ARG_ARRAY</A>
<LI><A HREF="#autoconf_ru_9_html_IDX489">ARG_ENABLE</A>
<LI><A HREF="#autoconf_ru_9_html_IDX493">ARG_PROGRAM</A>
<LI><A HREF="#autoconf_ru_9_html_IDX485">ARG_WITH</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_b">b</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_7_html_IDX458">BEFORE</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_c">c</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX316">C_BIGENDIAN</A>
<LI><A HREF="#autoconf_ru_4_html_IDX325">C_CHAR_UNSIGNED</A>
<LI><A HREF="#autoconf_ru_4_html_IDX319">C_CONST</A>
<LI><A HREF="#autoconf_ru_5_html_IDX411">C_CROSS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX322">C_INLINE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX328">C_LONG_DOUBLE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX331">C_STRINGIZE</A>
<LI><A HREF="#autoconf_ru_6_html_IDX435">CACHE_CHECK</A>
<LI><A HREF="#autoconf_ru_6_html_IDX437">CACHE_LOAD</A>
<LI><A HREF="#autoconf_ru_6_html_IDX439">CACHE_SAVE</A>
<LI><A HREF="#autoconf_ru_6_html_IDX433">CACHE_VAL</A>
<LI><A HREF="#autoconf_ru_8_html_IDX464">CANONICAL_HOST</A>
<LI><A HREF="#autoconf_ru_8_html_IDX462">CANONICAL_SYSTEM</A>
<LI><A HREF="#autoconf_ru_15_html_IDX508">CHAR_UNSIGNED</A>
<LI><A HREF="#autoconf_ru_4_html_IDX131">CHECK_FILE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX133">CHECK_FILES</A>
<LI><A HREF="#autoconf_ru_4_html_IDX220">CHECK_FUNC</A>
<LI><A HREF="#autoconf_ru_4_html_IDX222">CHECK_FUNCS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX264">CHECK_HEADER</A>
<LI><A HREF="#autoconf_ru_4_html_IDX266">CHECK_HEADERS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX145">CHECK_LIB</A>
<LI><A HREF="#autoconf_ru_4_html_IDX135">CHECK_PROG</A>
<LI><A HREF="#autoconf_ru_4_html_IDX137">CHECK_PROGS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX334">CHECK_SIZEOF</A>
<LI><A HREF="#autoconf_ru_4_html_IDX139">CHECK_TOOL</A>
<LI><A HREF="#autoconf_ru_4_html_IDX314">CHECK_TYPE</A>
<LI><A HREF="#autoconf_ru_6_html_IDX449">CHECKING</A>
<LI><A HREF="#autoconf_ru_5_html_IDX407">COMPILE_CHECK</A>
<LI><A HREF="#autoconf_ru_3_html_IDX8">CONFIG_AUX_DIR</A>
<LI><A HREF="#autoconf_ru_3_html_IDX64">CONFIG_HEADER</A>
<LI><A HREF="#autoconf_ru_3_html_IDX68">CONFIG_SUBDIRS</A>
<LI><A HREF="#autoconf_ru_15_html_IDX509">CONST</A>
<LI><A HREF="#autoconf_ru_15_html_IDX510">CROSS_CHECK</A>
<LI><A HREF="#autoconf_ru_4_html_IDX345">CYGWIN</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_d">d</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX228">DECL_SYS_SIGLIST</A>
<LI><A HREF="#autoconf_ru_4_html_IDX78">DECL_YYTEXT</A>
<LI><A HREF="#autoconf_ru_6_html_IDX425">DEFINE</A>
<LI><A HREF="#autoconf_ru_6_html_IDX427">DEFINE_UNQUOTED</A>
<LI><A HREF="#autoconf_ru_7_html_IDX452">DEFUN</A>
<LI><A HREF="#autoconf_ru_4_html_IDX231">DIR_HEADER</A>
<LI><A HREF="#autoconf_ru_4_html_IDX374">DYNIX_SEQ</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_e">e</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_5_html_IDX397">EGREP_CPP</A>
<LI><A HREF="#autoconf_ru_5_html_IDX395">EGREP_HEADER</A>
<LI><A HREF="#autoconf_ru_9_html_IDX491">ENABLE</A>
<LI><A HREF="#autoconf_ru_15_html_IDX511">ERROR</A>
<LI><A HREF="#autoconf_ru_4_html_IDX347">EXEEXT</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_f">f</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX342">F77_LIBRARY_LDFLAGS</A>
<LI><A HREF="#autoconf_ru_15_html_IDX512">FIND_X</A>
<LI><A HREF="#autoconf_ru_15_html_IDX513">FIND_XTRA</A>
<LI><A HREF="#autoconf_ru_4_html_IDX153">FUNC_ALLOCA</A>
<LI><A HREF="#autoconf_ru_15_html_IDX514">FUNC_CHECK</A>
<LI><A HREF="#autoconf_ru_4_html_IDX158">FUNC_CLOSEDIR_VOID</A>
<LI><A HREF="#autoconf_ru_4_html_IDX161">FUNC_FNMATCH</A>
<LI><A HREF="#autoconf_ru_4_html_IDX164">FUNC_GETLOADAVG</A>
<LI><A HREF="#autoconf_ru_4_html_IDX177">FUNC_GETMNTENT</A>
<LI><A HREF="#autoconf_ru_4_html_IDX180">FUNC_GETPGRP</A>
<LI><A HREF="#autoconf_ru_4_html_IDX183">FUNC_MEMCMP</A>
<LI><A HREF="#autoconf_ru_4_html_IDX186">FUNC_MMAP</A>
<LI><A HREF="#autoconf_ru_4_html_IDX189">FUNC_SELECT_ARGTYPES</A>
<LI><A HREF="#autoconf_ru_4_html_IDX194">FUNC_SETPGRP</A>
<LI><A HREF="#autoconf_ru_4_html_IDX197">FUNC_SETVBUF_REVERSED</A>
<LI><A HREF="#autoconf_ru_4_html_IDX200">FUNC_STRCOLL</A>
<LI><A HREF="#autoconf_ru_4_html_IDX203">FUNC_STRFTIME</A>
<LI><A HREF="#autoconf_ru_4_html_IDX206">FUNC_UTIME_NULL</A>
<LI><A HREF="#autoconf_ru_4_html_IDX209">FUNC_VFORK</A>
<LI><A HREF="#autoconf_ru_4_html_IDX213">FUNC_VPRINTF</A>
<LI><A HREF="#autoconf_ru_4_html_IDX217">FUNC_WAIT3</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_g">g</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_15_html_IDX515">GCC_TRADITIONAL</A>
<LI><A HREF="#autoconf_ru_15_html_IDX516">GETGROUPS_T</A>
<LI><A HREF="#autoconf_ru_15_html_IDX517">GETLOADAVG</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_h">h</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_15_html_IDX518">HAVE_FUNCS</A>
<LI><A HREF="#autoconf_ru_15_html_IDX519">HAVE_HEADERS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX147">HAVE_LIBRARY</A>
<LI><A HREF="#autoconf_ru_15_html_IDX520">HAVE_POUNDBANG</A>
<LI><A HREF="#autoconf_ru_15_html_IDX521">HEADER_CHECK</A>
<LI><A HREF="#autoconf_ru_4_html_IDX238">HEADER_DIRENT</A>
<LI><A HREF="#autoconf_ru_15_html_IDX522">HEADER_EGREP</A>
<LI><A HREF="#autoconf_ru_4_html_IDX244">HEADER_MAJOR</A>
<LI><A HREF="#autoconf_ru_4_html_IDX269">HEADER_STAT</A>
<LI><A HREF="#autoconf_ru_4_html_IDX248">HEADER_STDC</A>
<LI><A HREF="#autoconf_ru_4_html_IDX251">HEADER_SYS_WAIT</A>
<LI><A HREF="#autoconf_ru_4_html_IDX272">HEADER_TIME</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_i">i</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_3_html_IDX6">INIT</A>
<LI><A HREF="#autoconf_ru_15_html_IDX523">INLINE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX336">INT_16_BITS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX376">IRIX_SUN</A>
<LI><A HREF="#autoconf_ru_4_html_IDX378">ISC_POSIX</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_l">l</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_5_html_IDX413">LANG_C</A>
<LI><A HREF="#autoconf_ru_5_html_IDX415">LANG_CPLUSPLUS</A>
<LI><A HREF="#autoconf_ru_5_html_IDX417">LANG_FORTRAN77</A>
<LI><A HREF="#autoconf_ru_5_html_IDX421">LANG_RESTORE</A>
<LI><A HREF="#autoconf_ru_5_html_IDX419">LANG_SAVE</A>
<LI><A HREF="#autoconf_ru_8_html_IDX483">LINK_FILES</A>
<LI><A HREF="#autoconf_ru_15_html_IDX524">LN_S</A>
<LI><A HREF="#autoconf_ru_4_html_IDX339">LONG_64_BITS</A>
<LI><A HREF="#autoconf_ru_15_html_IDX525">LONG_DOUBLE</A>
<LI><A HREF="#autoconf_ru_15_html_IDX526">LONG_FILE_NAMES</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_m">m</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_15_html_IDX527">MAJOR_HEADER</A>
<LI><A HREF="#autoconf_ru_4_html_IDX254">MEMORY_H</A>
<LI><A HREF="#autoconf_ru_4_html_IDX353">MINGW32</A>
<LI><A HREF="#autoconf_ru_4_html_IDX382">MINIX</A>
<LI><A HREF="#autoconf_ru_15_html_IDX528">MINUS_C_MINUS_O</A>
<LI><A HREF="#autoconf_ru_15_html_IDX529">MMAP</A>
<LI><A HREF="#autoconf_ru_15_html_IDX530">MODE_T</A>
<LI><A HREF="#autoconf_ru_6_html_IDX441">MSG_CHECKING</A>
<LI><A HREF="#autoconf_ru_6_html_IDX445">MSG_ERROR</A>
<LI><A HREF="#autoconf_ru_6_html_IDX443">MSG_RESULT</A>
<LI><A HREF="#autoconf_ru_6_html_IDX447">MSG_WARN</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_o">o</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX350">OBJEXT</A>
<LI><A HREF="#autoconf_ru_7_html_IDX460">OBSOLETE</A>
<LI><A HREF="#autoconf_ru_15_html_IDX531">OFF_T</A>
<LI><A HREF="#autoconf_ru_3_html_IDX10">OUTPUT</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_p">p</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX141">PATH_PROG</A>
<LI><A HREF="#autoconf_ru_4_html_IDX143">PATH_PROGS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX355">PATH_X</A>
<LI><A HREF="#autoconf_ru_4_html_IDX357">PATH_XTRA</A>
<LI><A HREF="#autoconf_ru_15_html_IDX532">PID_T</A>
<LI><A HREF="#autoconf_ru_15_html_IDX533">PREFIX</A>
<LI><A HREF="#autoconf_ru_3_html_IDX72">PREFIX_PROGRAM</A>
<LI><A HREF="#autoconf_ru_3_html_IDX74">PREREQ</A>
<LI><A HREF="#autoconf_ru_4_html_IDX82">PROG_AWK</A>
<LI><A HREF="#autoconf_ru_4_html_IDX85">PROG_CC</A>
<LI><A HREF="#autoconf_ru_4_html_IDX89">PROG_CC_C_O</A>
<LI><A HREF="#autoconf_ru_4_html_IDX92">PROG_CPP</A>
<LI><A HREF="#autoconf_ru_4_html_IDX95">PROG_CXX</A>
<LI><A HREF="#autoconf_ru_4_html_IDX99">PROG_CXXCPP</A>
<LI><A HREF="#autoconf_ru_4_html_IDX106">PROG_F77_C_O</A>
<LI><A HREF="#autoconf_ru_4_html_IDX102">PROG_FORTRAN</A>
<LI><A HREF="#autoconf_ru_4_html_IDX109">PROG_GCC_TRADITIONAL</A>
<LI><A HREF="#autoconf_ru_4_html_IDX112">PROG_INSTALL</A>
<LI><A HREF="#autoconf_ru_4_html_IDX118">PROG_LEX</A>
<LI><A HREF="#autoconf_ru_4_html_IDX122">PROG_LN_S</A>
<LI><A HREF="#autoconf_ru_3_html_IDX13">PROG_MAKE_SET</A>
<LI><A HREF="#autoconf_ru_4_html_IDX125">PROG_RANLIB</A>
<LI><A HREF="#autoconf_ru_4_html_IDX128">PROG_YACC</A>
<LI><A HREF="#autoconf_ru_15_html_IDX536">PROGRAM_CHECK</A>
<LI><A HREF="#autoconf_ru_15_html_IDX537">PROGRAM_EGREP</A>
<LI><A HREF="#autoconf_ru_15_html_IDX538">PROGRAM_PATH</A>
<LI><A HREF="#autoconf_ru_15_html_IDX534">PROGRAMS_CHECK</A>
<LI><A HREF="#autoconf_ru_15_html_IDX535">PROGRAMS_PATH</A>
<LI><A HREF="#autoconf_ru_7_html_IDX456">PROVIDE</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_r">r</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_15_html_IDX539">REMOTE_TAPE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX225">REPLACE_FUNCS</A>
<LI><A HREF="#autoconf_ru_7_html_IDX454">REQUIRE</A>
<LI><A HREF="#autoconf_ru_5_html_IDX423">REQUIRE_CPP</A>
<LI><A HREF="#autoconf_ru_15_html_IDX540">RESTARTABLE_SYSCALLS</A>
<LI><A HREF="#autoconf_ru_15_html_IDX541">RETSIGTYPE</A>
<LI><A HREF="#autoconf_ru_3_html_IDX76">REVISION</A>
<LI><A HREF="#autoconf_ru_15_html_IDX542">RSH</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_s">s</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX387">SCO_INTL</A>
<LI><A HREF="#autoconf_ru_4_html_IDX149">SEARCH_LIBS</A>, <A HREF="#autoconf_ru_4_html_IDX151">SEARCH_LIBS</A>
<LI><A HREF="#autoconf_ru_15_html_IDX544">SET_MAKE</A>
<LI><A HREF="#autoconf_ru_15_html_IDX543">SETVBUF_REVERSED</A>
<LI><A HREF="#autoconf_ru_15_html_IDX546">SIZE_T</A>
<LI><A HREF="#autoconf_ru_15_html_IDX545">SIZEOF_TYPE</A>
<LI><A HREF="#autoconf_ru_15_html_IDX550">ST_BLKSIZE</A>
<LI><A HREF="#autoconf_ru_15_html_IDX551">ST_BLOCKS</A>
<LI><A HREF="#autoconf_ru_15_html_IDX552">ST_RDEV</A>
<LI><A HREF="#autoconf_ru_4_html_IDX270">STAT_MACROS_BROKEN</A>, <A HREF="#autoconf_ru_15_html_IDX547">STAT_MACROS_BROKEN</A>
<LI><A HREF="#autoconf_ru_15_html_IDX548">STDC_HEADERS</A>
<LI><A HREF="#autoconf_ru_15_html_IDX549">STRCOLL</A>
<LI><A HREF="#autoconf_ru_4_html_IDX275">STRUCT_ST_BLKSIZE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX278">STRUCT_ST_BLOCKS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX282">STRUCT_ST_RDEV</A>
<LI><A HREF="#autoconf_ru_4_html_IDX288">STRUCT_TIMEZONE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX285">STRUCT_TM</A>
<LI><A HREF="#autoconf_ru_6_html_IDX429">SUBST</A>
<LI><A HREF="#autoconf_ru_6_html_IDX431">SUBST_FILE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX363">SYS_INTERPRETER</A>
<LI><A HREF="#autoconf_ru_4_html_IDX365">SYS_LONG_FILE_NAMES</A>
<LI><A HREF="#autoconf_ru_4_html_IDX368">SYS_RESTARTABLE_SYSCALLS</A>
<LI><A HREF="#autoconf_ru_15_html_IDX553">SYS_SIGLIST_DECLARED</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_t">t</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_15_html_IDX554">TEST_CPP</A>
<LI><A HREF="#autoconf_ru_15_html_IDX555">TEST_PROGRAM</A>
<LI><A HREF="#autoconf_ru_15_html_IDX557">TIME_WITH_SYS_TIME</A>
<LI><A HREF="#autoconf_ru_15_html_IDX556">TIMEZONE</A>
<LI><A HREF="#autoconf_ru_5_html_IDX399">TRY_COMPILE</A>
<LI><A HREF="#autoconf_ru_5_html_IDX393">TRY_CPP</A>
<LI><A HREF="#autoconf_ru_5_html_IDX401">TRY_LINK</A>
<LI><A HREF="#autoconf_ru_5_html_IDX403">TRY_LINK_FUNC</A>, <A HREF="#autoconf_ru_5_html_IDX405">TRY_LINK_FUNC</A>
<LI><A HREF="#autoconf_ru_5_html_IDX409">TRY_RUN</A>
<LI><A HREF="#autoconf_ru_4_html_IDX292">TYPE_GETGROUPS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX295">TYPE_MODE_T</A>
<LI><A HREF="#autoconf_ru_4_html_IDX298">TYPE_OFF_T</A>
<LI><A HREF="#autoconf_ru_4_html_IDX301">TYPE_PID_T</A>
<LI><A HREF="#autoconf_ru_4_html_IDX304">TYPE_SIGNAL</A>
<LI><A HREF="#autoconf_ru_4_html_IDX307">TYPE_SIZE_T</A>
<LI><A HREF="#autoconf_ru_4_html_IDX310">TYPE_UID_T</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_u">u</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_15_html_IDX558">UID_T</A>
<LI><A HREF="#autoconf_ru_4_html_IDX257">UNISTD_H</A>
<LI><A HREF="#autoconf_ru_4_html_IDX261">USG</A>
<LI><A HREF="#autoconf_ru_15_html_IDX559">UTIME_NULL</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_v">v</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_8_html_IDX466">VALIDATE_CACHED_SYSTEM_TUPLE</A>
<LI><A HREF="#autoconf_ru_6_html_IDX451">VERBOSE</A>
<LI><A HREF="#autoconf_ru_15_html_IDX560">VFORK</A>
<LI><A HREF="#autoconf_ru_15_html_IDX561">VPRINTF</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_w">w</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_15_html_IDX562">WAIT3</A>
<LI><A HREF="#autoconf_ru_15_html_IDX563">WARN</A>
<LI><A HREF="#autoconf_ru_9_html_IDX487">WITH</A>
<LI><A HREF="#autoconf_ru_15_html_IDX564">WORDS_BIGENDIAN</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_x">x</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX390">XENIX_DIR</A>
</DIR>
<H2><A NAME="autoconf_ru_19_html_maindex_y">y</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_15_html_IDX565">YYTEXT_POINTER</A>
</DIR>


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_18_html">previous</A>, next, last section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_6_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_5_html">previous</A>, <A HREF="#autoconf_ru_7_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC52" HREF="#autoconf_ru_toc_html_TOC52">Результаты тестов</A></H1>
<P>
@anchor{Results}


<P>
После того, как скрипт <CODE>configure</CODE> выяснил существование какой-либо
возможности, что можно сделать, чтобы записать эту информацию?  Есть
четыре варианта: определить символ препроцессора С, установить
переменную в выходном файле, сохранить результат в кэш-файле для
использования при последующих запусках <CODE>configure</CODE> и выдать
сообщение, позволяющее пользователю узнать результат теста.




<H2><A NAME="SEC53" HREF="#autoconf_ru_toc_html_TOC53">Определение символов препроцессора С</A></H2>
<P>
@anchor{Defining Symbols}


<P>
Обычно после проверки какой-либо возможности устанавливается символ
препроцессора, отражающий результат проверки.  Это происходит при вызове
макроса <CODE>AC_DEFINE</CODE> или
<CODE>AC_DEFINE_UNQUOTED</CODE>.


<P>
По умолчанию макрос <CODE>AC_OUTPUT</CODE> помещает символы, определенные
этими макросами в выходную переменную <CODE>DEFS</CODE>, которая по одному
ключу <SAMP>`-D<VAR>symbol</VAR>=<VAR>value</VAR>'</SAMP> на каждый символ. В отличии от
Autoconf версии 1, переменная <CODE>DEFS</CODE> не
определена в течении работы <CODE>configure</CODE>. Для проверки того,
определен ли уже какой-либо символ препроцессора C,
проверьте значение соответствующей переменной кэша, как показано в этом
примере:



<PRE>
AC_CHECK_FUNC(vprintf, AC_DEFINE(HAVE_VPRINTF))
if test "$ac_cv_func_vprintf" != yes; then
AC_CHECK_FUNC(_doprnt, AC_DEFINE(HAVE_DOPRNT))
fi
</PRE>

<P>
Если был вызван макрос <CODE>AC_CONFIG_HEADER</CODE>, то <CODE>AC_OUTPUT</CODE>
вместо определения переменной <CODE>DEFS</CODE> создает заголовочный файл
путем подстановки правильных значений в директивы <CODE>#define</CODE>,
заданные в файле-шаблоне. See section <A HREF="#autoconf_ru_3_html_SEC15">Заголовочные файлы конфигурации</A>, для
дополнительной информации об этом способе вывода результатов.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_DEFINE</B> <I>(<VAR>variable</VAR> [, <VAR>value</VAR> [, <VAR>description</VAR>]])</I>
<DD><A NAME="autoconf_ru_6_html_IDX424"></A>
<A NAME="autoconf_ru_6_html_IDX425"></A>
Определяет переменную препроцессора C <VAR>variable</VAR>.  Если аргумент
<VAR>value</VAR> задан, то устанавливает переменную <VAR>variable</VAR> в это
значение (без изменений), в противном случае устанавливает ее равной 1.
<VAR>value</VAR> не должен содержать символов перевода строки, а если вы не
используете <CODE>AC_CONFIG_HEADER</CODE>, то он не должен содержать символы
<SAMP>`#'</SAMP>, поскольку <CODE>make</CODE> имеет склонен проглатывать их.  Для
использования переменной командного процессора (которая необходима, если 
нужно определить значение, содержащее символ, являющийся кавычкой в 
<CODE>m4</CODE> <SAMP>`['</SAMP> или <SAMP>`]'</SAMP>) вам следует использовать
<CODE>AC_DEFINE_UNQUOTED</CODE>.  Аргумент <VAR>description</VAR> полезен только в
том случае, если вы используете макрос <CODE>AC_CONFIG_HEADER</CODE>. В этом
случае <VAR>description</VAR> будет помещен в созданный файл
<TT>`config.h.in'</TT> в качества комментария к определению символа; макросу не нужно быть
упомянутым в <TT>`acconfig.h'</TT>. Следующий пример определяет переменную
препроцессора C <CODE>EQUATION</CODE> со значением, равным строковой константе
<SAMP>`"$a &#62; $b"'</SAMP>:



<PRE>
AC_DEFINE(EQUATION, "$a &#62; $b")
</PRE>

</DL>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_DEFINE_UNQUOTED</B> <I>(<VAR>variable</VAR> [, <VAR>value</VAR> [, <VAR>description</VAR>]])</I>
<DD><A NAME="autoconf_ru_6_html_IDX426"></A>
<A NAME="autoconf_ru_6_html_IDX427"></A>
Подобно <CODE>AC_DEFINE</CODE>, но над переменными <VAR>variable</VAR> и
<VAR>value</VAR> выполняется ряд преобразований: подстановка переменных
(<SAMP>`$'</SAMP>), подстановка результатов
выполнения команд (<SAMP>``'</SAMP>) и экранирование символов обратной косой черты
(<SAMP>`\'</SAMP>). Символы одиночных и двойных кавычек в <VAR>value</VAR> не имеют
специального смысла.  Используйте этот макрос вместо <CODE>AC_DEFINE</CODE>,
когда <VAR>variable</VAR> или <VAR>value</VAR> являются переменными командного
процессора. Примеры:



<PRE>
AC_DEFINE_UNQUOTED(config_machfile, "${machfile}")
AC_DEFINE_UNQUOTED(GETGROUPS_T, $ac_cv_type_getgroups)
AC_DEFINE_UNQUOTED(${ac_tr_hdr})
</PRE>

</DL>

<P>
Из-за синтаксических странностей командного процессора Bourne не следует
использовать точку с запятой для разделения вызовов макросов
<CODE>AC_DEFINE</CODE> или <CODE>AC_DEFINE_UNQUOTED</CODE> от вызова других макросов
или кода командного процессора; это может привести к синтаксическим ошибкам
в результирующем скрипте <CODE>configure</CODE>. Вместо этого
используйте пробелы или переводы строк.  То есть, следует писать так:



<PRE>
AC_CHECK_HEADER(elf.h, AC_DEFINE(SVR4) LIBS="$LIBS -lelf")
</PRE>

<P>
либо так:



<PRE>
AC_CHECK_HEADER(elf.h,
  AC_DEFINE(SVR4)
  LIBS="$LIBS -lelf")
</PRE>

<P>
но не так:



<PRE>
AC_CHECK_HEADER(elf.h, AC_DEFINE(SVR4); LIBS="$LIBS -lelf")
</PRE>



<H2><A NAME="SEC54" HREF="#autoconf_ru_toc_html_TOC54">Установка выходных переменных</A></H2>
<P>
@anchor{Setting Output Variables}


<P>
Одним из способов записи результатов тестов является установка
<EM>выходных переменных</EM>, то есть переменных командного
процессора, чьи значения подставляются в файлы, выводимые
<CODE>configure</CODE>. Нижеприведенные макросы используются для создания
новых выходных переменных.  See section <A HREF="#autoconf_ru_6_html_SEC54">Установка выходных переменных</A>, где
приведен список всегда присутствующих выходных переменных.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_SUBST</B> <I>(<VAR>variable</VAR>)</I>
<DD><A NAME="autoconf_ru_6_html_IDX428"></A>
<A NAME="autoconf_ru_6_html_IDX429"></A>
Создает выходную переменную из переменной командного процессора.
Заставляет <CODE>AC_OUTPUT</CODE> подставлять переменную <VAR>variable</VAR> в
выходные файлы (обычно это один или несколько файлов <TT>`Makefile'</TT>).
Это означает, что <CODE>AC_OUTPUT</CODE> будет заменять вхождения
<SAMP>`@<VAR>variable</VAR>@'</SAMP> во входных файлах на значение переменной
командного процессора <VAR>variable</VAR>, которое она имела при вызове макроса
<CODE>AC_OUTPUT</CODE>.  Значение <VAR>variable</VAR> не должно содержать символы
новой строки.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_SUBST_FILE</B> <I>(<VAR>variable</VAR>)</I>
<DD><A NAME="autoconf_ru_6_html_IDX430"></A>
<A NAME="autoconf_ru_6_html_IDX431"></A>
Другой способ создания выходной переменной из переменной командного
процессора. Заставляет <CODE>AC_OUTPUT</CODE> вставить (без подстановок) в
выходные файлы содержимое файла, указанного в переменной командного
процессора <VAR>variable</VAR>. Это означает, что <CODE>AC_OUTPUT</CODE> будет
заменять вхождения <SAMP>`@<VAR>variable</VAR>@'</SAMP> в выходных файлах (таких
как <TT>`Makefile.in'</TT>) на содержимое файла, имя которого содержалось в
переменной <VAR>variable</VAR> в момент вызова макроса
<CODE>AC_OUTPUT</CODE>.  Установите значение этой переменной в <TT>`/dev/null'</TT> для
случаев, когда вставляемый файл отсутствует.


<P>
Этот макрос полезен для вставки фрагментов <TT>`Makefile'</TT>, содержащих
специальные зависимости или другие директивы <CODE>make</CODE> для отдельных
типов машин и целей в результирующие файлы <TT>`Makefile'</TT>. Например,
файл <TT>`configure.in'</TT> может содержать:



<PRE>
AC_SUBST_FILE(host_frag)dnl
host_frag=$srcdir/conf/sun4.mh
</PRE>

<P>
и файл <TT>`Makefile.in'</TT> может содержать:



<PRE>
@host_frag@
</PRE>

</DL>



<H2><A NAME="SEC55" HREF="#autoconf_ru_toc_html_TOC55">Кэширование результатов</A></H2>
<P>
@anchor{Caching Results}


<P>
Чтобы избежать повторяющихся проверок одних и тех же возможностей в
различных скриптах <CODE>configure</CODE> (или при повторных вызовах
одного скрипта), <CODE>configure</CODE> сохраняет результаты многих
проверок в <EM>кэш-файле</EM>. Если при запуске скрипта <CODE>configure</CODE>
тот находит кэш-файл, то считывает результаты, полученные при
предыдущих запусках, и не выполняет проверки, результат которых уже
получен.  Благодаря этому <CODE>configure</CODE> может работать намного
быстрее, чем если бы при каждом запуске приходилось заново выполнять все 
проверки.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CACHE_VAL</B> <I>(<VAR>cache-id</VAR>, <VAR>commands-to-set-it</VAR>)</I>
<DD><A NAME="autoconf_ru_6_html_IDX432"></A>
<A NAME="autoconf_ru_6_html_IDX433"></A>
Проверяет, что доступны результаты проверки, на которые указывает
<VAR>cache-id</VAR>. Если результаты проверки находятся в кэше, и скрипту
<CODE>configure</CODE> не был задан ключ <SAMP>`--quiet'</SAMP> или <SAMP>`--silent'</SAMP>,
то выдать сообщение о том, что результаты были взяты из кэша; в
противном случае запустить код командного процессора
<VAR>commands-to-set-it</VAR>.  Эти команды не должны иметь побочных
эффектов, за исключением установки переменной <VAR>cache-id</VAR>. В
частности, они не должны вызывать макрос <CODE>AC_DEFINE</CODE>; это должен
делать код, следующий за вызовом <CODE>AC_CACHE_VAL</CODE>, основываясь на
кэшированном значении. Они также не должны выдавать никаких сообщений,
например, с помощью макроса <CODE>AC_MSG_CHECKING</CODE>; это надо выполнять
до вызова <CODE>AC_CACHE_VAL</CODE>, так что сообщения будут печататься вне
зависимости от того, будут ли результаты взяты из кэша или будут
определены с помощью выполнения кода командного процессора. Если для
определения значения будет запущен код командного процессора, то
полученное значение будет сохранено в кэш-файле перед тем, как
<CODE>configure</CODE> будет создавать выходные файлы. See section <A HREF="#autoconf_ru_6_html_SEC56">Имена переменных кэша</A>, для того чтобы узнать, как выбрать имя переменной
<VAR>cache-id</VAR>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CACHE_CHECK</B> <I>(<VAR>message</VAR>, <VAR>cache-id</VAR>, <VAR>commands</VAR>)</I>
<DD><A NAME="autoconf_ru_6_html_IDX434"></A>
<A NAME="autoconf_ru_6_html_IDX435"></A>
Обертка для макроса <CODE>AC_CACHE_VAL</CODE>, которая берет на себя заботу о выдаче
сообщений. Этот макрос обеспечивает удобную и короткую форму записи
наиболее распространенных способов
использования этих макросов. Он вызывает макрос <CODE>AC_MSG_CHECKING</CODE>
для выдачи сообщения <VAR>message</VAR>, затем вызывает <CODE>AC_CACHE_VAL</CODE> с
аргументами <VAR>cache-id</VAR> и <VAR>commands</VAR> и, наконец, вызывает
<CODE>AC_MSG_RESULT</CODE> с аргументом <VAR>cache-id</VAR>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CACHE_LOAD</B>
<DD><A NAME="autoconf_ru_6_html_IDX436"></A>
<A NAME="autoconf_ru_6_html_IDX437"></A>
Загружает значения из существующего кэш-файла, или создает новый, если
кэш-файл не найден.  Автоматически вызывается из макроса <CODE>AC_INIT</CODE>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CACHE_SAVE</B>
<DD><A NAME="autoconf_ru_6_html_IDX438"></A>
<A NAME="autoconf_ru_6_html_IDX439"></A>
Записывает все кэшированные значения в кэш-файл.  Этот макрос автоматически
из макроса <CODE>AC_OUTPUT</CODE>, но полезно бывает вызывать
<CODE>AC_CACHE_SAVE</CODE> в ключевых точке файла <TT>`configure.in'</TT>.  При
это кэш сохраняется на тот случай, если работа скрипта <TT>`configure'</TT>
будет прервана.
</DL>




<H3><A NAME="SEC56" HREF="#autoconf_ru_toc_html_TOC56">Имена переменных кэша</A></H3>
<P>
@anchor{Cache Variable Names}


<P>
Имена переменных кэша должны иметь следующий формат:



<PRE>
<VAR>package-prefix</VAR>_cv_<VAR>value-type</VAR>_<VAR>specific-value</VAR>[_<VAR>additional-options</VAR>]
</PRE>

<P>
Например, <SAMP>`ac_cv_header_stat_broken'</SAMP> или
<SAMP>`ac_cv_prog_gcc_traditional'</SAMP>. Имя переменной состоит из следующих
частей:


<DL COMPACT>

<DT><VAR>package-prefix</VAR>
<DD>
Сокращенное название вашего пакета или организации; с такого же префикса
вы должны начинать локальные макросы Autoconf, но только здесь этот
префикс записывается в нижнем регистре.  Макросы, распространяемые с
Autoconf, используют префикс <SAMP>`ac'</SAMP>.

<DT><CODE>_cv_</CODE>
<DD>
Показывает, что эта переменная командного процессора является
кэшированным значением.

<DT><VAR>value-type</VAR>
<DD>
Соглашение по классификации значений кэша, для создания рациональной
системы наименования. Значения, используемые в Autoconf, перечислены в
section <A HREF="#autoconf_ru_7_html_SEC61">Имена макросов</A>. 

<DT><VAR>specific-value</VAR>
<DD>
Для какого члена класса кэшированных значений применяется данный тест.  Например,
к какой функции (<SAMP>`alloca'</SAMP>), программе (<SAMP>`gcc'</SAMP>) или выходной
переменной (<SAMP>`INSTALL'</SAMP>).

<DT><VAR>additional-options</VAR>
<DD>
Конкретное поведение конкретного члена класса, к которому применяется
этот тест. Например, <SAMP>`broken'</SAMP> ("сломано") или <SAMP>`set'</SAMP>
("установлено").  Эта часть имени может быть опущена.
</DL>

<P>
Значения кэшированных переменных не могут содержать переводы строк.
Обычно их значения являются логическими значениями (<SAMP>`yes'</SAMP> или
<SAMP>`no'</SAMP>) или именами файлов или функций, поэтому это ограничение не
критично.




<H3><A NAME="SEC57" HREF="#autoconf_ru_toc_html_TOC57">Кэш-файлы</A></H3>
<P>
@anchor{Cache Files}


<P>
Кэш-файл --- это скрипт командного процессора, который хранит
результаты тестов конфигурации, проведенных на одной системе, так что они
могут совместно использоваться разными скриптами настройки, или при
нескольких запусках одного и того же скрипта configure.  На других
системах этот файл использовать бесполезно.  Если содержимое этого файла по
некоторым причинам является неверным, то пользователь может удалить
или отредактировать его.


<P>
По умолчанию в качестве кэш-файла <SAMP>`configure'</SAMP> использует файл
<TT>`./config.cache'</TT>, создавая его, если он не существует.
<CODE>configure</CODE> распознает ключ командной строки
<SAMP>`--cache-file=<VAR>file</VAR>'</SAMP>, который позволяет использовать другой
кэш-файл; этот ключ используется <CODE>configure</CODE>, когда он вызывает
скрипты <CODE>configure</CODE>, находящиеся в подкаталогах, так что они
используют общий кэш. See section <A HREF="#autoconf_ru_3_html_SEC18">Настройка других пакетов, находящихся в подкаталогах</A>, где описано, как задавать 
подкаталоги с помощью макроса <CODE>AC_CONFIG_SUBDIRS</CODE>.


<P>
Использование ключа <SAMP>`--cache-file=/dev/null'</SAMP> запрещает кэширование,
например, для отладки <CODE>configure</CODE>.  Скрипт <TT>`config.status'</TT>
смотрит на кэш-файл только если запустить его с ключом <SAMP>`--recheck'</SAMP>, 
чтобы повторно выполнить <CODE>configure</CODE>.  Если вы
предчувствуете долгий период отладки, то можете запретить загрузку и
сохранение кэша путем переопределения макросов работы с кэшем в начале
<TT>`configure.in'</TT>:



<PRE>
define([AC_CACHE_LOAD], )dnl
define([AC_CACHE_SAVE], )dnl
AC_INIT(whatever)
 ... rest of configure.in ...
</PRE>

<P>
Попытка распространения кэш-файлов для определенных типов систем неверна 
в корне.  Пытаясь сделать это, вы получаете полную свободу совершать
ошибки, а также сталкиваетесь с массой административных проблем,
связанных с поддержкой этих файлов.  Для возможностей, которые нельзя
определить автоматически, используйте стандартный способ канонического
типа системы и компоновки файлов (see section <A HREF="#autoconf_ru_8_html_SEC67">Ручная настройка</A>).


<P>
На отдельной системе кэш-файл постепенно будет накапливать результаты
запусков скрипта <CODE>configure</CODE>; первоначально он вообще не будет
существовать. Запуск <CODE>configure</CODE> объединяет новые кэшированные
результаты с уже существующим кэш-файлом. Для того, чтобы сделать работу
скрипта более простой, скрипт инициализации на данной машине, может
указать общесистемный кэш-файл, который будет использоваться вместо
используемого по умолчанию, поскольку каждый раз используется один и
тот же компилятор С (see section <A HREF="#autoconf_ru_9_html_SEC80">Установка значений по умолчанию для машины</A>).
 
Если ваш скрипт, или макрос, вызываемые из <TT>`configure.in'</TT>,
прерывает процесс настройки, то полезно будет сохранить
кэшированные данные несколько раз в ключевых точках скрипта.  Делая это,
вы уменьшите время, затраченное при перезапуске скрипта конфигурации
после исправления ошибки, которая вызвала предыдущий останов
работы.



<PRE>
 ... AC_INIT, etc. ...
dnl проверки программ
AC_PROG_CC
AC_PROG_GCC_TRADITIONAL
 ... дополнительные проверки программ...
AC_CACHE_SAVE

dnl проверка библиотек
AC_CHECK_LIB(nsl, gethostbyname)
AC_CHECK_LIB(socket, connect)
 ... другие проверки библиотек ...
AC_CACHE_SAVE

dnl Might abort...
AM_PATH_GTK(1.0.2, , exit 1)
AM_PATH_GTKMM(0.9.5, , exit 1)
</PRE>



<H2><A NAME="SEC58" HREF="#autoconf_ru_toc_html_TOC58">Выдача сообщений</A></H2>
<P>
@anchor{Printing Messages}


<P>
Скрипты <CODE>configure</CODE> должны сообщать пользователям различную
информацию.  Следующие макросы различными способами выдают
сообщения.  Аргументы для каждого из макросов помещаются в двойные
кавычки, используемые командным процессором, так что в этих аргументах
будет выполняться подстановка переменных и специальных символов.  Вы можете
напечатать сообщение, содержащее запятую, поместив сообщение в кавычки,
используемые программой <CODE>m4</CODE>:



<PRE>
AC_MSG_RESULT([never mind, I found the BASIC compiler])
</PRE>

<P>
Все эти макросы являются надстройками над командой
<CODE>echo</CODE>.  Скрипты <CODE>configure</CODE> должны крайне редко использовать
команду
<CODE>echo</CODE> для выдачи сообщения пользователю. Использование этих
макросов позволяет легко изменить способ, каким выдается каждый из типов
сообщений; такие изменения можно будет внести в определение макроса, и
все вызовы этого макроса изменят свой вид автоматически.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_MSG_CHECKING</B> <I>(<VAR>feature-description</VAR>)</I>
<DD><A NAME="autoconf_ru_6_html_IDX440"></A>
<A NAME="autoconf_ru_6_html_IDX441"></A>
Уведомляет пользователя о том, что <CODE>configure</CODE> проверяет конкретную
возможность.  Этот макрос печатает сообщение, которое начинается с
<SAMP>`checking '</SAMP> и заканчивается <SAMP>`...'</SAMP> без перехода на новую
строку. Вслед за вызовом этого макроса следует использовать макрос
<CODE>AC_MSG_RESULT</CODE>, который выдает результат проверки и символ перевода
строки.  Аргумент <VAR>feature-description</VAR> должен содержать что-нибудь
типа <SAMP>`понимает ли компилятор Fortran комментарии в стиле C++'</SAMP>
или <SAMP>`for c89'</SAMP>.


<P>
Этот макрос ничего не выводит, если <CODE>configure</CODE> запущен с ключами
<SAMP>`--quiet'</SAMP> или <SAMP>`--silent'</SAMP>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_MSG_RESULT</B> <I>(<VAR>result-description</VAR>)</I>
<DD><A NAME="autoconf_ru_6_html_IDX442"></A>
<A NAME="autoconf_ru_6_html_IDX443"></A>
Уведомляет пользователя о результатах проверки. Аргумент
<VAR>result-description</VAR> почти всегда содержит значение переменной кэша
для данного теста, обычно равно <SAMP>`yes'</SAMP>, <SAMP>`no'</SAMP> или имени
файла. Этот макрос должен вызываться после вызова <CODE>AC_MSG_CHECKING</CODE>
и аргумент <VAR>result-description</VAR> по смыслу должен дополнять сообщение
выданное вызовом <CODE>AC_MSG_CHECKING</CODE>.


<P>
Этот макрос ничего не выводит, сели <CODE>configure</CODE> запущен с ключами
<SAMP>`--quiet'</SAMP> или <SAMP>`--silent'</SAMP>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_MSG_ERROR</B> <I>(<VAR>error-description</VAR>)</I>
<DD><A NAME="autoconf_ru_6_html_IDX444"></A>
<A NAME="autoconf_ru_6_html_IDX445"></A>
Уведомляет пользователя об ошибке, которая препятствует работе
<CODE>configure</CODE>. Этот макрос печатает сообщение об ошибке в стандартный
поток вывода и заканчивает работу <CODE>configure</CODE> с ненулевым статусом.
Аргумент <VAR>error-description</VAR> должен содержать что-то подобное
<SAMP>`неправильное значение $HOME для \$HOME'</SAMP>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_MSG_WARN</B> <I>(<VAR>problem-description</VAR>)</I>
<DD><A NAME="autoconf_ru_6_html_IDX446"></A>
<A NAME="autoconf_ru_6_html_IDX447"></A>
Уведомляет пользователя <CODE>configure</CODE> о возможной проблеме. Этот
макрос выдает сообщение в стандартный поток сообщений об ошибках; после
этого <CODE>configure</CODE> продолжает свое выполнение, так что макросы,
вызвавший <CODE>AC_MSG_WARN</CODE> должен предоставить действия по умолчанию
для ситуаций, о которых он выдавал предупреждения. Аргумент
<VAR>problem-description</VAR> должен содержать что-то подобное <SAMP>`кажется
ln -s создает жесткие ссылки'</SAMP>.
</DL>


<P>
Следующие два макроса являются устаревшими и являются альтернативой для
макросов <CODE>AC_MSG_CHECKING</CODE> и <CODE>AC_MSG_RESULT</CODE>.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CHECKING</B> <I>(<VAR>feature-description</VAR>)</I>
<DD><A NAME="autoconf_ru_6_html_IDX448"></A>
<A NAME="autoconf_ru_6_html_IDX449"></A>
Этот макрос подобен <CODE>AC_MSG_CHECKING</CODE>, за исключением того, что он
выдает символ перевода строки после вывода <VAR>feature-description</VAR>.
Он в основном полезен для выдачи общего описания группы проверок,
например:



<PRE>
AC_CHECKING(if stack overflow is detectable)
</PRE>

</DL>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_VERBOSE</B> <I>(<VAR>result-description</VAR>)</I>
<DD><A NAME="autoconf_ru_6_html_IDX450"></A>
<A NAME="autoconf_ru_6_html_IDX451"></A>
Этот макрос подобен <CODE>AC_MSG_RESULT</CODE>, за исключением того, что его
вызов следует за вызовом <CODE>AC_CHECKING</CODE>, а не
<CODE>AC_MSG_CHECKING</CODE>; выдаваемое им сообщение начинается с символа
табуляции. Этот макрос считается устаревшим.
</DL>


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_5_html">previous</A>, <A HREF="#autoconf_ru_7_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_8_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_7_html">previous</A>, <A HREF="#autoconf_ru_9_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC67" HREF="#autoconf_ru_toc_html_TOC67">Ручная настройка</A></H1>
<P>
@anchor{Manual Configuration}


<P>
Некоторые типы свойств не могут быть определены автоматически путем
запуска тестовых программ. Например, детали реализации формата объектных
файлов или специальные ключи, которые необходимо передать компилятору
или компоновщику. Вы можете проверить такие свойства используя
специализированные возможности, такие как заставив <CODE>configure</CODE>
проверить вывод программы <CODE>uname</CODE> или производя поиск библиотек,
специфических для отдельных систем. Однако Autoconf предоставляет
однообразный метод для обработки неопределяемых свойств.




<H2><A NAME="SEC68" HREF="#autoconf_ru_toc_html_TOC68">Указание типа системы</A></H2>
<P>
@anchor{Specifying Names}


<P>
Подобно другим скриптам GNU <CODE>configure</CODE>, созданные Autoconf скрипты
<CODE>configure</CODE> могут делать заключение основываясь на каноническом
имени типа системы, которое имеет форму:



<PRE>
<VAR>cpu</VAR>-<VAR>company</VAR>-<VAR>system</VAR>
</PRE>

<P>
<CODE>configure</CODE> обычно может определить каноническое имя типа системы
на которой он запущен. Для этого он запускает скрипт с именем
<CODE>config.guess</CODE>, который определяет имя, используя команду
<CODE>uname</CODE> или символы определенные препроцессором C.


<P>
В качестве альтернативы, пользователь может указать тип системы как
аргумент командной строки скрипта <CODE>configure</CODE>. Это необходимо
сделать, если вы хотите использовать кросс-компиляцию. В большинстве
сложных случаев кросс-компиляции будут вовлечены три типа систем. Для их
указания используются следующие ключи:


<DL COMPACT>

<DT><CODE>--build=<VAR>build-type</VAR></CODE>
<DD>
тип системы на которой настраивается и компилируется пакет (используется
редко);

<DT><CODE>--host=<VAR>host-type</VAR></CODE>
<DD>
тип системы на которой будет запускаться пакет;

<DT><CODE>--target=<VAR>target-type</VAR></CODE>
<DD>
тип системы для которой утилиты компилятора будут создавать код.
</DL>

<P>
Если пользователь задает <CODE>configure</CODE> неключевой аргумент, то он
используется как значение по умолчанию для всех типов систем, если
только пользователь не указал типы явно для систем с помощью ключей
командной строки. Если типы целевой и собирающей систем не заданы, а
задан тип системы на которой будет запускаться пакет, то они равны
заданному значению. Если вы используете кросс-компиляцию, то вам
необходимо указать в командной строке скрипта <CODE>configure</CODE> имена
используемых вами кросс-утилит, в частности компилятора С, например,



<PRE>
CC=m68k-coff-gcc configure --target=m68k-coff
</PRE>

<P>
<CODE>configure</CODE> распознает короткие алиасы для многих типов систем;
например, в командной строке может быть задано имя <SAMP>`decstation'</SAMP>
вместо <SAMP>`mips-dec-ultrix4.2'</SAMP>. <CODE>configure</CODE> запускает скрипт с
именем <CODE>config.sub</CODE> для канонизации алиасов типов систем.




<H2><A NAME="SEC69" HREF="#autoconf_ru_toc_html_TOC69">Получение канонического типа системы</A></H2>
<P>
@anchor{Canonicalizing}


<P>
Следующие макросы делают тип системы доступным для скриптов
<CODE>configure</CODE>. Они запускают скрипт командного процессора
<CODE>config.guess</CODE> для определения значений для каждого из типов
систем, в которых они нуждаются, и которые пользователь не указал в
командной строке. Они запускают <CODE>config.sub</CODE> для канонизации
заданных пользователем псевдонимов. Если вы используете эти макросы, то вы
должны распространять эти два файла вместе с вашим исходным
кодом. See section <A HREF="#autoconf_ru_3_html_SEC10">Создание выходных файлов</A>, для получения информации о макросе
<CODE>AC_CONFIG_AUX_DIR</CODE>, который вы можете использовать для контроля
того, в каком именно каталоге <CODE>configure</CODE> будет искать эти
файлы.  Если вы не используете ни один из этих макросов, то
<CODE>configure</CODE> игнорирует заданные ключи <SAMP>`--host'</SAMP>,
<SAMP>`--target'</SAMP> и <SAMP>`--build'</SAMP>.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CANONICAL_SYSTEM</B>
<DD><A NAME="autoconf_ru_8_html_IDX461"></A>
<A NAME="autoconf_ru_8_html_IDX462"></A>
Определяет тип системы и устанавливает выходные переменные равными
именам канонических типов систем.  See section <A HREF="#autoconf_ru_8_html_SEC70">Переменные типов систем</A>, где
описано, какие именно переменные устанавливаются этим макросом.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_CANONICAL_HOST</B>
<DD><A NAME="autoconf_ru_8_html_IDX463"></A>
<A NAME="autoconf_ru_8_html_IDX464"></A>
Выполняет часть операций <CODE>AC_CANONICAL_SYSTEM</CODE>, относящуюся к
определению типа системы, на которой будет запускаться пакет. Это все,
что необходимо для программ, которые не входят в набор утилит
компилятора.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_VALIDATE_CACHED_SYSTEM_TUPLE</B> <I>(<VAR>cmd</VAR>)</I>
<DD><A NAME="autoconf_ru_8_html_IDX465"></A>
<A NAME="autoconf_ru_8_html_IDX466"></A>
Если в кэш-файле записан тип системы, не совпадающий с текущим, то
выполняется команда <VAR>cmd</VAR> или печатается стандартное сообщение об
ошибке.
</DL>




<H2><A NAME="SEC70" HREF="#autoconf_ru_toc_html_TOC70">Переменные типов систем</A></H2>
<P>
@anchor{System Type Variables}


<P>
После вызова <CODE>AC_CANONICAL_SYSTEM</CODE> информация о типе системы
содержится в нижеперечисленных выходных переменных.  После
<CODE>AC_CANONICAL_HOST</CODE> устанавливаются только те из перечисленных
переменных, чьи имена начинаются на <CODE>host</CODE>.


<DL COMPACT>

<DT><CODE><CODE>build</CODE>, <CODE>host</CODE>, <CODE>target</CODE></CODE>
<DD>
<A NAME="autoconf_ru_8_html_IDX467"></A>
 <A NAME="autoconf_ru_8_html_IDX468"></A>
 <A NAME="autoconf_ru_8_html_IDX469"></A>
 
канонические имена систем;

<DT><CODE><CODE>build_alias</CODE>, <CODE>host_alias</CODE>, <CODE>target_alias</CODE></CODE>
<DD>
<A NAME="autoconf_ru_8_html_IDX470"></A>
<A NAME="autoconf_ru_8_html_IDX471"></A>
<A NAME="autoconf_ru_8_html_IDX472"></A>
имена, указанные пользователем или канонические имена, если был
использован файл <CODE>config.guess</CODE>;

<DT><CODE><CODE>build_cpu</CODE>, <CODE>build_vendor</CODE>, <CODE>build_os</CODE></CODE>
<DD>
<DT><CODE><CODE>host_cpu</CODE>, <CODE>host_vendor</CODE>, <CODE>host_os</CODE></CODE>
<DD>
<DT><CODE><CODE>target_cpu</CODE>, <CODE>target_vendor</CODE>, <CODE>target_os</CODE></CODE>
<DD>
<A NAME="autoconf_ru_8_html_IDX473"></A>
<A NAME="autoconf_ru_8_html_IDX474"></A>
<A NAME="autoconf_ru_8_html_IDX475"></A>
<A NAME="autoconf_ru_8_html_IDX476"></A>
<A NAME="autoconf_ru_8_html_IDX477"></A>
<A NAME="autoconf_ru_8_html_IDX478"></A>
<A NAME="autoconf_ru_8_html_IDX479"></A>
<A NAME="autoconf_ru_8_html_IDX480"></A>
<A NAME="autoconf_ru_8_html_IDX481"></A>
отдельные части канонического имени (для удобства).
</DL>



<H2><A NAME="SEC71" HREF="#autoconf_ru_toc_html_TOC71">Использование типов систем</A></H2>
<P>
@anchor{Using System Type}


<P>
Как использовать канонический тип системы? Обычно вы используете его в
одном или нескольких операторах <CODE>case</CODE> в <TT>`configure.in'</TT> для
выбора специфических для системы файлов C.  Затем делает ссылки на
файлы, чьи имена содержат информацию о системе, чтобы они назывались также
своим обобщенным именем, например,  <TT>`host.h'</TT> или <TT>`target.c'</TT>.  Шаблоны
в операторе <CODE>case</CODE> могут использовать специальные символы командного процессора
для группировки нескольких вариантов вместе, например как в таком
фрагменте:



<PRE>
case "$target" in
i386-*-mach* | i386-*-gnu*) obj_format=aout emulation=mach bfd_gas=yes ;;
i960-*-bout) obj_format=bout ;;
esac
</PRE>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_LINK_FILES</B> <I>(<VAR>source</VAR>..., <VAR>dest</VAR>...)</I>
<DD><A NAME="autoconf_ru_8_html_IDX482"></A>
<A NAME="autoconf_ru_8_html_IDX483"></A>
Заставляет <CODE>AC_OUTPUT</CODE> сделать ссылку с каждого файла из списка
<VAR>source</VAR> на соответствующий файл с именем <VAR>dest</VAR>. Если это
возможно, то создается символьная ссылка, иначе создается жесткая
ссылка. Имена <VAR>dest</VAR> и <VAR>source</VAR> должны быть заданы относительно
каталога верхнего уровня с исходными текстами или каталога, в котором
происходит сборка. Этот макрос может быть вызван неоднократно.


<P>
Например, такой вызов:



<PRE>
AC_LINK_FILES(config/${machine}.h config/${obj_format}.h, host.h object.h)
</PRE>

<P>
создает в текущем каталоге файл <TT>`host.h'</TT>, который является ссылкой
на <TT>`<VAR>srcdir</VAR>/config/${machine}.h'</TT>, и <TT>`object.h'</TT>, который
является ссылкой на <TT>`<VAR>srcdir</VAR>/config/${obj_format}.h'</TT>.
</DL>


<P>
Вы также можете использовать тип системы, на которой будет запускаться
программа, для поиска утилит кросс-компиляции.  See section <A HREF="#autoconf_ru_4_html_SEC24">Общие программы и проверки файлов</A>, для информации о макросе <CODE>AC_CHECK_TOOL</CODE>, который
выполняет это.


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_7_html">previous</A>, <A HREF="#autoconf_ru_9_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_10_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_9_html">previous</A>, <A HREF="#autoconf_ru_11_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC81" HREF="#autoconf_ru_toc_html_TOC81">Запуск скриптов <CODE>configure</CODE></A></H1>
<P>
@anchor{Invoking configure}


<P>
Ниже находятся рекомендации по настройке пакета, использующего
скрипт <CODE>configure</CODE>.  Эти рекомендации можно включить в файл
<TT>`INSTALL'</TT> вашего пакета.  Текстовая версия файла <TT>`INSTALL'</TT>,
которую вы можете использовать, поставляется с Autoconf.




<H2><A NAME="SEC82" HREF="#autoconf_ru_toc_html_TOC82">Простая установка</A></H2>
<P>
@anchor{Basic Installation}


<P>
Вот основные инструкции по установке.


<P>
Скрипт <CODE>configure</CODE> пытается определить правильные значения для
различных, зависящих от системы переменных, которые используются в
процессе установки. Он использует эти переменные для создания файлов
<TT>`Makefile'</TT> в каждом из каталогов пакета. он также может создавать
один или несколько файлов <TT>`.h'</TT> содержащих зависящие от системы
определения. В заключение, он создает скрипт командного процессора с
именем <TT>`config.status'</TT>, который вы можете в дальнейшем запускать
для воссоздания текущей настройки, также создается файл
<TT>`config.cache'</TT>, который сохраняет результаты тестов, для ускорения
перенастройки, и файл <TT>`config.log'</TT>, содержащий вывод компилятора
(этот файл в основном полезен для отладки <CODE>configure</CODE>).


<P>
Если для компиляции пакета вам необходимо выполнить нетривиальные вещи,
то то пожалуйста попытайтесь определить как <CODE>configure</CODE> мог бы
проверить как выполнить их, и затем пошлите diff-файл или инструкции на
адрес, данный в файле <TT>`README'</TT>, так что они могут быть рассмотрены
для включения в следующий выпуск. Если в некоторых случаях
<TT>`config.cache'</TT> содержит результаты, которые вы не хотите хранить,
то вы можете исправить или удалить его.


<P>
Файл <TT>`configure.in'</TT> используется для создания скрипта <TT>`configure'</TT> 
программой <CODE>autoconf</CODE>. Вам необходимо иметь  <TT>`configure.in'</TT>
только, если вы хотите изменить его или заново создать скрипт 
<TT>`configure'</TT> с помощью более новой версии <CODE>autoconf</CODE>.


<P>
Наиболее простым способом компиляции данного пакета являются следующие
действия:



<OL>
<LI>

перейдите в каталог, содержащий исходный код пакета и наберите
<SAMP>`./configure'</SAMP> в командной строке, для того, чтобы настроить пакет для
вашей системы. Если вы используете <CODE>csh</CODE> на старой версии System V,
то вам может понадобиться набрать <SAMP>`sh ./configure'</SAMP> вместо предыдущего
примера, для того, чтобы не допустить выполнения данного скрипта с помощью 
<CODE>csh</CODE>.

Работа <CODE>configure</CODE> займет некоторое время. В течении выполнения скрипт
выдает некоторые сообщения, о том какие свойства он проверяет.

<LI>

Наберите <SAMP>`make'</SAMP> для компиляции пакета.

<LI>

Вы можете набрать <SAMP>`make check'</SAMP> для запуска любых собственных тестов,
которые поставляются вместе с пакетом.

<LI>

Наберите <SAMP>`make install'</SAMP> для установки программ и файлов данных и
документации.

<LI>

вы можете удалить исполнимые файлы программ и объектные файлы из каталога с
исходными текстами пакета набрав <SAMP>`make clean'</SAMP>. Для удаления файлов
созданных <CODE>configure</CODE> (так что вы можете скомпилировать пакет с
помощью разных компиляторов), наберите <SAMP>`make distclean'</SAMP>. Также
существует цель <SAMP>`make maintainer-clean'</SAMP>, но она в основном
предназначена для разработчиков программного обеспечения. Если вы
используете ее, то вы должны получить все другие программы, для того,
чтобы обновлять файлы, которые поставляются с дистрибутивом.
</OL>



<H2><A NAME="SEC83" HREF="#autoconf_ru_toc_html_TOC83">Компиляторы и ключи</A></H2>
<P>
@anchor{Compilers and Options}


<P>
Некоторые системы требуют необычных ключей для компиляции или
компоновки, о которых скрипт <CODE>configure</CODE> просто не знает. Вы можете
задать начальные значения для переменных <CODE>configure</CODE> установив их в
среде. Используя командный процессор совместимый с процессором Bourne вы
можете задать эти переменные с помощью командной строки, подобной этой:



<PRE>
CC=c89 CFLAGS=-O2 LIBS=-lposix ./configure
</PRE>

<P>
или в системах, в которых имеется программа <CODE>env</CODE>, вы можете
выполнить следующий код:



<PRE>
env CPPFLAGS=-I/usr/local/include LDFLAGS=-s ./configure
</PRE>



<H2><A NAME="SEC84" HREF="#autoconf_ru_toc_html_TOC84">Компиляция для нескольких архитектур</A></H2>
<P>
@anchor{Multiple Architectures}


<P>
Вы можете одновременно скомпилировать пакет для более одного типа
компилятора, поместив объектные файлы для каждой из архитектур в
отдельный каталог. Для того чтобы сделать это, вы должны использовать
такую версию программы <CODE>make</CODE>, которая поддерживают переменную
<CODE>VPATH</CODE>, например, такую как GNU <CODE>make</CODE>. Перейдите в каталог,
в который вы хотите поместить объектные и исполняемые файлы и запустите
оттуда скрипт <CODE>configure</CODE>. <CODE>configure</CODE> автоматически проверит
исходные тексты в каталог, в котором находится <CODE>configure</CODE> в также
в каталоге <TT>`..'</TT>.


<P>
Если вы используете программу <CODE>make</CODE>, которая не поддерживает
переменную <CODE>VPATH</CODE>, то вы должны одновременно компилировать
программу только для одной архитектуры. После того, как вы установили
пакет для конкретной архитектуры, используйте правило <SAMP>`make
distclean'</SAMP> до выполнения настройки для другой архитектуры.




<H2><A NAME="SEC85" HREF="#autoconf_ru_toc_html_TOC85">Имена для установки</A></H2>
<P>
@anchor{Installation Names}


<P>
По умолчанию <SAMP>`make install'</SAMP> установит файлы пакета в
<TT>`/usr/local/bin'</TT>, <TT>`/usr/local/man'</TT>, и т.д.. Вы можете задать
префикс установки, который отличается от <TT>`/usr/local'</TT>. Это
выполняется передачей <CODE>configure</CODE> ключа командной строки
<SAMP>`--prefix=<VAR>path</VAR>'</SAMP>.


<P>
Вы можете указать разные префиксы установки для специфических
архитектуры файлов, и для файлов не зависящих от архитектуры. Если вы
зададите  <CODE>configure</CODE> ключ <SAMP>`--exec-prefix=<VAR>path</VAR>'</SAMP>, то
пакет будет использовать <VAR>path</VAR> как префикс для установки программ и
библиотек. Документация и другие файлы данных будут использовать обычный
префикс.


<P>
В добавок, если вы используете необычное расположение каталогов, то вы
можете задать ключи, подобные <SAMP>`--bindir=<VAR>path</VAR>'</SAMP>, для того,
чтобы указать различные значения для отдельных типов файлов. Запустите
<SAMP>`configure --help'</SAMP> для получения списка каталогов, которые вы
можете задать в командной строке, и списка типов файлов устанавливаемых
в каждый из каталогов.


<P>
Если пакет поддерживает это, то вы можете установить программу с
дополнительными суффиксами или префиксами в имени программы.Это
выполняется заданием <CODE>configure</CODE> ключа
<SAMP>`--program-prefix=<VAR>PREFIX</VAR>'</SAMP> или
<SAMP>`--program-suffix=<VAR>SUFFIX</VAR>'</SAMP>.




<H2><A NAME="SEC86" HREF="#autoconf_ru_toc_html_TOC86">Дополнительные возможности</A></H2>
<P>
@anchor{Optional Features}


<P>
Некоторые пакеты обращают внимание на ключи
<SAMP>`--enable-<VAR>feature</VAR>'</SAMP> переданные <CODE>configure</CODE>, где
<VAR>feature</VAR> показывает дополнительную часть пакета. Они также могут
обращать внимание на ключи <SAMP>`--with-<VAR>package</VAR>'</SAMP>, где
<VAR>package</VAR> является чем-то подобным <SAMP>`gnu-as'</SAMP> или <SAMP>`x'</SAMP> (для X
Window System). В файле <TT>`README'</TT> должны быть описаны распознаваемые
пакетом ключи <SAMP>`--enable-'</SAMP> и <SAMP>`--with-'</SAMP>.


<P>
Для пакетов, которые использую X Window System, <CODE>configure</CODE> обычно
может автоматически найти заголовочные файлы и библиотеки X, однако если
скрипт не смог определить их расположение, то вы можете запустить
<CODE>configure</CODE> с ключами <SAMP>`--x-includes=<VAR>dir</VAR>'</SAMP> и
<SAMP>`--x-libraries=<VAR>dir</VAR>'</SAMP> и указав правильные значения.




<H2><A NAME="SEC87" HREF="#autoconf_ru_toc_html_TOC87">Указание типа системы</A></H2>
<P>
@anchor{System Type}


<P>
Может быть много возможностей, которые <CODE>configure</CODE> не сможет
определить автоматически, но которые нужны для определения типа системы
на которой будет запускать пакет. Обычно <CODE>configure</CODE> может
выполнить определение типа системы, но если в случае неудачи скрипт выдаст
сообщение, говорящее о том, что он не смог определить тип системы, то
задайте тип с помощью ключа <SAMP>`--host=<VAR>type</VAR>'</SAMP>. <VAR>type</VAR> может
являть либо коротким именем, определяющим тип системы, таким как
<SAMP>`sun4'</SAMP>, либо каноническим именем, содержащим 3 поля:



<PRE>
<VAR>cpu</VAR>-<VAR>company</VAR>-<VAR>system</VAR>
</PRE>

<P>
загляните в файл <TT>`config.sub'</TT> для того, чтобы узнать возможные
значения для каждого из полей. Если файл <TT>`config.sub'</TT> не включен в
состав пакета, то данному пакету не нужно знать тип системы.


<P>
Если вы собираете утилиты компилятора для кросс-компиляции, то вы также
можете использовать ключ <SAMP>`--target=<VAR>type</VAR>'</SAMP> для выбора типа
системы, для которой эти утилиты будут создавать код, а также ключ
<SAMP>`--build=<VAR>type</VAR>'</SAMP> для выбора типа системы на которой вы
компилируете пакет.




<H2><A NAME="SEC88" HREF="#autoconf_ru_toc_html_TOC88">Совместное использование значений по умолчанию</A></H2>
<P>
@anchor{Sharing Defaults}


<P>
Если вы хотите чтобы значения по умолчанию для скриптов <CODE>configure</CODE>
использовались совместно, то вы можете создать локальный скрипт с именем
<TT>`config.site'</TT>, который задаст значения по умолчанию для таких
переменных как <CODE>CC</CODE>, <CODE>cache_file</CODE> и
<CODE>prefix</CODE>. <CODE>configure</CODE> ищет
<TT>`<VAR>prefix</VAR>/share/config.site'</TT>, если он существует, а затем 
<TT>`<VAR>prefix</VAR>/etc/config.site'</TT> если он существует. Или вы можете
установить переменную среды <CODE>CONFIG_SITE</CODE> равную пути к этому
скрипту. Предупреждение: не все скрипты <CODE>configure</CODE> производят
поиск этого скрипта.




<H2><A NAME="SEC89" HREF="#autoconf_ru_toc_html_TOC89">Контроль выполнения</A></H2>
<P>
@anchor{Operation Controls}


<P>
<CODE>configure</CODE> распознает следующие ключи командной строки, которые
контролируют как он выполняется.


<DL COMPACT>

<DT><CODE>--cache-file=<VAR>file</VAR></CODE>
<DD>
Использовать и сохранять результаты тестов в файле <VAR>file</VAR> вместо
файла <TT>`./config.cache'</TT>. Для запрещения кэширования установите
<VAR>file</VAR> равным <TT>`/dev/null'</TT>, при отладке <CODE>configure</CODE>.

<DT><CODE>--help</CODE>
<DD>
Выдает список ключей командной строки <CODE>configure</CODE> и прекращает
работу.

<DT><CODE>--quiet</CODE>
<DD>
<DT><CODE>--silent</CODE>
<DD>
<DT><CODE>-q</CODE>
<DD>
Не выдает сообщений о том, какие проверки выполняются. Для запрещения
всего вывода, перенаправьте вывод в файл <TT>`/dev/null'</TT> (сообщения об
ошибках все равно будут отображаться).

<DT><CODE>--srcdir=<VAR>dir</VAR></CODE>
<DD>
Ищет исходный текст пакета в каталоге <VAR>dir</VAR>. Обычно <CODE>configure</CODE>
может автоматически определить этот каталог.

<DT><CODE>--version</CODE>
<DD>
Выдает номер версии Autoconf использовавшейся для создания скрипта
<CODE>configure</CODE> и прекращает работу.
</DL>

<P>
<CODE>configure</CODE> также принимает некоторые другие, не так сильно
полезные ключи.


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_9_html">previous</A>, <A HREF="#autoconf_ru_11_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_9_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_8_html">previous</A>, <A HREF="#autoconf_ru_10_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC72" HREF="#autoconf_ru_toc_html_TOC72">Локальная конфигурация</A></H1>
<P>
@anchor{Site Configuration}


<P>
Скрипты <CODE>configure</CODE> поддерживают несколько видов решений
локальной конфигурации.  Пользователь может указать,
где находятся внешние пакеты программного
обеспечения, включить или отключить дополнительные возможности,
установить программы, изменяя их имена, и установить значения по
умолчанию для ключей <CODE>configure</CODE>.




<H2><A NAME="SEC73" HREF="#autoconf_ru_toc_html_TOC73">Работа с внешним программным обеспечением</A></H2>
<P>
@anchor{External Software}


<P>
Некоторые пакеты требуют, или могут при случае использовать другие
пакеты программного обеспечения, уже установленные в
системе.  Пользователь может указать скрипту <CODE>configure</CODE> с помощью ключей
командной строки, какие внешние пакеты надо
использовать. Ключи имеют одну из следующих форм:



<PRE>
--with-<VAR>package</VAR>[=<VAR>arg</VAR>]
--without-<VAR>package</VAR>
</PRE>

<P>
Например, <SAMP>`--with-gnu-ld'</SAMP> означает, что надо работать с
компоновщиком GNU linker вместо других компоновщиков. <SAMP>`--with-x'</SAMP>
означает работу с X Window System.


<P>
Пользователь может задать аргумент, поставив после имени пакета символ
<SAMP>`='</SAMP> и нужный аргумент.  Вы можете задать аргумент, равный <SAMP>`no'</SAMP> для
пакетов, которые используются по умолчанию; он сообщает о том, что этот
пакет <EM>не</EM> надо использовать. Аргумент, который не равен ни
<SAMP>`yes'</SAMP>, ни <SAMP>`no'</SAMP>, может включать имя или номер версии другого
пакета, для более точного указания, с каким пакетом эта программа
предполагает работать. Если аргумент не задан, то его значение по
умолчанию равно <SAMP>`yes'</SAMP>. <SAMP>`--without-<VAR>package</VAR>'</SAMP> эквивалентно
вызову <SAMP>`--with-<VAR>package</VAR>=no'</SAMP>.


<P>
Скрипты <CODE>configure</CODE> не выдают ошибок о ключах
<SAMP>`--with-<VAR>package</VAR>'</SAMP>, которые они не поддерживают. Такое
поведение позволяет конфигурировать дерево исходных текстов, содержащее
множество пакетов, с помощью скрипта <CODE>configure</CODE> верхнего уровня,
когда пакеты поддерживают разные ключи, без выдачи фальшивых сообщений
об ошибках в ключах, которые поддерживают лишь некоторые пакеты.  К
сожалению, побочным эффектом
этого является то, что ошибка в задании ключей не диагностируется.  До
сих пор не было предложено лучшего подхода к решению этой проблемы.


<P>
Для каждого из внешних пакетов, который может быть использован в файле
<TT>`configure.in'</TT>, должен быть вызван макрос <CODE>AC_ARG_WITH</CODE> для
определения того, заставил ли пользователь <CODE>configure</CODE> использовать
этот пакет. Будет ли пакет использоваться по умолчанию или нет, а также
то, какие аргументы будут правильны, зависит от вас.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_ARG_WITH</B> <I>(<VAR>package</VAR>, <VAR>help-string</VAR> [, <VAR>action-if-given</VAR> [, <VAR>action-if-not-given</VAR>]])</I>
<DD><A NAME="autoconf_ru_9_html_IDX484"></A>
<A NAME="autoconf_ru_9_html_IDX485"></A>
Если пользователь задал <CODE>configure</CODE> ключ
<SAMP>`--with-<VAR>package</VAR>'</SAMP> или ключ <SAMP>`--without-<VAR>package</VAR>'</SAMP>, то
выполняются команды командного процессора <VAR>action-if-given</VAR>. Если ни
один из ключей не задан, то выполняются команды
<VAR>action-if-not-given</VAR>. Имя <VAR>package</VAR> задает другой пакет, с
которым должна работать эта программа.  Это имя должно содержать только
буквы, цифры и знаки минус.


<P>
Аргумент ключа командной строки из кода командного процессора
<VAR>action-if-given</VAR> в переменной командного процессора <CODE>withval</CODE>,
который в действительности является значением переменной командного
процессора <CODE>with_<VAR>package</VAR></CODE>, с символами <SAMP>`-'</SAMP>, замененными
на символ <SAMP>`_'</SAMP>.  Можете использовать эту переменную, если хотите.


<P>
Аргумент <VAR>help-string</VAR> является описанием ключа, который выглядит
примерно так:

<PRE>
  --with-readline         support fancy command line editing
</PRE>

<P>
<VAR>help-string</VAR> может занимать больше одной строки, если
необходима подробная информация. Просто убедитесь, что строка разделена
на колонки в выводе <SAMP>`configure --help'</SAMP>. Избегайте использовать
символы табуляции в строке помощи.  Для того, чтобы сохранить начальные
пробелы, нужно поместить строку между символами <SAMP>`['</SAMP> и <SAMP>`]'</SAMP>.
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_WITH</B> <I>(<VAR>package</VAR>, <VAR>action-if-given</VAR> [, <VAR>action-if-not-given</VAR>])</I>
<DD><A NAME="autoconf_ru_9_html_IDX486"></A>
<A NAME="autoconf_ru_9_html_IDX487"></A>
Это устаревшая версия макроса <CODE>AC_ARG_WITH</CODE>, которая не
поддерживает использование строки помощи.
</DL>




<H2><A NAME="SEC74" HREF="#autoconf_ru_toc_html_TOC74">Выбор ключей пакетов</A></H2>
<P>
@anchor{Package Options}


<P>
Если пакет имеет необязательные возможности, которые задаются во время  компиляции, то
пользователь может задать <CODE>configure</CODE> ключи командной строки для
указания--- нужно ли их компилировать. Ключи имеют одну из следующих
форм:



<PRE>
--enable-<VAR>feature</VAR>[=<VAR>arg</VAR>]
--disable-<VAR>feature</VAR>
</PRE>

<P>
Эти ключи позволяют пользователю выбрать, какие необязательные возможности
нужно собрать и установить.  Ключи <SAMP>`--enable-<VAR>feature</VAR>'</SAMP> никогда 
не должны приводить к тому, что какое-то свойство изменит свое
поведение, или же заменять одну возможность другой.   Эти ключи должны
только включать или не включать части программы в процесс компиляции.


<P>
Пользователь может задать аргумент, который следует за именем свойства и
знаком <SAMP>`='</SAMP>.  Если задать аргумент <SAMP>`no'</SAMP>, то свойство будет
недоступным.  Свойство с аргументом может выглядеть
примерно следующим образом: <SAMP>`--enable-debug=stabs'</SAMP>.  Если
аргумента не задано, то значением по умолчанию является <SAMP>`yes'</SAMP>.
<SAMP>`--disable-<VAR>feature</VAR>'</SAMP> является эквивалентом
<SAMP>`--enable-<VAR>feature</VAR>=no'</SAMP>.


<P>
Скрипты <CODE>configure</CODE> не выражают недовольства по поводу ключей
<SAMP>`--enable-<VAR>feature</VAR>'</SAMP>, которые они не поддерживают. Такое
поведение позволяет конфигурировать дерево исходных текстов, содержащее
множество пакетов, с помощью скрипта <CODE>configure</CODE> верхнего уровня,
когда пакеты поддерживают разные ключи, без выдачи фальшивых сообщений
об ошибках о ключах, которые поддерживают только некоторые пакеты.  Побочным эффектом
этого является то, что ошибка в задании ключей не диагностируется.  До
сих пор не было предложено лучшего подхода к решению этой проблемы.


<P>
Для каждой из необязательных возможностей <TT>`configure.in'</TT> должен вызывать
<CODE>AC_ARG_ENABLE</CODE> для определения, запросил ли пользователь
<CODE>configure</CODE> включить эту возможность.  Будет ли эта возможность включена
по умолчанию или нет, и какие аргументы будут правильными, зависит от
вас.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_ARG_ENABLE</B> <I>(<VAR>feature</VAR>, <VAR>help-string</VAR> [, <VAR>action-if-given</VAR> [, <VAR>action-if-not-given</VAR>]])</I>
<DD><A NAME="autoconf_ru_9_html_IDX488"></A>
<A NAME="autoconf_ru_9_html_IDX489"></A>
Если пользователь задал <CODE>configure</CODE> ключ
<SAMP>`--enable-<VAR>feature</VAR>'</SAMP> или <SAMP>`--disable-<VAR>feature</VAR>'</SAMP>, то
запускаются команды <VAR>action-if-given</VAR>. Если не был задан ни один
ключ, то запускаются команды <VAR>action-if-not-given</VAR>.  Имя
<VAR>feature</VAR> указывает необязательную возможность, которую пользователь 
может включить или выключить.  Имя должно состоять только из букв, цифр
и знаков "минус".


<P>
Аргумент ключа доступен из кода командного процессора <VAR>action-if-given</VAR>
в переменной командного процессора <CODE>enableval</CODE>, которая в
действительности является значением переменной
<CODE>enable_<VAR>feature</VAR></CODE>, причем символы  <SAMP>`-'</SAMP> заменены на символ
<SAMP>`_'</SAMP>.  Если хотите, то можете использовать эту переменную.
Аргумент <VAR>help-string</VAR> делает то же самое, что и соответствующий аргумент макроса
<CODE>AC_ARG_WITH</CODE> (see section <A HREF="#autoconf_ru_9_html_SEC73">Работа с внешним программным обеспечением</A>).
</DL>


<P>
<DL>
<DT><U>Macro:</U> <B>AC_ENABLE</B> <I>(<VAR>feature</VAR>, <VAR>action-if-given</VAR> [, <VAR>action-if-not-given</VAR>])</I>
<DD><A NAME="autoconf_ru_9_html_IDX490"></A>
<A NAME="autoconf_ru_9_html_IDX491"></A>
Это устаревшая версия <CODE>AC_ARG_ENABLE</CODE>, которая не поддерживает 
использование строки помощи.
</DL>




<H2><A NAME="SEC75" HREF="#autoconf_ru_toc_html_TOC75">Детали локальной конфигурации</A></H2>
<P>
@anchor{Site Details}


<P>
Некоторые пакеты программ требуют сложной специфической для машины
информации.  Например, это имена машин, предоставляющих какие-либо
сервисы, имена компаний, а также
электронные почтовые адреса, по которым можно связаться с какими-то
людьми. Поскольку некоторые скрипты, созданные Metaconfig, запрашивают эту
информацию интерактивно, то люди часто спрашивают, как можно получить эту
информацию в Autoconf-скриптах, которые не являются
интерактивными.


<P>
Такая информация по конфигурации машины должна быть помещена в файл,
редактируемый <EM>только людьми</EM>, а не программами. Файл может
располагаться либо в зависимости от значения используемой переменной
<CODE>prefix</CODE>, либо находиться в стандартном месте, например, в
домашнем каталоге пользователя.  Он даже может быть указан в переменной
среды. Программа должна использовать этот файл во время выполнения, а не
во время компиляции. Настройка во время выполнения является более
удобной для пользователей и делает процесс настройки более простым, чем
получение информации во время процесса конфигурации.  See section `Variables for Installation Directories' in <CITE>GNU Coding Standards</CITE>, где описано, где именно необходимо размещать
файлы данных.




<H2><A NAME="SEC76" HREF="#autoconf_ru_toc_html_TOC76">Преобразование имен программ при установке</A></H2>
<P>
@anchor{Transforming Names}


<P>
Autoconf поддерживает изменение имен программ при их установке. Для
того, чтобы использовать это преобразование, в файле <TT>`configure.in'</TT>
должен быть вызов макроса <CODE>AC_ARG_PROGRAM</CODE>.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_ARG_PROGRAM</B>
<DD><A NAME="autoconf_ru_9_html_IDX492"></A>
<A NAME="autoconf_ru_9_html_IDX493"></A>
<A NAME="autoconf_ru_9_html_IDX494"></A>
Помещает в выходную переменную <CODE>program_transform_name</CODE>
последовательность команд <CODE>sed</CODE>, используемых для изменения имен
устанавливаемых программ.


<P>
Если при запуске <CODE>configure</CODE> задан любой из нижеописанных ключей,
то имена программ изменяются соответствующим образом. В противном
случае, если был вызван макрос <CODE>AC_CANONICAL_SYSTEM</CODE> и значение,
заданное с помощью ключа <SAMP>`--target'</SAMP> отличается от типа машины, (указанного с помощью
ключа <SAMP>`--host'</SAMP> или типа по умолчанию, определенного с помощью
<CODE>config.sub</CODE>), то в качестве префикса имени используется тип
целевой машины и дефис.  Если не задано ни того, ни другого, то
преобразование имен не выполняется.
</DL>




<H3><A NAME="SEC77" HREF="#autoconf_ru_toc_html_TOC77">Ключи преобразования</A></H3>
<P>
@anchor{Transformation Options}


<P>
Вы можете задать преобразование имен, запустив <CODE>configure</CODE> со
следующими ключами командной строки:


<DL COMPACT>

<DT><CODE>--program-prefix=<VAR>prefix</VAR></CODE>
<DD>
добавляет префикс <VAR>prefix</VAR> к именам;

<DT><CODE>--program-suffix=<VAR>suffix</VAR></CODE>
<DD>
добавляет к именам суффикс <VAR>suffix</VAR>;

<DT><CODE>--program-transform-name=<VAR>expression</VAR></CODE>
<DD>
выполняет подстановки <CODE>sed</CODE> <VAR>expression</VAR> для имен программ.
</DL>



<H3><A NAME="SEC78" HREF="#autoconf_ru_toc_html_TOC78">Примеры преобразований</A></H3>
<P>
@anchor{Transformation Examples}


<P>
Эти преобразования полезны при работе с программами, которые являются частью
кросс-компиляционной среды разработки. Например, кросс-ассемблер,
запускаемый на Sun 4 и настроенный с ключом <SAMP>`--target=i960-vxworks'</SAMP>
обычно устанавливается как <TT>`i960-vxworks-as'</TT>, а не как <TT>`as'</TT>,
иначе его можно перепутать с родным ассемблером Sun 4.


<P>
Можно сделать так, чтобы имена программ начинались с символа <SAMP>`g'</SAMP>,
если не хотите, чтобы программы GNU, установленные в системе, заслоняли собой
другие утилиты с тем же именем. Например, если вы настраиваете программу
GNU <CODE>diff</CODE> с ключом <SAMP>`--program-prefix=g'</SAMP>, то затем вы можете
запустить <SAMP>`make install'</SAMP> и программа будет установлена как
<TT>`/usr/local/bin/gdiff'</TT>.


<P>
В качестве более изощренного примера вы можете использовать

<PRE>
--program-transform-name='s/^/g/; s/^gg/g/; s/^gless/less/'
</PRE>

<P>
для добавления символа <SAMP>`g'</SAMP> к большинству имен программ в дереве
исходных текстов, за исключением программ типа <CODE>gdb</CODE>, чьи имена уже 
начинаются с этого символа, и за исключением <CODE>less</CODE> и <CODE>lesskey</CODE>,
которые не являются программами GNU. (Предполагается, что дерево
исходных текстов, содержащее эти программы, уже сконфигурировано для
использования этой возможности).


<P>
Одним из способов одновременной установки нескольких версий некоторых
программ является добавление номера версии программы к имени. Например,
если вы хотите сохранить для дальнейшего использования Autoconf версии
1, то вы можете настроить Autoconf версии 2 с помощью ключа
<SAMP>`--program-suffix=2'</SAMP> для того, чтобы программы были установлены под
именами <TT>`/usr/local/bin/autoconf2'</TT>,
<TT>`/usr/local/bin/autoheader2'</TT> и т. п.




<H3><A NAME="SEC79" HREF="#autoconf_ru_toc_html_TOC79">Правила преобразования</A></H3>
<P>
@anchor{Transformation Rules}


<P>
Вот как нужно использовать переменную  <CODE>program_transform_name</CODE> в
<TT>`Makefile.in'</TT>:



<PRE>
transform=@program_transform_name@
install: all
        $(INSTALL_PROGRAM) myprog $(bindir)/`echo myprog|sed '$(transform)'`

uninstall:
        rm -f $(bindir)/`echo myprog|sed '$(transform)'`
</PRE>

<P>
Если у вас устанавливается больше одной программы, то вы можете
выполнять ту же операцию в цикле:



<PRE>
PROGRAMS=cp ls rm
install:
        for p in $(PROGRAMS); do \
          $(INSTALL_PROGRAM) $$p $(bindir)/`echo $$p|sed '$(transform)'`; \
        done

uninstall:
        for p in $(PROGRAMS); do \
          rm -f $(bindir)/`echo $$p|sed '$(transform)'`; \
        done
</PRE>

<P>
Преобразовывать ли имена файлов документации (Texinfo или <CODE>man</CODE>) -- 
сложный вопрос.  Кажется, на него нет единственного ответа, потому что
для преобразования имен есть несколько причин.  Часто
документация не является специфической для конкретной архитектуры, а
файлы Texinfo не конфликтуют с системной документацией. Но эти файлы
иногда могут конфликтовать с ранними версиями тех же файлов, а страницы
<CODE>man</CODE> иногда могут конфликтовать с системной документацией. В
качестве компромисса, можно выполнять преобразования имен страниц
<CODE>man</CODE>, но не руководств в формате Texinfo.




<H2><A NAME="SEC80" HREF="#autoconf_ru_toc_html_TOC80">Установка значений по умолчанию для машины</A></H2>
<P>
@anchor{Site Defaults}


<P>
Созданные Autoconf скрипты <CODE>configure</CODE> позволяют вам задать
значения по умолчанию для некоторых параметров настройки. Вы можете
сделать это, создавая файлы инициализации для машины и для целой
системы.


<P>
<A NAME="autoconf_ru_9_html_IDX495"></A>
Если установлена переменная среды <CODE>CONFIG_SITE</CODE>, то
<CODE>configure</CODE> использует ее значение как имя скрипта командного
процессора, который необходимо выполнить. В противном случае он считывает
скрипт <TT>`<VAR>prefix</VAR>/share/config.site'</TT>, если тот
существует, а затем скрипт <TT>`<VAR>prefix</VAR>/etc/config.site'</TT>, также
если он существует. Таким образом, специфические для машины файлы
перекрывают настройки в машинно-независимых файлах в случае конфликта.


<P>
Файлы настроек машины могут быть произвольными скриптами командного
процессора, но реально использоваться в них могут только определенные
строки кода.  Поскольку <CODE>configure</CODE> считывает кэш-файлы
после того, как он считывает файлы настройки машины, то файл локальной
конфигурации может определить кэш-файл по умолчанию, который будет общим для всех
запускаемых в системе скриптов <CODE>configure</CODE>, которые созданы с
помощью Autoconf. Если вы установите кэш-файл по умолчанию в файле
локальной настройки, то хорошо было бы установить также выходную
переменную <CODE>CC</CODE>, поскольку кэш-файл
является правильным только для определенного компилятора, а многие
системы имеют несколько компиляторов.


<P>
В файле локальных настроек вы можете проверять или изменять значения
ключей командной строки, заданных скрипту <CODE>configure</CODE>; ключи
устанавливают переменные командного процессора, которые называются так же,
как и ключи командной строки, но с символами дефиса, замененными на
символы
подчеркивания. Исключением из этого правила являются ключи
<SAMP>`--without-'</SAMP> и <SAMP>`--disable-'</SAMP>, которые подобны заданию
соответствующих ключей <SAMP>`--with-'</SAMP> или <SAMP>`--enable-'</SAMP> со значением
<SAMP>`no'</SAMP>.  Таким образом, <SAMP>`--cache-file=localcache'</SAMP> устанавливает
переменную <CODE>cache_file</CODE> в значение <SAMP>`localcache'</SAMP>;
<SAMP>`--enable-warnings=no'</SAMP> или <SAMP>`--disable-warnings'</SAMP> устанавливают
переменную <CODE>enable_warnings</CODE> равной значению <SAMP>`no'</SAMP>;
<SAMP>`--prefix=/usr'</SAMP> устанавливает переменную <CODE>prefix</CODE> равной
<SAMP>`/usr'</SAMP>; и т. п.


<P>
В файлах локальных настроек также можно устанавливать нестандартные
значения по умолчанию для других выходных переменных, таких как
<CODE>CFLAGS</CODE>: иначе вам пришлось бы делать это снова и снова в
командной строке.  Если вы обычно используете нестандартные значения для
переменных <VAR>prefix</VAR> или <VAR>exec_prefix</VAR> (которые обычно
используются для указания файла локальной конфигурации), то все равно
можно задать эти значения в этом файле, если указать его имя в
переменной среды <CODE>CONFIG_SITE</CODE>.


<P>
Вы можете сами установить значения некоторых кэш-переменных в файле
локальной конфигурации.  Это полезно делать при кросс-компиляции, поскольку
невозможно определить проверить возможности, которые требуют запуска
тестовых программ. Вы можете "заполнить кэш" установкой этих значений
для этих систем в файле <TT>`<VAR>prefix</VAR>/etc/config.site'</TT>. Для
определения имен кэш-переменных, которые вам необходимо установить,
поищите переменные с именами, содержащими <SAMP>`_cv_'</SAMP> в соответствующих
скриптах <CODE>configure</CODE> или в исходном коде <CODE>m4</CODE> макросов
Autoconf.


<P>
Кэш-файл не переопределяет ни одну переменную, установленную в файлах
локальной конфигурации.  Сходным образом вы не должны переопределять ключи
командной строки в файлах локальной конфигурации.  Ваш код должен
проверять, имеют ли уже переменные типа <CODE>prefix</CODE> или
<CODE>cache_file</CODE> значения по умолчанию (установленные ранее в процессе
выполнения <CODE>configure</CODE>), и если да, то не изменять этих значений.


<P>
Вот пример файла <TT>`/usr/share/local/gnu/share/config.site'</TT>.
Команда <SAMP>`configure --prefix=/usr/share/local/gnu'</SAMP> должна прочитать
этот файл (если переменная <CODE>CONFIG_SITE</CODE> не
установлена в другое значение).



<PRE>
# config.site для configure
#
# изменение некоторых значений по умолчанию.
test "$prefix" = NONE &#38;&#38; prefix=/usr/share/local/gnu
test "$exec_prefix" = NONE &#38;&#38; exec_prefix=/usr/local/gnu
test "$sharedstatedir" = '${prefix}/com' &#38;&#38; sharedstatedir=/var
test "$localstatedir" = '${prefix}/var' &#38;&#38; localstatedir=/var
#
# разрешить скриптам, созданным Autoconf 2.x, пользоваться общим кэш-файлом
# для получения результатов тестов, которые действительны для данной
# архитектуры.
if test "$cache_file" = ./config.cache; then
  cache_file="$prefix/var/config.cache"
  # Кэш-файл действителен только для одного компилятора C.
  CC=gcc
fi
</PRE>

<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_8_html">previous</A>, <A HREF="#autoconf_ru_10_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_11_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_10_html">previous</A>, <A HREF="#autoconf_ru_12_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC90" HREF="#autoconf_ru_toc_html_TOC90">Воссоздание конфигурации</A></H1>
<P>
@anchor{Invoking config.status}


<P>
Скрипт <CODE>configure</CODE> создает файл с именем <TT>`config.status'</TT>,
который описывает, какие параметры конфигурации были указаны при последней
конфигурации пакета.  Это файл является скриптом командного процессора,
который при запуске воссоздает ту же самую настройку.


<P>
Вы можете задать скрипту <TT>`config.status'</TT> ключ <SAMP>`--recheck'</SAMP>,
чтобы он обновил сам себя.  Этот ключ полезен, если вы изменяете <CODE>configure</CODE>,
так что результаты некоторых тестов могут измениться по сравнению с
предыдущим запуском. Ключ <SAMP>`--recheck'</SAMP> перезапускает
<CODE>configure</CODE> с аргументами, использованными при предыдущих запусках,
с добавлением ключа <SAMP>`--no-create'</SAMP>, который не дает <CODE>configure</CODE>
запустить <TT>`config.status'</TT> и создать <TT>`Makefile'</TT> и другие файлы,
а также с добавлением ключа <SAMP>`--no-recursion'</SAMP>, который предотвращает
запуск скриптов <CODE>configure</CODE> в подкаталогах.  (Это сделано для того, 
чтобы другие правила
<TT>`Makefile'</TT> могли бы запускать <TT>`config.status'</TT> при его изменении;
Например, see section <A HREF="#autoconf_ru_3_html_SEC14">Автоматическая пересборка</A>).


<P>
<TT>`config.status'</TT> также распознает ключ <SAMP>`--help'</SAMP>, который выдает
список ключей <TT>`config.status'</TT>, и ключ <SAMP>`--version'</SAMP>, который
выдает номер версии Autoconf, которая была использована при создании
скрипта <CODE>configure</CODE>, создавшего файл <TT>`config.status'</TT>.


<P>
<TT>`config.status'</TT> проверяет несколько переменных среды, которые могут
изменить его поведение:


<P>
<DL>
<DT><U>Variable:</U> <B>CONFIG_SHELL</B>
<DD><A NAME="autoconf_ru_11_html_IDX496"></A>
<A NAME="autoconf_ru_11_html_IDX497"></A>
Командный процессор, который запустит <CODE>configure</CODE> с ключом
<SAMP>`--recheck'</SAMP>. Он должен быть совместимым с командным процессором
Bourne.  Значение по умолчанию -- является <TT>`/bin/sh'</TT>.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>CONFIG_STATUS</B>
<DD><A NAME="autoconf_ru_11_html_IDX498"></A>
<A NAME="autoconf_ru_11_html_IDX499"></A>
Имя файла, которое будет использоваться для создания скрипта командного
процессора, который сохранит текущую настройку. Значением по умолчанию
является <TT>`./config.status'</TT>. Эта переменная полезна в том случае,
когда один пакет использует части другого, а скрипты <CODE>configure</CODE> не
должны быть слиты вместе, поскольку они сопровождаются по
отдельности.
</DL>


<P>
Следующие переменные обеспечивают возможность отдельным пакетам
совместно использовать значения переменных, вычисленных скриптом
<CODE>configure</CODE>.  Это может быть полезно, если одному пакету нужно
больше возможностей, чем другому.  Эти переменные позволяют файлу
<TT>`config.status'</TT> создавать и другие файлы, не только те, что указаны
в файле <TT>`configure.in'</TT>, чтобы их можно было бы использовать в
другом пакете.


<P>
<DL>
<DT><U>Variable:</U> <B>CONFIG_FILES</B>
<DD><A NAME="autoconf_ru_11_html_IDX500"></A>
<A NAME="autoconf_ru_11_html_IDX501"></A>
Файлы, в которых будут выполняться подстановки
<SAMP>`@<VAR>variable</VAR>@'</SAMP>.  Обычно эти файлы задаются как аргументы
макроса <CODE>AC_OUTPUT</CODE> в <TT>`configure.in'</TT>.
</DL>


<P>
<DL>
<DT><U>Variable:</U> <B>CONFIG_HEADERS</B>
<DD><A NAME="autoconf_ru_11_html_IDX502"></A>
<A NAME="autoconf_ru_11_html_IDX503"></A>
Файлы, в которых будет выполняться подстановка операторов <CODE>#define</CODE>
языка C.  Обычно это файлы, заданные в аргументах макроса
<CODE>AC_CONFIG_HEADER</CODE>; если этот макрос не был вызван, то
<TT>`config.status'</TT> игнорирует эту переменную.
</DL>


<P>
Эти переменные также позволяют написать правила <TT>`Makefile'</TT>, которые
будут пересоздавать только некоторые файлы.  Например, в
вышеприведенной зависимости (see section <A HREF="#autoconf_ru_3_html_SEC14">Автоматическая пересборка</A>),
<TT>`config.status'</TT> запускается дважды при изменении
<TT>`configure.in'</TT>. Если это беспокоит вас, то вы можете сделать так,
чтобы при каждом запуске обновлялись файлы только для этого правила:



<PRE>
config.h: stamp-h
stamp-h: config.h.in config.status
        CONFIG_FILES= CONFIG_HEADERS=config.h ./config.status
        echo &#62; stamp-h

Makefile: Makefile.in config.status
        CONFIG_FILES=Makefile CONFIG_HEADERS= ./config.status
</PRE>

<P>
(Если <TT>`configure.in'</TT> не вызывает макрос <CODE>AC_CONFIG_HEADER</CODE>, то
нет необходимости устанавливать <CODE>CONFIG_HEADERS</CODE> в правилах
<CODE>make</CODE>).


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_10_html">previous</A>, <A HREF="#autoconf_ru_12_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_17_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_16_html">previous</A>, <A HREF="#autoconf_ru_18_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC111" HREF="#autoconf_ru_toc_html_TOC111">Индекс выходных переменных</A></H1>
<P>
@anchor{Output Variable Index}


<P>
Это алфавитный список переменных, которые Autoconf может подставлять в
файлы, которые он создает, обычно это один или несколько файлов
<TT>`Makefile'</TT>. Для получения информации о том, как это делается
See section <A HREF="#autoconf_ru_6_html_SEC54">Установка выходных переменных</A>.


<P>
Jump to:
<A HREF="#autoconf_ru_17_html_ovindex_a">a</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_b">b</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_c">c</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_d">d</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_e">e</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_f">f</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_h">h</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_i">i</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_k">k</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_l">l</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_m">m</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_n">n</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_o">o</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_p">p</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_r">r</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_s">s</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_t">t</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_x">x</A>
-
<A HREF="#autoconf_ru_17_html_ovindex_y">y</A>
<P>
<H2><A NAME="autoconf_ru_17_html_ovindex_a">a</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX156">ALLOCA</A>
<LI><A HREF="#autoconf_ru_4_html_IDX83">AWK</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_b">b</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_3_html_IDX16">bindir</A>
<LI><A HREF="#autoconf_ru_8_html_IDX467">build</A>
<LI><A HREF="#autoconf_ru_8_html_IDX470">build_alias</A>
<LI><A HREF="#autoconf_ru_8_html_IDX473">build_cpu</A>
<LI><A HREF="#autoconf_ru_8_html_IDX479">build_os</A>
<LI><A HREF="#autoconf_ru_8_html_IDX476">build_vendor</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_c">c</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX86">CC</A>, <A HREF="#autoconf_ru_4_html_IDX110">CC</A>, <A HREF="#autoconf_ru_4_html_IDX380">CC</A>
<LI><A HREF="#autoconf_ru_3_html_IDX50">CFLAGS</A>, <A HREF="#autoconf_ru_4_html_IDX87">CFLAGS</A>
<LI><A HREF="#autoconf_ru_3_html_IDX18">configure_input</A>
<LI><A HREF="#autoconf_ru_4_html_IDX93">CPP</A>
<LI><A HREF="#autoconf_ru_3_html_IDX52">CPPFLAGS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX96">CXX</A>
<LI><A HREF="#autoconf_ru_4_html_IDX100">CXXCPP</A>
<LI><A HREF="#autoconf_ru_3_html_IDX54">CXXFLAGS</A>, <A HREF="#autoconf_ru_4_html_IDX97">CXXFLAGS</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_d">d</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_3_html_IDX20">datadir</A>
<LI><A HREF="#autoconf_ru_3_html_IDX58">DEFS</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_e">e</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_3_html_IDX22">exec_prefix</A>
<LI><A HREF="#autoconf_ru_4_html_IDX348">EXEEXT</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_f">f</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX103">F77</A>
<LI><A HREF="#autoconf_ru_3_html_IDX56">FFLAGS</A>, <A HREF="#autoconf_ru_4_html_IDX104">FFLAGS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX343">FLIBS</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_h">h</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_8_html_IDX468">host</A>
<LI><A HREF="#autoconf_ru_8_html_IDX471">host_alias</A>
<LI><A HREF="#autoconf_ru_8_html_IDX474">host_cpu</A>
<LI><A HREF="#autoconf_ru_8_html_IDX480">host_os</A>
<LI><A HREF="#autoconf_ru_8_html_IDX477">host_vendor</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_i">i</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_3_html_IDX24">includedir</A>
<LI><A HREF="#autoconf_ru_3_html_IDX26">infodir</A>
<LI><A HREF="#autoconf_ru_4_html_IDX113">INSTALL</A>
<LI><A HREF="#autoconf_ru_4_html_IDX115">INSTALL_DATA</A>
<LI><A HREF="#autoconf_ru_4_html_IDX114">INSTALL_PROGRAM</A>
<LI><A HREF="#autoconf_ru_4_html_IDX116">INSTALL_SCRIPT</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_k">k</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX175">KMEM_GROUP</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_l">l</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_3_html_IDX60">LDFLAGS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX119">LEX</A>
<LI><A HREF="#autoconf_ru_4_html_IDX80">LEX_OUTPUT_ROOT</A>
<LI><A HREF="#autoconf_ru_4_html_IDX120">LEXLIB</A>
<LI><A HREF="#autoconf_ru_3_html_IDX28">libdir</A>
<LI><A HREF="#autoconf_ru_3_html_IDX30">libexecdir</A>
<LI><A HREF="#autoconf_ru_4_html_IDX162">LIBOBJS</A>, <A HREF="#autoconf_ru_4_html_IDX173">LIBOBJS</A>, <A HREF="#autoconf_ru_4_html_IDX184">LIBOBJS</A>, <A HREF="#autoconf_ru_4_html_IDX226">LIBOBJS</A>, <A HREF="#autoconf_ru_4_html_IDX280">LIBOBJS</A>
<LI><A HREF="#autoconf_ru_3_html_IDX62">LIBS</A>, <A HREF="#autoconf_ru_4_html_IDX388">LIBS</A>, <A HREF="#autoconf_ru_4_html_IDX391">LIBS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX123">LN_S</A>
<LI><A HREF="#autoconf_ru_3_html_IDX32">localstatedir</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_m">m</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_3_html_IDX34">mandir</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_n">n</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX174">NEED_SETGID</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_o">o</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX351">OBJEXT</A>
<LI><A HREF="#autoconf_ru_3_html_IDX36">oldincludedir</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_p">p</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_3_html_IDX38">prefix</A>
<LI><A HREF="#autoconf_ru_9_html_IDX494">program_transform_name</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_r">r</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX126">RANLIB</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_s">s</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_3_html_IDX40">sbindir</A>
<LI><A HREF="#autoconf_ru_3_html_IDX14">SET_MAKE</A>
<LI><A HREF="#autoconf_ru_3_html_IDX42">sharedstatedir</A>
<LI><A HREF="#autoconf_ru_3_html_IDX44">srcdir</A>
<LI><A HREF="#autoconf_ru_3_html_IDX69">subdirs</A>
<LI><A HREF="#autoconf_ru_3_html_IDX46">sysconfdir</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_t">t</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_8_html_IDX469">target</A>
<LI><A HREF="#autoconf_ru_8_html_IDX472">target_alias</A>
<LI><A HREF="#autoconf_ru_8_html_IDX475">target_cpu</A>
<LI><A HREF="#autoconf_ru_8_html_IDX481">target_os</A>
<LI><A HREF="#autoconf_ru_8_html_IDX478">target_vendor</A>
<LI><A HREF="#autoconf_ru_3_html_IDX48">top_srcdir</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_x">x</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX358">X_CFLAGS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX360">X_EXTRA_LIBS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX359">X_LIBS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX361">X_PRE_LIBS</A>
</DIR>
<H2><A NAME="autoconf_ru_17_html_ovindex_y">y</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX129">YACC</A>
</DIR>


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_16_html">previous</A>, <A HREF="#autoconf_ru_18_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_16_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_15_html">previous</A>, <A HREF="#autoconf_ru_17_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC110" HREF="#autoconf_ru_toc_html_TOC110">Индекс переменных среды</A></H1>
<P>
@anchor{Environment Variable Index}


<P>
Вот алфавитный список переменных среды, которые проверяет Autoconf.


<P>
Jump to:
<A HREF="#autoconf_ru_16_html_evindex_a">a</A>
-
<A HREF="#autoconf_ru_16_html_evindex_c">c</A>
-
<A HREF="#autoconf_ru_16_html_evindex_s">s</A>
<P>
<H2><A NAME="autoconf_ru_16_html_evindex_a">a</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_2_html_IDX1">AC_MACRODIR</A>, <A HREF="#autoconf_ru_2_html_IDX2">AC_MACRODIR</A>, <A HREF="#autoconf_ru_2_html_IDX3">AC_MACRODIR</A>, <A HREF="#autoconf_ru_2_html_IDX4">AC_MACRODIR</A>, <A HREF="#autoconf_ru_3_html_IDX66">AC_MACRODIR</A>, <A HREF="#autoconf_ru_13_html_IDX505">AC_MACRODIR</A>
</DIR>
<H2><A NAME="autoconf_ru_16_html_evindex_c">c</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_11_html_IDX501">CONFIG_FILES</A>
<LI><A HREF="#autoconf_ru_11_html_IDX503">CONFIG_HEADERS</A>
<LI><A HREF="#autoconf_ru_11_html_IDX497">CONFIG_SHELL</A>
<LI><A HREF="#autoconf_ru_9_html_IDX495">CONFIG_SITE</A>
<LI><A HREF="#autoconf_ru_11_html_IDX499">CONFIG_STATUS</A>
</DIR>
<H2><A NAME="autoconf_ru_16_html_evindex_s">s</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_13_html_IDX504">SIMPLE_BACKUP_SUFFIX</A>
</DIR>


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_15_html">previous</A>, <A HREF="#autoconf_ru_17_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_18_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_17_html">previous</A>, <A HREF="#autoconf_ru_19_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC112" HREF="#autoconf_ru_toc_html_TOC112">Индекс символов препроцессора</A></H1>
<P>
@anchor{Preprocessor Symbol Index}


<P>
Вот алфавитный список символов препроцессора C, которые определяют
макросы Autoconf. Для работы с Autoconf, исходному коду на языке C
необходимо использовать эти имена в директивах <CODE>#if</CODE>.


<P>
Jump to:
<A HREF="#autoconf_ru_18_html_cvindex__">_</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_c">c</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_d">d</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_f">f</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_g">g</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_h">h</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_i">i</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_l">l</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_m">m</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_n">n</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_o">o</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_p">p</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_r">r</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_s">s</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_t">t</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_u">u</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_v">v</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_w">w</A>
-
<A HREF="#autoconf_ru_18_html_cvindex_y">y</A>
<P>
<H2><A NAME="autoconf_ru_18_html_cvindex__">_</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX326">__CHAR_UNSIGNED__</A>
<LI><A HREF="#autoconf_ru_4_html_IDX372">_ALL_SOURCE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX383">_MINIX</A>
<LI><A HREF="#autoconf_ru_4_html_IDX385">_POSIX_1_SOURCE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX379">_POSIX_SOURCE</A>, <A HREF="#autoconf_ru_4_html_IDX384">_POSIX_SOURCE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX259">_POSIX_VERSION</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_c">c</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX154">C_ALLOCA</A>
<LI><A HREF="#autoconf_ru_4_html_IDX159">CLOSEDIR_VOID</A>
<LI><A HREF="#autoconf_ru_4_html_IDX320">const</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_d">d</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX166">DGUX</A>
<LI><A HREF="#autoconf_ru_4_html_IDX232">DIRENT</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_f">f</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX107">F77_NO_MINUS_C_MINUS_O</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_g">g</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX293">GETGROUPS_T</A>
<LI><A HREF="#autoconf_ru_4_html_IDX171">GETLODAVG_PRIVILEGED</A>
<LI><A HREF="#autoconf_ru_4_html_IDX181">GETPGRP_VOID</A>
<LI><A HREF="#autoconf_ru_4_html_IDX312">gid_t</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_h">h</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX155">HAVE_ALLOCA_H</A>
<LI><A HREF="#autoconf_ru_3_html_IDX65">HAVE_CONFIG_H</A>
<LI><A HREF="#autoconf_ru_4_html_IDX239">HAVE_DIRENT_H</A>
<LI><A HREF="#autoconf_ru_4_html_IDX215">HAVE_DOPRNT</A>
<LI><A HREF="#autoconf_ru_4_html_IDX223">HAVE_<VAR>function</VAR></A>
<LI><A HREF="#autoconf_ru_4_html_IDX178">HAVE_GETMNTENT</A>
<LI><A HREF="#autoconf_ru_4_html_IDX267">HAVE_<VAR>header</VAR></A>
<LI><A HREF="#autoconf_ru_4_html_IDX329">HAVE_LONG_DOUBLE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX366">HAVE_LONG_FILE_NAMES</A>
<LI><A HREF="#autoconf_ru_4_html_IDX187">HAVE_MMAP</A>
<LI><A HREF="#autoconf_ru_4_html_IDX240">HAVE_NDIR_H</A>
<LI><A HREF="#autoconf_ru_4_html_IDX369">HAVE_RESTARTABLE_SYSCALLS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX276">HAVE_ST_BLKSIZE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX279">HAVE_ST_BLOCKS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX283">HAVE_ST_RDEV</A>
<LI><A HREF="#autoconf_ru_4_html_IDX201">HAVE_STRCOLL</A>
<LI><A HREF="#autoconf_ru_4_html_IDX204">HAVE_STRFTIME</A>
<LI><A HREF="#autoconf_ru_4_html_IDX332">HAVE_STRINGIZE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX241">HAVE_SYS_DIR_H</A>
<LI><A HREF="#autoconf_ru_4_html_IDX242">HAVE_SYS_NDIR_H</A>
<LI><A HREF="#autoconf_ru_4_html_IDX252">HAVE_SYS_WAIT_H</A>
<LI><A HREF="#autoconf_ru_4_html_IDX289">HAVE_TM_ZONE</A>
<LI><A HREF="#autoconf_ru_4_html_IDX290">HAVE_TZNAME</A>
<LI><A HREF="#autoconf_ru_4_html_IDX258">HAVE_UNISTD_H</A>
<LI><A HREF="#autoconf_ru_4_html_IDX207">HAVE_UTIME_NULL</A>
<LI><A HREF="#autoconf_ru_4_html_IDX210">HAVE_VFORK_H</A>
<LI><A HREF="#autoconf_ru_4_html_IDX214">HAVE_VPRINTF</A>
<LI><A HREF="#autoconf_ru_4_html_IDX218">HAVE_WAIT3</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_i">i</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX323">inline</A>
<LI><A HREF="#autoconf_ru_4_html_IDX337">INT_16_BITS</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_l">l</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX340">LONG_64_BITS</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_m">m</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX245">MAJOR_IN_MKDEV</A>
<LI><A HREF="#autoconf_ru_4_html_IDX246">MAJOR_IN_SYSMACROS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX296">mode_t</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_n">n</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX235">NDIR</A>
<LI><A HREF="#autoconf_ru_4_html_IDX255">NEED_MEMORY_H</A>
<LI><A HREF="#autoconf_ru_4_html_IDX172">NEED_SETGID</A>
<LI><A HREF="#autoconf_ru_4_html_IDX170">NLIST_NAME_UNION</A>
<LI><A HREF="#autoconf_ru_4_html_IDX169">NLIST_STRUCT</A>
<LI><A HREF="#autoconf_ru_4_html_IDX90">NO_MINUS_C_MINUS_O</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_o">o</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX299">off_t</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_p">p</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX302">pid_t</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_r">r</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX305">RETSIGTYPE</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_s">s</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX190">SELECT_TYPE_ARG1</A>
<LI><A HREF="#autoconf_ru_4_html_IDX191">SELECT_TYPE_ARG234</A>
<LI><A HREF="#autoconf_ru_4_html_IDX192">SELECT_TYPE_ARG5</A>
<LI><A HREF="#autoconf_ru_4_html_IDX195">SETPGRP_VOID</A>
<LI><A HREF="#autoconf_ru_4_html_IDX198">SETVBUF_REVERSED</A>
<LI><A HREF="#autoconf_ru_4_html_IDX308">size_t</A>
<LI><A HREF="#autoconf_ru_4_html_IDX249">STDC_HEADERS</A>
<LI><A HREF="#autoconf_ru_4_html_IDX165">SVR4</A>
<LI><A HREF="#autoconf_ru_4_html_IDX229">SYS_SIGLIST_DECLARED</A>
<LI><A HREF="#autoconf_ru_4_html_IDX233">SYSDIR</A>
<LI><A HREF="#autoconf_ru_4_html_IDX234">SYSNDIR</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_t">t</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX273">TIME_WITH_SYS_TIME</A>
<LI><A HREF="#autoconf_ru_4_html_IDX286">TM_IN_SYS_TIME</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_u">u</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX311">uid_t</A>
<LI><A HREF="#autoconf_ru_4_html_IDX167">UMAX</A>
<LI><A HREF="#autoconf_ru_4_html_IDX168">UMAX4_3</A>
<LI><A HREF="#autoconf_ru_4_html_IDX262">USG</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_v">v</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX211">vfork</A>
<LI><A HREF="#autoconf_ru_4_html_IDX236">VOID_CLOSEDIR</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_w">w</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX317">WORDS_BIGENDIAN</A>
</DIR>
<H2><A NAME="autoconf_ru_18_html_cvindex_y">y</A></H2>
<DIR>
<LI><A HREF="#autoconf_ru_4_html_IDX79">YYTEXT_POINTER</A>
</DIR>


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_17_html">previous</A>, <A HREF="#autoconf_ru_19_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_7_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_6_html">previous</A>, <A HREF="#autoconf_ru_8_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC59" HREF="#autoconf_ru_toc_html_TOC59">Создание макросов</A></H1>
<P>
@anchor{Writing Macros}


<P>
Когда вы пишете тест свойства, который будет применяться в более чем
одном пакете программного обеспечения, то лучше всего оформить его в
виде нового макроса. В этом разделе приводятся некоторые инструкции и
указания по написанию макросов Autoconf.




<H2><A NAME="SEC60" HREF="#autoconf_ru_toc_html_TOC60">Определение макросов</A></H2>
<P>
@anchor{Macro Definitions}


<P>
<A NAME="autoconf_ru_7_html_IDX452"></A>
Макросы Autoconf определяются с помощью макроса <CODE>AC_DEFUN</CODE>, который
подобен встроенному макросу <CODE>define</CODE> программы <CODE>m4</CODE>. В
добавление к определению макроса, <CODE>AC_DEFUN</CODE> добавляет к нему
некоторый код, который используется для ограничения порядка вызовы
макросов (see section <A HREF="#autoconf_ru_7_html_SEC64">Требуемые макросы</A>).


<P>
Определение макроса Autoconf выглядит примерно следующим образом:



<PRE>
AC_DEFUN(<VAR>macro-name</VAR>, [<VAR>macro-body</VAR>])
</PRE>

<P>
Квадратные скобки не показывают необязательный параметр: они должны
присутствовать в определении макроса для избежания проблем расширения
макроса (see section <A HREF="#autoconf_ru_7_html_SEC62">Заключение в кавычки</A>). Вы можете ссылаться на
передаваемые макросу параметры с помощью переменных <SAMP>`$1'</SAMP>, <SAMP>`$2'</SAMP>
и т.п.


<P>
Для ввода комментариев в <CODE>m4</CODE>, используйте встроенный макрос
<CODE>m4</CODE> <CODE>dnl</CODE>; он заставляет <CODE>m4</CODE> игнорировать текст до
начала новой строки. Он не нужен между определениями макросов в файлах
<TT>`acsite.m4'</TT> и <TT>`aclocal.m4'</TT>, поскольку весь вывод удаляется до
вызова <CODE>AC_INIT</CODE>.


<P>
See section `How to define new macros' in <CITE>GNU m4</CITE>, для
более полной информации о написании макросов <CODE>m4</CODE>.




<H2><A NAME="SEC61" HREF="#autoconf_ru_toc_html_TOC61">Имена макросов</A></H2>
<P>
@anchor{Macro Names}


<P>
Все макросы Autoconf названы именами, состоящими из букв заглавных букв
и начинающихся с префикса <SAMP>`AC_'</SAMP>, для того, чтобы избежать
конфликтов с другим текстом. Все переменные командного процессора,
которые используются для внутренних целей в этих макросах, как правило
называются именами из прописных букв и начинаются с <SAMP>`ac_'</SAMP>. Чтобы
обеспечить, что ваши макросы не конфликтовали с существующими или
будущими макросами Autoconf, вы должны использовать собственный префикс
для ваших макросов и переменных командного процессора. В качестве
возможных значений вы можете использовать ваши инициалы, или сокращенное
название вашей организации или пакета программ.


<P>
Большинство имен макросов Autoconf следуют соглашению о структуре имени,
которое показывает какой тип свойства проверяемого данным
макросом. Имена макросов состоит из нескольких слов, который разделены
символами подчеркивания, продвигаясь от общих слов к более
специфическим. Имена соответствующих переменных кэша используют то же
соглашение по именованию (see section <A HREF="#autoconf_ru_6_html_SEC56">Имена переменных кэша</A>, для получения
дополнительной информации о них).


<P>
Первое слово имени после префикса <SAMP>`AC_'</SAMP> обычно сообщает категорию
тестируемого свойства. Вот какие категории используются Autoconf для
специфических макросов, один из типов которых вы вероятно захотите
написать.  Они также используются для именования переменных кэша, только
используя прописные буквы. Используйте перечисленные категории при
написании ваших макросов; если нужной категории нет, то вы можете вводит
собственные.


<DL COMPACT>

<DT><CODE>C</CODE>
<DD>
Встроенные возможности языка C.
<DT><CODE>DECL</CODE>
<DD>
Объявления переменных C в заголовочных файлах.
<DT><CODE>FUNC</CODE>
<DD>
Функции в библиотеках.
<DT><CODE>GROUP</CODE>
<DD>
Группа UNIX владеющая файлами.
<DT><CODE>HEADER</CODE>
<DD>
Заголовочные файлы.
<DT><CODE>LIB</CODE>
<DD>
Библиотеки C.
<DT><CODE>PATH</CODE>
<DD>
Полные путевые имена файлов, включая программы.
<DT><CODE>PROG</CODE>
<DD>
Базовые имена программ.
<DT><CODE>STRUCT</CODE>
<DD>
Определения структур C в заголовочных файлах.
<DT><CODE>SYS</CODE>
<DD>
Свойства операционной системы.
<DT><CODE>TYPE</CODE>
<DD>
Встроенные или объявленные типы C.
<DT><CODE>VAR</CODE>
<DD>
Переменные C в библиотеках.
</DL>

<P>
После категории следует имя тестируемого свойства. Любые дополнительные
слова в имени макроса указывают на специфические аспекты тестируемого
свойства. Например, <CODE>AC_FUNC_UTIME_NULL</CODE> проверяет поведение
функции <CODE>utime</CODE> при вызове ее с указателем равным <CODE>NULL</CODE>.


<P>
Макрос, который является внутренней подпрограммой другого макроса должен
иметь имя, которое начинается с имени этого макроса, за которым следует
одно или несколько слов, описывающих что делает этот макрос. Например,
макрос <CODE>AC_PATH_X</CODE> имеет внутренние макросы <CODE>AC_PATH_X_XMKMF</CODE>
и <CODE>AC_PATH_X_DIRECT</CODE>.




<H2><A NAME="SEC62" HREF="#autoconf_ru_toc_html_TOC62">Заключение в кавычки</A></H2>
<P>
@anchor{Quoting}


<P>
Макросы, которые вызываются другими макросами оцениваются программой
<CODE>m4</CODE> несколько раз; каждая оценка может потребовать другого уровня
кавычек для предотвращения нежелательных расширений макросов или
встроенных возможностей <CODE>m4</CODE>, таких как <SAMP>`define'</SAMP> и
<SAMP>`$1'</SAMP>. Кавычки также требуются вокруг аргументов макросов, которые
содержат запятые, поскольку запятые разделяют аргументы макроса. Также
хорошей привычкой является заключение в кавычки аргументов, которые
содержат символы новой строки или вызовы других макросов.


<P>
Autoconf изменяет символ-кавычку программы <CODE>m4</CODE> со значений по
умолчанию <SAMP>``'</SAMP> и <SAMP>`''</SAMP> на <SAMP>`['</SAMP> и <SAMP>`]'</SAMP>, поскольку многие
из макросов используют не сочетаемые <SAMP>``'</SAMP> и <SAMP>`''</SAMP>. Однако в
нескольких местах макросам необходимо использовано символов-скобок
(обычно в тексте программ на языке C или в регулярных выражениях). В
этих местах макросы используют встроенную команду <CODE>m4</CODE>
<CODE>changequote</CODE> для временного изменения символа-кавычек на <SAMP>`&#60;&#60;'</SAMP>
и <SAMP>`&#62;&#62;'</SAMP>. (Иногда, если им нет нужды заключать в кавычки что-либо, то
они запрещают заключение в кавычки установкой символов-кавычек равных
пустым символам). Вот пример использования:



<PRE>
AC_TRY_LINK(
changequote(&#60;&#60;, &#62;&#62;)dnl
&#60;&#60;#include &#60;time.h&#62;
#ifndef tzname /* For SGI.  */
extern char *tzname[]; /* RS6000 and others reject char **tzname.  */
#endif&#62;&#62;,
changequote([, ])dnl
[atoi(*tzname);], ac_cv_var_tzname=yes, ac_cv_var_tzname=no)
</PRE>

<P>
Когда вы создает скрипт <CODE>configure</CODE>, используя свеже написанные
макросы, то тщательно проверьте их на то, нужно ли добавить
дополнительные символы-кавычки в эти макросы. Если одно или несколько
слов исчезнут в выводе <CODE>m4</CODE>, то вам необходимо добавить
дополнительные символы-кавычки. Если вы сомневаетесь, то просто добавьте
кавычки.


<P>
Однако также возможно поместить слишком много уровней кавычек.  Если это
случается, то полученный скрипт <CODE>configure</CODE> будет содержать
не-расширенный макрос. Программа <CODE>autoconf</CODE> выполняет проверку этой
проблемы, выполняя команду <SAMP>`grep AC_ configure'</SAMP>.




<H2><A NAME="SEC63" HREF="#autoconf_ru_toc_html_TOC63">Зависимости между макросами</A></H2>
<P>
@anchor{Dependencies Between Macros}


<P>
Некоторые макросы Autoconf зависят от других макросов, которые должны
быть вызваны первыми для того, чтобы работа производилась
правильно. Autoconf предоставляет способ для того, чтобы проверить, что
некоторые макросы были вызваны, и способ предоставления пользователю
информацию о макросах, которые вызываются в порядке, которые может
привести к неправильному выполнению.




<H3><A NAME="SEC64" HREF="#autoconf_ru_toc_html_TOC64">Требуемые макросы</A></H3>
<P>
@anchor{Prerequisite Macros}


<P>
Макрос, которое вы можете написать, может нуждаться в значениях, которые
перед этим были вычислены другими макросами. Например,
<CODE>AC_DECL_YYTEXT</CODE> проверяет вывод <CODE>flex</CODE> или <CODE>lex</CODE>, так
что он зависит от <CODE>AC_PROG_LEX</CODE>, который должен быть вызван перед
этим для установки переменной командного процессора <CODE>LEX</CODE>.


<P>
Вместо того, чтобы заставлять пользователя макросов помнить все
зависимости между макросами, вы можете использовать макрос
<CODE>AC_REQUIRE</CODE> для того, чтобы автоматически отслеживать
зависимости. <CODE>AC_REQUIRE</CODE> может помочь в обеспечении того, что
макрос вызывается только когда это необходимо, и будет вызываться только
раз.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_REQUIRE</B> <I>(<VAR>macro-name</VAR>)</I>
<DD><A NAME="autoconf_ru_7_html_IDX453"></A>
<A NAME="autoconf_ru_7_html_IDX454"></A>
Если макрос <CODE>m4</CODE> с именем <VAR>macro-name</VAR> еще не был вызван, то
необходимо вызвать его (без каких-либо аргументов). Убедитесь, что вы
поместили имя <VAR>macro-name</VAR> в квадратные кавычки. <VAR>macro-name</VAR>
должен быть определен с использованием макроса <CODE>AC_DEFUN</CODE> или
должен содержать вызов макроса <CODE>AC_PROVIDE</CODE> для того, чтобы
указать, что он был вызван.
</DL>


<P>
Альтернативой этому использованию <CODE>AC_DEFUN</CODE> является использование
<CODE>define</CODE> и вызов макроса <CODE>AC_PROVIDE</CODE>. Поскольку этот подход
не предотвращает вложенных сообщений, то эта техника является
устаревшей.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_PROVIDE</B> <I>(<VAR>this-macro-name</VAR>)</I>
<DD><A NAME="autoconf_ru_7_html_IDX455"></A>
<A NAME="autoconf_ru_7_html_IDX456"></A>
Запоминает тот факт, что макрос <VAR>this-macro-name</VAR> был вызван.
<VAR>this-macro-name</VAR> должен быть именем макроса, который вызывает
<CODE>AC_PROVIDE</CODE>. Для простого получения этого имени используйте
встроенную переменную <CODE>m4</CODE> с именем <CODE>$0</CODE>, примерно так:



<PRE>
AC_PROVIDE([$0])
</PRE>

</DL>



<H3><A NAME="SEC65" HREF="#autoconf_ru_toc_html_TOC65">Предлагаемый порядок</A></H3>
<P>
@anchor{Suggested Ordering}


<P>
Некоторые макросы должны быть вызваны до других макросов, если оба
макроса вызываются, но не <EM>требует</EM>, чтобы другие макросы были
вызваны. Например, макрос, который изменяет поведение компилятора C
должен быть вызван до любого из макросов, которые запускают компилятор
C. Многие из этих зависимостей упоминаются в документации.


<P>
Autoconf предоставляет макрос <CODE>AC_BEFORE</CODE> для предупреждения
пользователя о тех случаях, когда этот макросы вызываются в неправильном
порядке в файле <TT>`configure.in'</TT>. Предупреждение выдается при
создании скрипта <CODE>configure</CODE> из файла <TT>`configure.in'</TT>, а не при
запуске созданного <CODE>configure</CODE>. Например, <CODE>AC_PROG_CPP</CODE>
проверяет может ли компилятор C запустить препроцессор C с ключом
<SAMP>`-E'</SAMP>. Он должен быть вызван после любого из макросов, который
изменяет поведение используемого компилятора C, такого как
<CODE>AC_PROG_CC</CODE>. Так что макрос <CODE>AC_PROG_CC</CODE> должен содержать:



<PRE>
AC_BEFORE([$0], [AC_PROG_CPP])dnl
</PRE>

<P>
Это вызывает выдачу предупреждения пользователю, если вызов 
<CODE>AC_PROG_CPP</CODE> уже произошел до вызова макроса <CODE>AC_PROG_CC</CODE>.


<P>
<DL>
<DT><U>Macro:</U> <B>AC_BEFORE</B> <I>(<VAR>this-macro-name</VAR>, <VAR>called-macro-name</VAR>)</I>
<DD><A NAME="autoconf_ru_7_html_IDX457"></A>
<A NAME="autoconf_ru_7_html_IDX458"></A>
Заставляет <CODE>m4</CODE> выдать предупреждающее сообщение в стандартный
поток сообщений об ошибках в том случае, если макроса
<VAR>called-macro-name</VAR> уже был вызван. <VAR>this-macro-name</VAR> должен
быть именем макроса, который вызывает <CODE>AC_BEFORE</CODE>. Макрос
<VAR>called-macro-name</VAR> должен быть определен используя макрос
<CODE>AC_DEFUN</CODE> или должен содержать вызов <CODE>AC_PROVIDE</CODE> для того,
чтобы показать, что он был вызван.
</DL>




<H3><A NAME="SEC66" HREF="#autoconf_ru_toc_html_TOC66">Устаревшие макросы</A></H3>
<P>
@anchor{Obsolete Macros}


<P>
Технология настройки и переносимости развивалась многие годы. Часто
разрабатывались лучшие решения отдельных проблем, или
систематизировались специальные подходы. Этот процесс происходил во
многих частях Autoconf. Результатом этого является то, что некоторые
макросы в настоящее время считаются <EM>устаревшими</EM>; они до сих пор
работают, но не считаются лучшим способом решения. Autoconf
предоставляет макрос <CODE>AC_OBSOLETE</CODE>, который предупреждает
пользователей создающих скрипты <CODE>configure</CODE> о том, что они
используют устаревшие макросы, чтобы поощрить их к использованию
современных макросов. Простой вызов этого макроса выглядит так:



<PRE>
AC_OBSOLETE([$0], [; use AC_CHECK_HEADERS(unistd.h) instead])dnl
</PRE>

<P>
<DL>
<DT><U>Macro:</U> <B>AC_OBSOLETE</B> <I>(<VAR>this-macro-name</VAR> [, <VAR>suggestion</VAR>])</I>
<DD><A NAME="autoconf_ru_7_html_IDX459"></A>
<A NAME="autoconf_ru_7_html_IDX460"></A>
Заставляет <CODE>m4</CODE> выдать сообщение в стандартный поток сообщений об
ошибках, которое говорит о том, что макрос <VAR>this-macro-name</VAR>
является устаревшим, и выдает имя файла и номер строки где был вызван
этот макрос <VAR>this-macro-name</VAR> должен именем макроса, который
производит вызов <CODE>AC_OBSOLETE</CODE>. Если задан аргумент
<VAR>suggestion</VAR>, то он выдается в конце предупреждающего сообщения;
например, он может быть советом о том, что нужно использовать вместо
<VAR>this-macro-name</VAR>.
</DL>


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_6_html">previous</A>, <A HREF="#autoconf_ru_8_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_13_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_12_html">previous</A>, <A HREF="#autoconf_ru_14_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC96" HREF="#autoconf_ru_toc_html_TOC96">Обновление с версии 1</A></H1>
<P>
@anchor{Upgrading}


<P>
По большей части Autoconf версии 2 обратно совместим с версией 1.
Однако же, в нем появились более удобные способы решения некоторых
вещей, а некоторые особенно уродливые способы из версии 1 не
поддерживаются.  Так что, в зависимости от сложности ваших файлов
<TT>`configure.in'</TT>, вам, может быть, придется вручную скорректировать
ваши файлы, чтобы использовать их с Autoconf версии 2. Этот раздел описывает некоторые
проблемы, которых можно ожидать при переходе к новой версии.  Также,
возможно, ваши скрипты <CODE>configure</CODE> получат выгоду от
использования новых возможностей версии 2; список изменений приведен в
файле <TT>`NEWS'</TT> дистрибутива Autoconf.


<P>
В первую очередь убедитесь, что у вас установлен GNU <CODE>m4</CODE> версии
1.1 или более свежей, предпочтительней использовать версию 1.3 или
следующие. Версии до 1.1 имели ошибку, которая препятствовала их работе
с Autoconf версии 2. Версии 1.3 и более поздние работают быстрее,
чем более ранние версии, поскольку с версии 1.3 GNU <CODE>m4</CODE> имеет
более эффективную реализацию diversions и может сохранить свое
состояние в файле, который потом может быстро считан обратно.




<H2><A NAME="SEC97" HREF="#autoconf_ru_toc_html_TOC97">Измененные имена файлов</A></H2>
<P>
@anchor{Changed File Names}


<P>
Если у вас есть файл <TT>`aclocal.m4'</TT>, установленный вместе с Autoconf
(а не в каталоге с исходными текстами), то вы
должны переименовать его в <TT>`acsite.m4'</TT>.  See section <A HREF="#autoconf_ru_2_html_SEC6">Использование программы <CODE>autoconf</CODE> для создания скрипта <CODE>configure</CODE></A>.


<P>
Если вы распространяете с вашим пакетом файл <TT>`install.sh'</TT>, то
переименуйте его в <TT>`install-sh'</TT>, так что встроенные правила
<CODE>make</CODE> не будут создавать на его основе файл
<TT>`install'</TT>. <CODE>AC_PROG_INSTALL</CODE> ищет файл, пользуясь обоими
именами, но лучше использовать новое имя.


<P>
Если вы используете <TT>`config.h.top'</TT> или <TT>`config.h.bot'</TT>, то вы
все равно сможете их использовать, но будет лучше, если вы
объедините их в файл <TT>`acconfig.h'</TT>. See section <A HREF="#autoconf_ru_3_html_SEC17">Использование <CODE>autoheader</CODE> для создания <TT>`config.h.in'</TT></A>.




<H2><A NAME="SEC98" HREF="#autoconf_ru_toc_html_TOC98">Измененные файлы Makefile</A></H2>
<P>
@anchor{Changed Makefiles}


<P>
Добавьте <SAMP>`@CFLAGS@'</SAMP>, <SAMP>`@CPPFLAGS@'</SAMP> и <SAMP>`@LDFLAGS@'</SAMP> в
ваши файлы <TT>`Makefile.in'</TT>, чтобы туда попадали значения
соответствующих переменных среды, установленные при запуске
<CODE>configure</CODE>.  Это необязательно, но удобно для
пользователей.


<P>
Также добавьте <SAMP>`@configure_input@'</SAMP> в комментарий каждого из
входных файлов макроса <CODE>AC_OUTPUT</CODE>, кроме файлов <TT>`Makefile'</TT>,
чтобы выходные файлы содержали сообщение о том, что они созданы скриптом
<CODE>configure</CODE>. Автоматический выбор синтаксиса для комментариев в
файлах, для которых вызывается <CODE>AC_OUTPUT</CODE>, было бы слишком сложно.


<P>
Добавьте <TT>`config.log'</TT> и <TT>`config.cache'</TT> в список файлов,
которые вы удаляете с помощью цели <CODE>distclean</CODE>.


<P>
Если у вас в <TT>`Makefile.in'</TT> имеется следующее:



<PRE>
prefix = /usr/local
exec_prefix = ${prefix}
</PRE>

<P>
то вы должны изменить эту запись на следующую:



<PRE>
prefix = @prefix@
exec_prefix = @exec_prefix@
</PRE>

<P>
Старое поведение замены переменных без знаков <SAMP>`@'</SAMP> вокруг них
было удалено.




<H2><A NAME="SEC99" HREF="#autoconf_ru_toc_html_TOC99">Измененные макросы</A></H2>
<P>
@anchor{Changed Macros}


<P>
В Autoconf версии 2 многие макросы были переименованы.  Вы все равно
можете использовать старые имена, но новые имена макросов более понятны
и для них легче найти документацию. See section <A HREF="#autoconf_ru_15_html_SEC109">Старые имена макросов</A>, где приведена таблица соответствия новых имен старым именам.
Используйте программу <CODE>autoupdate</CODE> для
преобразования ваших файлов <TT>`configure.in'</TT> для использования новых
имен макросов. See section <A HREF="#autoconf_ru_13_html_SEC100">Использование <CODE>autoupdate</CODE> для обновления <CODE>configure</CODE></A>.


<P>
Некоторые макросы были заменены аналогичными, которые лучше выполняют
нужную задачу, но несовместимы по параметрам вызова.  Если вы получаете
предупреждения о вызове устаревших макросов во время запуска
<CODE>autoconf</CODE>, то можете спокойно игнорировать эти предупреждения,
но ваш скрипт <CODE>configure</CODE>, вообще, будет работать лучше, если вы
последуете советам заменить устаревший макрос на новый.  Аналогичным
образом был изменен механизм
выдачи результатов тестов.  Если вы использовали команды <CODE>echo</CODE> или
<CODE>AC_VERBOSE</CODE> (может быть, посредством <CODE>AC_COMPILE_CHECK</CODE>), то вывод
вашего скрипта <CODE>configure</CODE> будет выглядеть лучше, если вы станете
использовать макросы <CODE>AC_MSG_CHECKING</CODE> и <CODE>AC_MSG_RESULT</CODE>.
See section <A HREF="#autoconf_ru_6_html_SEC58">Выдача сообщений</A>.  Эти макросы лучше всего работают при
использовании кэшированных переменных.  See section <A HREF="#autoconf_ru_6_html_SEC55">Кэширование результатов</A>.




<H2><A NAME="SEC100" HREF="#autoconf_ru_toc_html_TOC100">Использование <CODE>autoupdate</CODE> для обновления <CODE>configure</CODE></A></H2>
<P>
@anchor{Invoking autoupdate}


<P>
Программа <CODE>autoupdate</CODE> обновляет файл <TT>`configure.in'</TT> заменяя
вызовы старых макросов Autoconf на вызовы макросов с новыми именами. В
Autoconf версии 2 большинство макросов были переименованы для
использования более общей и понятной схемы наименования.  Для описания
новой схемы именования See section <A HREF="#autoconf_ru_7_html_SEC61">Имена макросов</A>. Хотя макросы со старыми
именами все равно работают (see section <A HREF="#autoconf_ru_15_html_SEC109">Старые имена макросов</A>, где приведен
список старых имен макросов и соответствующих им новых имен), но если вы
обновите свои файлы для соответствия новым именам макросов, то файлы
<TT>`configure.in'</TT> станут читабельнее, а использовать свежую
документацию по Autoconf станет проще.


<P>
<A NAME="autoconf_ru_13_html_IDX504"></A>
Если <CODE>autoupdate</CODE> запущена без аргументов, то она обновляет
<TT>`configure.in'</TT>, делая резервную копию оригинальной версии файла с
использованием суффикса <TT>`~'</TT> (или значения переменной среды
<CODE>SIMPLE_BACKUP_SUFFIX</CODE>, если она установлена). Если вы зададите
аргумент программе <CODE>autoupdate</CODE>, то она будет считывать данные из
этого файла вместо <TT>`configure.in'</TT> и выводить данные в поток
стандартного вывода.


<P>
<CODE>autoupdate</CODE> распознает следующие ключи командной строки:


<DL COMPACT>

<DT><CODE>--help</CODE>
<DD>
<DT><CODE>-h</CODE>
<DD>
Выдает список ключей командной строки и прекращает работу.

<DT><CODE>--macrodir=<VAR>dir</VAR></CODE>
<DD>
<DT><CODE>-m <VAR>dir</VAR></CODE>
<DD>
<A NAME="autoconf_ru_13_html_IDX505"></A>
Ищет файлы с макросами Autoconf в каталоге <VAR>dir</VAR>, а не в каталоге, в
который производилась установка.  Вы также задать путь к этому каталогу
в переменной среды <CODE>AC_MACRODIR</CODE>; использование этого ключа
перекрывает переменную среды.

<DT><CODE>--version</CODE>
<DD>
Выдает номер версии <CODE>autoupdate</CODE> и прекращает работу.
</DL>



<H2><A NAME="SEC101" HREF="#autoconf_ru_toc_html_TOC101">Измененные результаты</A></H2>
<P>
@anchor{Changed Results}


<P>
Если вы проверяли результаты предыдущих тестов путем проверки переменной
командного процессора <CODE>DEFS</CODE>, то теперь вам необходимо
переключиться на проверку значений переменных кэша для данных
тестов. Переменная <CODE>DEFS</CODE> больше не существует во время запуска
<CODE>configure</CODE>; она создается только при генерации выходных файлов.
Это изменение поведения было сделано потому, что правильное
экранирование содержимого этой переменной оказалось слишком громоздким и 
неэффективным при
каждом вызове макроса <CODE>AC_DEFINE</CODE>. See section <A HREF="#autoconf_ru_6_html_SEC56">Имена переменных кэша</A>.


<P>
Например, вот фрагмент <TT>`configure.in'</TT>, написанного для Autoconf
версии 1:



<PRE>
AC_HAVE_FUNCS(syslog)
case "$DEFS" in
*-DHAVE_SYSLOG*) ;;
*) # syslog не находится в библиотеках по умолчанию. Смотрим, есть ли он в
   # других библиотеках.
  saved_LIBS="$LIBS"
  for lib in bsd socket inet; do
    AC_CHECKING(for syslog in -l$lib)
    LIBS="$saved_LIBS -l$lib"
    AC_HAVE_FUNCS(syslog)
    case "$DEFS" in
    *-DHAVE_SYSLOG*) break ;;
    *) ;;
    esac
    LIBS="$saved_LIBS"
  done ;;
esac
</PRE>

<P>
Вот как это записывается для версии 2:



<PRE>
AC_CHECK_FUNCS(syslog)
if test $ac_cv_func_syslog = no; then
  # syslog не находится в библиотеках по умолчанию. Смотрим, есть ли он в
  # других библиотеках.
  for lib in bsd socket inet; do
    AC_CHECK_LIB($lib, syslog, [AC_DEFINE(HAVE_SYSLOG)
      LIBS="$LIBS $lib"; break])
  done
fi
</PRE>

<P>
Если вы обходили ошибку в макросе <CODE>AC_DEFINE_UNQUOTED</CODE>, добавляя
символы обратной косой черты перед кавычками, то теперь вам придется
удалить их.  Этот макрос сейчас работает предсказуемо и не рассматривает
особым образом кавычки (кроме обратных).  See section <A HREF="#autoconf_ru_6_html_SEC54">Установка выходных переменных</A>.


<P>
Все логические переменные командного процессора, устанавливаемые
макросами Autoconf, используют <SAMP>`yes'</SAMP> для истинных
переменных. Большинство из них использует <SAMP>`no'</SAMP> для ложных значений,
хотя для обратной совместимости некоторые из них используют пустую
строку. Если вы полагались, что переменная командного процессора будет
установлена в что-нибудь типа <SAMP>`1'</SAMP> или <SAMP>`t'</SAMP> для истинного значения,
то вам необходимо изменить ваши тесты.




<H2><A NAME="SEC102" HREF="#autoconf_ru_toc_html_TOC102">Измененное написание макросов</A></H2>
<P>
@anchor{Changed Macro Writing}


<P>
При определении ваших собственных макросов вы должны использовать
макрос <CODE>AC_DEFUN</CODE> вместо <CODE>define</CODE>. <CODE>AC_DEFUN</CODE>
автоматически вызывает макрос <CODE>AC_PROVIDE</CODE> и проверяет, что макросы,
вызываемые через <CODE>AC_REQUIRE</CODE>, не прерывают другие макросы, для
предотвращения вложенных сообщений <SAMP>`checking...'</SAMP> на экране.  На 
самом деле, старый способ не причинит вреда, но он менее удобен и менее
привлекателен.  See section <A HREF="#autoconf_ru_7_html_SEC60">Определение макросов</A>.


<P>
Вы, вероятно, рассматривали макросы, поставляемые с Autoconf, как
руководство по написанию макросов.  Посмотрите на новую их версию,
потому что стиль некоторых макросов сильно улучшен, а новые возможности
активно используются.


<P>
Если вы делали хитрые вещи, используя недокументированные свойства
Autoconf (макросы, переменные, diversions), то проверьте, не нужно ли
изменить что-нибудь, чтобы учесть сделанные в Autoconf изменения.  Может 
быть, теперь вы можете пользоваться стандартной возможностью версии 2,
вместо того, чтобы упражняться в изобретательности.  Или нет.


<P>
Для ускорения работы написанных вами макросов добавьте в них поддержку
кэширования. Просмотрите все ваши тесты, может быть их нужно оформить в
виде макросов, которые вы сможете использовать в разных пакетах.


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_12_html">previous</A>, <A HREF="#autoconf_ru_14_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_12_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_11_html">previous</A>, <A HREF="#autoconf_ru_13_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC91" HREF="#autoconf_ru_toc_html_TOC91">Вопросы об Autoconf</A></H1>
<P>
@anchor{Questions}


<P>
Раз за разом задаются одни и те же вопросы об Autoconf.  Вот некоторые
из них.




<H2><A NAME="SEC92" HREF="#autoconf_ru_toc_html_TOC92">Распространение скриптов <CODE>configure</CODE></A></H2>
<P>
@anchor{Distributing}



<PRE>
Какие ограничения существуют на распространение скриптов <CODE>configure</CODE>,
созданных Autoconf?  Как могут затронуть они мою программу, которая 
использует эти скрипты?
</PRE>

<P>
На использование или распространение скриптов настройки, созданных
Autoconf, не накладывается никаких ограничений. В Autoconf версии 1, они
подпадали под действие GNU General Public License.  Мы все еще поощряем
авторов к распространению их работ под действием лицензий, сходных с GPL,
но это не обязательно при использовании Autoconf.


<P>
По поводу других файлов, которые могут быть использованы с <CODE>configure</CODE>:
<TT>`config.h.in'</TT> находятся под теми авторскими правами, которые
используются для вашего <TT>`configure.in'</TT>, поскольку эти файлы
являются производными этого файла и свободно доступного файла
<TT>`acconfig.h'</TT>.  <TT>`config.sub'</TT> и <TT>`config.guess'</TT> не подпадают 
под GPL в том случае, когда они используются со скриптами
<CODE>configure</CODE>, созданными с помощью Autoconf: в этом случае вы можете 
распространять их под той же лицензией, что и остальной
пакет.  <TT>`install-sh'</TT> получен от X Consortium и не защищен
авторскими правами.




<H2><A NAME="SEC93" HREF="#autoconf_ru_toc_html_TOC93">Почему требуется GNU <CODE>m4</CODE>?</A></H2>
<P>
@anchor{Why GNU m4}



<PRE>
Почему Autoconf требует наличия GNU <CODE>m4</CODE>?
</PRE>

<P>
Многие из реализаций <CODE>m4</CODE> имеют зашитые в программу
ограничения на размер и количество макросов, которые Autoconf не может
преодолеть.  В них также отсутствуют некоторые встроенные макросы, без
которых было бы трудно создать такое сложное приложение, как Autoconf, включая:



<PRE>
builtin
indir
patsubst
__file__
__line__
</PRE>

<P>
Поскольку Autoconf нужен только людям, сопровождающим программное
обеспечение, и поскольку GNU <CODE>m4</CODE> прост в настройке и установке, то
кажется вполне естественным, что также требуется установить GNU
<CODE>m4</CODE>. Многие люди, сопровождающие программное обеспечение GNU и
другое свободное ПО, уже установили у себя большинство утилит GNU,
потому что предпочитают именно их.




<H2><A NAME="SEC94" HREF="#autoconf_ru_toc_html_TOC94">Как я могу начать работу?</A></H2>
<P>
@anchor{Bootstrapping}



<PRE>
Если Autoconf требует GNU <CODE>m4</CODE>, а GNU <CODE>m4</CODE> имеет скрипт 
Autoconf <CODE>configure</CODE>, то как я могу начать работу? Это похоже на 
проблему яйца и курицы!
</PRE>

<P>
Вы неправильно поняли.  Хотя GNU <CODE>m4</CODE>и поставляется со скриптом
<CODE>configure</CODE>, созданным Autoconf, сам Autoconf не требуется для
запуска скрипта и установки GNU <CODE>m4</CODE>. Autoconf требуется только
если вы хотите изменить скрипт <CODE>configure</CODE> для <CODE>m4</CODE>, а это
требуется немногим (в основном тем, кто сопровождает данный пакет).




<H2><A NAME="SEC95" HREF="#autoconf_ru_toc_html_TOC95">Почему не используется Imake?</A></H2>
<P>
@anchor{Why Not Imake}



<PRE>
Почему не используется Imake вместо скриптов <CODE>configure</CODE>?
</PRE>

<P>
Разные люди писали ответы на этот вопрос, так что я приведу здесь
переделанный вариант их объяснений.


<P>
Следующий ответ основан на материале, написанном Richard Pixley:


<P>
Скрипты, созданные Autoconf, часто работают на машинах, для которых они не
были предназначены.  То есть они хорошо работают, когда нужно создать
конфигурацию для совершенно новой системы.  Imake такого не умеет.


<P>
Imake использует общую базу данных, специфических для конкретных
систем.  Для X11 этого достаточно, потому что этот пакет делается одной
организацией, которая имеет централизованный контроль над этой базой
данных.


<P>
Утилиты GNU выпускаются не так.  Каждую утилиту GNU сопровождает
отдельный человек, и эти люди разбросаны по всему миру.   Использование
общей базы данных будет просто кошмаром при
сопровождении пакета. Autoconf может показаться неким
подобием базы данных, но на самом деле это не так.  Вместо
перечисления зависимостей от машины, он перечисляет требования программ.


<P>
Если вы рассматриваете набор GNU как набор отдельных утилит, то
возникают сходные проблемы. Но утилиты разработки GNU могут быть
настроены как кросс-утилиты в почти любом сочетании машина+цель. Все эти
конфигурации могут быть установлены одновременно. Она даже могут делить
между собой не зависящие от машины файлы. Imake не позволяет сделать
этого.


<P>
Шаблоны Imake являются формой стандартизации. Стандарты кодирования GNU
позволяют сделать это без ненужного наложения тех же самых ограничений.


<P>
Вот дополнительные объяснения, написанные Per Bothner:


<P>
Одним из преимуществ Imake является то, что он легко создает большие
файлы Makefile, используя директивы препроцессора <CODE>cpp</CODE>
<SAMP>`#include'</SAMP> и механизм макросов. Однако на <CODE>cpp</CODE> невозможно
программировать: у него ограниченные возможности условных операторов и
нет операторов циклов.  Помимо того, <CODE>cpp</CODE> не имеет доступа к
переменным среды.


<P>
Все эти проблемы решаются использованием командного процессора <CODE>sh</CODE>
вместо <CODE>cpp</CODE>. Командный процессор предоставляет полные возможности
программирования, имеет подстановку макросов, может выполнять или
создавать другие скрипты командного процессора и может пользоваться
переменными среды.


<P>
Paul Eggert развил эту тему дальше:


<P>
При использовании Autoconf установщикам пакета не нужно предполагать, что
Imake уже установлен и работает правильно. Это не кажется таким уж
большим достоинством для людей привыкших к Imake, но на многих машинах
Imake не установлен или установка по умолчанию работает не совсем
правильно и, таким образом, требование наличия Imake для установки пакета
будет препятствовать его распространению на таких машинах. Например,
файлы шаблонов и настроек Imake могут быть установлены неправильно на
машине, или процедура построения, используемая Imake, может неправильно
предполагать, что все исходные тексты находятся в одном большом дереве
каталогов, или настройка Imake может предполагать, что имеется один
компилятор, в то время как вам необходимо использовать другой
компилятор, или могут быть несоответствия между версиями Imake,
используемой пакетом и версией Imake, поддерживаемой данной машиной. Эти
проблемы встречаются намного реже при использовании Autoconf, поскольку
каждый пакет поставляется со своим, независимым препроцессором
конфигурации.


<P>
Также Imake часто страдает от неожиданного взаимодействия между
<CODE>make</CODE> и препроцессором C. Фундаментальной проблемой является то,
что препроцессор C был создан для обработки программ на языке C, а не
файлов <TT>`Makefile'</TT>.  Это является менее значимой проблемой при
использовании Autoconf, который использует препроцессор общего
назначения <CODE>m4</CODE>, а автор пакета (а не установщик пакета)
выполняет обработку стандартным способом.


<P>
В заключение, Mark Eichin замечает:


<P>
Imake, в конце концов, не такой уж и расширяемый.  Для того, чтобы добавить к
Imake новую возможность, вам необходимо создать собственный шаблон для
проекта и сдублировать большинство возможностей существующего
шаблона. Это означает, что для сложного проекта использование
поставляемых производителем шаблонов Imake приведет к сбою ---
поскольку они не предоставляют возможностей, в которых нуждается ваш
проект (если только он не является программой для X11).


<P>
Однако с другой стороны:


<P>
Одно из преимуществ Imake по сравнению с <CODE>configure</CODE>: файлы
<TT>`Imakefile'</TT> оказываются значительно меньше (более того, они менее
многословны), чем файлы <TT>`Makefile.in'</TT>. Однако существуют решения
этой проблемы--- по крайней мере для исходных текстов Kerberos V5,
мы изменили файлы для вызова общих частей: фрагментов <TT>`Makefile'</TT> для всего
дерева каталогов, которые находятся в файлах <TT>`post.in'</TT> и
<TT>`pre.in'</TT>.  Это означает, что часть общей функциональности не дублируется,
даже хотя они будут находиться в скриптах <CODE>configure</CODE>.


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_11_html">previous</A>, <A HREF="#autoconf_ru_13_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_14_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_13_html">previous</A>, <A HREF="#autoconf_ru_15_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC103" HREF="#autoconf_ru_toc_html_TOC103">История Autoconf</A></H1>
<P>
@anchor{History}


<P>
Вы спросите, зачем вообще Autoconf был написан?  Как он оказался там,
где он сейчас есть?  Почему он выглядит подобно плевку гориллы? Если вы
не интересуетесь такими вопросами, то в этой главе ничего полезного для
вас нет, и вы можете спокойно пропустить ее.  Но если вам
<EM>действительно</EM> интересно, то я пролью немного света....




<H2><A NAME="SEC104" HREF="#autoconf_ru_toc_html_TOC104">Бытие</A></H2>

<P>
В июне 1991 года я сопровождал много утилит GNU для Free Software
Foundation. По мере того, как они переносились на все большее количество
платформ, количество ключей <SAMP>`-D'</SAMP>, которое пользователю надо было
выбрать в <TT>`Makefile'</TT> (около 20), становилось обременительным.
Особенно для меня--- я тестировал каждую новую версию на различных
платформах. Так что я написал для пакета fileutils небольшой скрипт на
языке командного процессора для определения некоторых правильных
настроек, и я выпустил его как часть пакета fileutils 2.0. Этот скрипт
<CODE>configure</CODE> работал достаточно хорошо, так что в следующем месяце я
вручную адаптировал его для создания подобных скриптов <CODE>configure</CODE>
для нескольких других пакетов утилит GNU. Brian Berliner также
адаптировал один из моих скриптов к своей системе контроля версий CVS.


<P>
Позже, тем же летом, я узнал, что Richard Stallman и Richard Pixley
разработали аналогичные скрипты для использования в наборе утилит
компиляции GNU; так что я адаптировал мои скрипты <CODE>configure</CODE> для
поддержки развивающегося интерфейса их скриптов: использование файлов
<TT>`Makefile.in'</TT> как шаблонов; добавление <SAMP>`+srcdir'</SAMP>, первого
ключа (из многих); и создание файлов <TT>`config.status'</TT>.




<H2><A NAME="SEC105" HREF="#autoconf_ru_toc_html_TOC105">Исход</A></H2>

<P>
По мере получения ответов от пользователей я добавил много улучшений,
используя Emacs для поиска и замены, вырезания и вставки, одних и тех же 
изменений в каждом из скриптов. По мере того, как все большее количество 
утилит GNU были адаптированы для использования скриптов
<CODE>configure</CODE>, ручное обновление становилось все более неудобно.
Rich Murphey, сопровождавший
графические утилиты GNU, послал мне письмо, в котором писал, что скрипты
<CODE>configure</CODE> работают очень хорошо, и спрашивал, нету ли у меня
утилиты для их генерации, и могу ли я послать ее ему. Нет, я думал, но я
должен был! Так, что я начал работать над тем, как создавать эти
файлы. Так началось путешествие от рабства написанных вручную скриптов
<CODE>configure</CODE> к изобилию и легкости Autoconf.


<P>
Пакет Cygnus <CODE>configure</CODE>, который был разработан примерно в то же
время, управлялся таблицей; он предназначался в основном для работы с
небольшим количеством типов систем и небольшим количеством возможностей, 
которые по большей части нельзя было автоматически определить (например, 
детали формата объектных файлов).
Автоматическая система настройки, которую Brian Fox разработал
для Bash, использовала аналогичный подход.  Для общего пользования, мне
кажется безнадежной попытка сопровождать постоянно обновляемую базу
данных возможностей каждого из вариантов каждой операционной системы.
Легче и надежнее будет проверять большинство свойств на лету---
особенно на гибридных системах, которые люди изменяли локально, или на
которых были установлены заплатки от производителя.


<P>
Я рассматривал архитектуру, сходную с используемой в Cygnus
<CODE>configure</CODE>, где имеется один скрипт <CODE>configure</CODE>, который при
запуске считывает части <TT>`configure.in'</TT>. Но я не хотел
распространять с каждым пакетом тесты для всех возможностей, так что я пришел к
решению иметь разные скрипты <CODE>configure</CODE>, созданные из
<TT>`configure.in'</TT> с помощью препроцессора.  Этот подход также
представлял больший контроль и большую гибкость.


<P>
Я также ознакомился с использованием пакета Metaconfig, созданного Larry
Wall, Harlan Stenn и Raphael Manfredi, но я решил не использовать его по
нескольким причинам. Создаваемые с его помощью скрипты <CODE>Configure</CODE>
являются интерактивными, что я нашел достаточно неудобным; мне не
понравился способ, каким он проверял некоторые возможности (такие как
наличие библиотечных функций); я не знал, сопровождался ли он тогда все
еще, а скрипты <CODE>Configure</CODE>, которые я рассматривал, не
работали на многих современных системах (таких как System V R4 и NeXT);
у него не было достаточной гибкости в реакции на наличие или отсутствие
какой-либо возможности; я нашел его трудным в освоении; он был слишком
большим и сложным для моих нужд (я не осознавал тогда, как сильно
придется развить Autoconf).


<P>
Я рассматривал использование языка Perl для создания моих скриптов
<CODE>configure</CODE>, но решил, что <CODE>m4</CODE> лучше для выполнения простых
текстовых подстановок: это получается проще, поскольку операция вывода
подразумевается по умолчанию.  Плюс к тому, каждый пользователь уже имеет его в своей
системе. (В начале я не полагался на расширения GNU для <CODE>m4</CODE>).
Несколько моих друзей в университете штата Maryland создавали надстройки 
на <CODE>m4</CODE> для разных программ, включая <CODE>tvtwm</CODE>, и я был
заинтересован в изучении нового языка.




<H2><A NAME="SEC106" HREF="#autoconf_ru_toc_html_TOC106">Левит</A></H2>

<P>
Поскольку мои скрипты <CODE>configure</CODE> определяли возможности системы
автоматически, без интерактивного взаимодействия с пользователем, я
решил назвать программу, которая создавала эти скрипты именем
Autoconfig. Но с добавлением номера версии, это имя было слишком длинным
для старых систем UNIX, так что я укоротил имя до Autoconf.


<P>
Осенью 1991 я собрал группу товарищей, чтобы начать поиски Чаши Грааля
Переносимости (эээ, ну, то есть, чтобы они тестировали альфа-версии).
Они предоставляли мне обратную связь, а я занимался инкапсуляцией
кусочков моих вручную написанных скриптов в макросы <CODE>m4</CODE>, добавлял
возможности и улучшал технологию проверок.  Среди тестеров особенно
выделялись:
Pinard, кто выдвинул идею сделать <TT>`autoconf'</TT> скриптом командного
процессора, который запускал бы <CODE>m4</CODE> и проверял бы, чтобы все
макросы были обработаны; Richard Pixley, кто предложил для получения более точных
результатов запускать компилятор вместо поиска заголовочных файлов и
символов по файловой системе; Karl Berry, который использовал Autoconf для
настройки TeX и добавил индекс макросов в документацию; а
также Ian Taylor, который добавил поддержку создания заголовочного файла
C как альтернативу помещения ключей <SAMP>`-D'</SAMP> в <TT>`Makefile'</TT>, так что
он смог использовать Autoconf для пакета UUCP.  Люди, тестировавшие
альфа-версии, бодро изменяли свои файлы снова и снова, поскольку имена и
соглашения о вызовах изменялись от версии к версии Autoconf. Они также
предоставили мне множество специфических проверок, отличных идей и
исправленных ошибок.




<H2><A NAME="SEC107" HREF="#autoconf_ru_toc_html_TOC107">Числа</A></H2>

<P>
В июле 1992, после месяцев тестирований альфа-версий, я выпустил
Autoconf 1.0, и преобразовал много утилит GNU для его использования. Я
был очень удивлен положительной реакцией на выпуск пакета. Так много
людей стало использовать его, так что я не смог отслеживать их, включая
людей, работающих над программным обеспечением, которое не является
частью проекта GNU (например, TCL, FSP и Kerberos V5).  Autoconf
продолжал быстро развиваться, поскольку множество людей, использующих
<CODE>configure</CODE>, писали мне о проблемах, с которыми встретились.


<P>
Autoconf превратился в хороший тест реализаций <CODE>m4</CODE>. UNIX <CODE>m4</CODE>
начали выдавать дампы памяти, из-за длины макросов, определяемых
Autoconf; несколько ошибок было найдено в GNU <CODE>m4</CODE>.  В
конечном счете мы осознали, что нам необходимо использовать некоторые
возможности, которые имеются только в GNU <CODE>m4</CODE>.  В частности, версия
4.3BSD <CODE>m4</CODE> имела слишком маленький набор встроенных макросов; версия для
System V немного лучше, но все равно не предоставляла всех нужных нам
возможностей.


<P>
Происходила дальнейшая разработка по мере того, как люди Autoconf в
более жесткие условия (и использовали так, как я не ожидал). Karl Berry
добавил проверки для X11. David Zuhn сделал поддержку C++.
Pinard сделал диагностику неправильных аргументов. Jim Blandy
использовал пакет для настройки GNU Emacs, закладывая фундамент для
некоторых последующих улучшений.  Roland McGrath, использовавший пакет для
библиотеки GNU C, написал скрипт <CODE>autoheader</CODE> для автоматизации
создания шаблонов заголовочных файлов C, а также добавил ключ
<SAMP>`--verbose'</SAMP> к <CODE>configure</CODE>. Noah Friedman добавил поддержку
ключа <SAMP>`--macrodir'</SAMP> и переменной среды <CODE>AC_MACRODIR</CODE>. (Он также
ввел в употребление термин <EM>autoconfiscate</EM>, который означает "адаптировать
программное обеспечение для использования Autoconf".)  Roland и Noah
улучшили экранирование специальных символов в макросе <CODE>AC_DEFINE</CODE> и исправили множество
ошибок, особенно когда я пресытился проблемами с переносимостью
с февраля по июнь 1993.




<H2><A NAME="SEC108" HREF="#autoconf_ru_toc_html_TOC108">Второзаконие</A></H2>

<P>
Постепенно накапливался длинный список важных возможностей, которыми
хотелось бы пользоваться, а несколько лет, в течение которых множество
людей накладывали на Autoconf заплатки, привели к накоплению всякого
хлама, который невозможно было вычистить.  В
апреле 1994, в процессе работы на Cygnus Support, я начал полный
пересмотр Autoconf.  Я добавил большинство возможностей, которые
отсутствовали в Autoconf, но присутствовали в Cygnus <CODE>configure</CODE> -- в
основном адаптируя некоторые части Cygnus <CODE>configure</CODE> с помощью
David Zuhn и Ken Raeburn.  Эти возможности включают поддержку использования
<TT>`config.sub'</TT>, <TT>`config.guess'</TT>, <SAMP>`--host'</SAMP> и <SAMP>`--target'</SAMP>;
создание ссылок на файлы; и запуск скриптов <CODE>configure</CODE> в
подкаталогах. Добавление этих возможностей позволило Ken'у преобразовать для использования
Autoconf GNU <CODE>as</CODE>, а Rob'у Savoye -- DejaGNU.


<P>
Я добавил множество возможностей, о которых просили разные люди.  Многие
просили, чтобы скрипты <CODE>configure</CODE> могли использовать результаты
проверок при последующих запусках, потому что (особенно при настройке
большого дерева исходных текстов, как, например, делает Cygnus) они были
ужасающе медленны.  Mike Haertel предложил добавить специфические для
машин скрипты инициализации. Люди, распространяющие программное
обеспечение, которое будет работать на MS-DOS, просили предоставить
возможность переопределения расширений <TT>`.in'</TT> в именах файлов, из-за 
чего появлялись имена типа <TT>`config.h.in'</TT>, содержащие две точки.
Jim Avera сделал обширное исследование проблем с экранированием кавычек
в макросах <CODE>AC_DEFINE</CODE> и <CODE>AC_SUBST</CODE>; его
проницательность привела к значительным улучшениям.  Richard Stallman
просил, чтобы вывод компилятора посылался в файл <TT>`config.log'</TT>
вместо <TT>`/dev/null'</TT>, чтобы помочь людям отлаживать скрипты
<CODE>configure</CODE> для Emacs.


<P>
Я сделал некоторые изменения, потому что был недоволен качеством
программы.  Я сделал сообщения о результатах проверок менее
двусмысленными, и сделал так, чтобы эти сообщения всегда выдавались.
Я подправил имена
макросов и подправил несовместимости со стандартами кодирования. Я
добавил некоторые вспомогательные утилиты, которые были разработаны,
чтобы помочь в адаптации пакетов для использования
Autoconf. С помощью
Pinard, я сделал так, чтобы макросы не прерывали другие сообщения других
макросов. (Эта возможность вывела на чистую воду некоторые узкие места в
производительности GNU <CODE>m4</CODE>, которые были поспешно исправлены!) Я
реорганизовал документацию, чтобы она вращалась вокруг тех самых
проблем, которые люди и хотели решить.  И я начал создавать набор
тестов, поскольку опыт показал, что Autoconf имеет ярко выраженную
тенденцию к регрессу при изменениях.


<P>
Опять же, несколько альфа-тестеров дали бесценную
информацию, особенно
Pinard, Jim Meyering, Karl Berry, Rob Savoye, Ken Raeburn и Mark Eichin.


<P>
В конце концов, версия 2.0 была готова. И было много радости по этому
поводу. (И у меня опять появилось свободное время.  Кажется.  Нет, я
уверен!)


<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_13_html">previous</A>, <A HREF="#autoconf_ru_15_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<a name="autoconf_ru_15_html"></a>
<A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_14_html">previous</A>, <A HREF="#autoconf_ru_16_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC109" HREF="#autoconf_ru_toc_html_TOC109">Старые имена макросов</A></H1>
<P>
@anchor{Old Macro Names}


<P>
В Autoconf версии 2, большинство макросов было переименовано для
использования более обобщенной и информативной схемы наименования.  Вот старые
имена макросов, которые были переименованы, и новые имена, которым они
соответствуют.  Хотя старые имена все равно можно
использовать с программой <CODE>autoconf</CODE> для обратной совместимости,
старые имена макросов считаются устаревшими. Для описания новой схемы
наименования See section <A HREF="#autoconf_ru_7_html_SEC61">Имена макросов</A>.


<DL COMPACT>

<DT><CODE>AC_ALLOCA</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX506"></A>
<CODE>AC_FUNC_ALLOCA</CODE>
<DT><CODE>AC_ARG_ARRAY</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX507"></A>
удален из-за ограниченной полезности
<DT><CODE>AC_CHAR_UNSIGNED</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX508"></A>
<CODE>AC_C_CHAR_UNSIGNED</CODE>
<DT><CODE>AC_CONST</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX509"></A>
<CODE>AC_C_CONST</CODE>
<DT><CODE>AC_CROSS_CHECK</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX510"></A>
<CODE>AC_C_CROSS</CODE>
<DT><CODE>AC_ERROR</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX511"></A>
<CODE>AC_MSG_ERROR</CODE>
<DT><CODE>AC_FIND_X</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX512"></A>
<CODE>AC_PATH_X</CODE>
<DT><CODE>AC_FIND_XTRA</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX513"></A>
<CODE>AC_PATH_XTRA</CODE>
<DT><CODE>AC_FUNC_CHECK</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX514"></A>
<CODE>AC_CHECK_FUNC</CODE>
<DT><CODE>AC_GCC_TRADITIONAL</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX515"></A>
<CODE>AC_PROG_GCC_TRADITIONAL</CODE>
<DT><CODE>AC_GETGROUPS_T</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX516"></A>
<CODE>AC_TYPE_GETGROUPS</CODE>
<DT><CODE>AC_GETLOADAVG</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX517"></A>
<CODE>AC_FUNC_GETLOADAVG</CODE>
<DT><CODE>AC_HAVE_FUNCS</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX518"></A>
<CODE>AC_CHECK_FUNCS</CODE>
<DT><CODE>AC_HAVE_HEADERS</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX519"></A>
<CODE>AC_CHECK_HEADERS</CODE>
<DT><CODE>AC_HAVE_POUNDBANG</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX520"></A>
<CODE>AC_SYS_INTERPRETER</CODE> (отличающееся соглашение по вызову)
<DT><CODE>AC_HEADER_CHECK</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX521"></A>
<CODE>AC_CHECK_HEADER</CODE>
<DT><CODE>AC_HEADER_EGREP</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX522"></A>
<CODE>AC_EGREP_HEADER</CODE>
<DT><CODE>AC_INLINE</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX523"></A>
<CODE>AC_C_INLINE</CODE>
<DT><CODE>AC_LN_S</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX524"></A>
<CODE>AC_PROG_LN_S</CODE>
<DT><CODE>AC_LONG_DOUBLE</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX525"></A>
<CODE>AC_C_LONG_DOUBLE</CODE>
<DT><CODE>AC_LONG_FILE_NAMES</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX526"></A>
<CODE>AC_SYS_LONG_FILE_NAMES</CODE>
<DT><CODE>AC_MAJOR_HEADER</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX527"></A>
<CODE>AC_HEADER_MAJOR</CODE>
<DT><CODE>AC_MINUS_C_MINUS_O</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX528"></A>
<CODE>AC_PROG_CC_C_O</CODE>
<DT><CODE>AC_MMAP</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX529"></A>
<CODE>AC_FUNC_MMAP</CODE>
<DT><CODE>AC_MODE_T</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX530"></A>
<CODE>AC_TYPE_MODE_T</CODE>
<DT><CODE>AC_OFF_T</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX531"></A>
<CODE>AC_TYPE_OFF_T</CODE>
<DT><CODE>AC_PID_T</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX532"></A>
<CODE>AC_TYPE_PID_T</CODE>
<DT><CODE>AC_PREFIX</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX533"></A>
<CODE>AC_PREFIX_PROGRAM</CODE>
<DT><CODE>AC_PROGRAMS_CHECK</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX534"></A>
<CODE>AC_CHECK_PROGS</CODE>
<DT><CODE>AC_PROGRAMS_PATH</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX535"></A>
<CODE>AC_PATH_PROGS</CODE>
<DT><CODE>AC_PROGRAM_CHECK</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX536"></A>
<CODE>AC_CHECK_PROG</CODE>
<DT><CODE>AC_PROGRAM_EGREP</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX537"></A>
<CODE>AC_EGREP_CPP</CODE>
<DT><CODE>AC_PROGRAM_PATH</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX538"></A>
<CODE>AC_PATH_PROG</CODE>
<DT><CODE>AC_REMOTE_TAPE</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX539"></A>
удален из-за ограниченной полезности
<DT><CODE>AC_RESTARTABLE_SYSCALLS</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX540"></A>
<CODE>AC_SYS_RESTARTABLE_SYSCALLS</CODE>
<DT><CODE>AC_RETSIGTYPE</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX541"></A>
<CODE>AC_TYPE_SIGNAL</CODE>
<DT><CODE>AC_RSH</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX542"></A>
удален из-за ограниченной полезности
<DT><CODE>AC_SETVBUF_REVERSED</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX543"></A>
<CODE>AC_FUNC_SETVBUF_REVERSED</CODE>
<DT><CODE>AC_SET_MAKE</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX544"></A>
<CODE>AC_PROG_MAKE_SET</CODE>
<DT><CODE>AC_SIZEOF_TYPE</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX545"></A>
<CODE>AC_CHECK_SIZEOF</CODE>
<DT><CODE>AC_SIZE_T</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX546"></A>
<CODE>AC_TYPE_SIZE_T</CODE>
<DT><CODE>AC_STAT_MACROS_BROKEN</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX547"></A>
<CODE>AC_HEADER_STAT</CODE>
<DT><CODE>AC_STDC_HEADERS</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX548"></A>
<CODE>AC_HEADER_STDC</CODE>
<DT><CODE>AC_STRCOLL</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX549"></A>
<CODE>AC_FUNC_STRCOLL</CODE>
<DT><CODE>AC_ST_BLKSIZE</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX550"></A>
<CODE>AC_STRUCT_ST_BLKSIZE</CODE>
<DT><CODE>AC_ST_BLOCKS</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX551"></A>
<CODE>AC_STRUCT_ST_BLOCKS</CODE>
<DT><CODE>AC_ST_RDEV</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX552"></A>
<CODE>AC_STRUCT_ST_RDEV</CODE>
<DT><CODE>AC_SYS_SIGLIST_DECLARED</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX553"></A>
<CODE>AC_DECL_SYS_SIGLIST</CODE>
<DT><CODE>AC_TEST_CPP</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX554"></A>
<CODE>AC_TRY_CPP</CODE>
<DT><CODE>AC_TEST_PROGRAM</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX555"></A>
<CODE>AC_TRY_RUN</CODE>
<DT><CODE>AC_TIMEZONE</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX556"></A>
<CODE>AC_STRUCT_TIMEZONE</CODE>
<DT><CODE>AC_TIME_WITH_SYS_TIME</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX557"></A>
<CODE>AC_HEADER_TIME</CODE>
<DT><CODE>AC_UID_T</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX558"></A>
<CODE>AC_TYPE_UID_T</CODE>
<DT><CODE>AC_UTIME_NULL</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX559"></A>
<CODE>AC_FUNC_UTIME_NULL</CODE>
<DT><CODE>AC_VFORK</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX560"></A>
<CODE>AC_FUNC_VFORK</CODE>
<DT><CODE>AC_VPRINTF</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX561"></A>
<CODE>AC_FUNC_VPRINTF</CODE>
<DT><CODE>AC_WAIT3</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX562"></A>
<CODE>AC_FUNC_WAIT3</CODE>
<DT><CODE>AC_WARN</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX563"></A>
<CODE>AC_MSG_WARN</CODE>
<DT><CODE>AC_WORDS_BIGENDIAN</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX564"></A>
<CODE>AC_C_BIGENDIAN</CODE>
<DT><CODE>AC_YYTEXT_POINTER</CODE>
<DD>
<A NAME="autoconf_ru_15_html_IDX565"></A>
<CODE>AC_DECL_YYTEXT</CODE>
</DL>

<P><HR><P>
Go to the <A HREF="#autoconf_ru_1_html">first</A>, <A HREF="#autoconf_ru_14_html">previous</A>, <A HREF="#autoconf_ru_16_html">next</A>, <A HREF="#autoconf_ru_19_html">last</A> section, <A HREF="#autoconf_ru_toc_html">table of contents</A>
<hr>

<!--#include virtual="/footer.raw"-->

</body></html>