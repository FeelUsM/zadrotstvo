<!DOCTYPE html>
<!-- saved from url=(0057)https://nodejs.org/dist/latest-v6.x/docs/api/modules.html -->
<html lang="en" data-select-like-a-boss="1"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <title>Modules Node.js v6.3.1 Manual &amp; Documentation</title>
  <link rel="stylesheet" href="./Modules Node.js v6.3.1 Manual &amp; Documentation_files/css">
  <link rel="stylesheet" href="./Modules Node.js v6.3.1 Manual &amp; Documentation_files/style.css">
  <link rel="stylesheet" href="./Modules Node.js v6.3.1 Manual &amp; Documentation_files/sh.css">
  <link rel="canonical" href="https://nodejs.org/api/modules.html">
<style type="text/css">
:root #content > #center > .dose > .dosesingle,
:root #content > #right > .dose > .dosesingle
{ display: none !important; }</style><style></style></head>
<body class="alt apidoc" id="api-section-modules">
  <div id="content" class="clearfix">
    <div id="column2" class="interior">
      <div id="intro" class="interior">
        <a href="https://nodejs.org/" title="Go back to the home page">
          Node.js
        </a>
      </div>
      <ul>
<li><a class="nav-documentation" href="https://nodejs.org/dist/latest-v6.x/docs/api/documentation.html">About these Docs</a></li>
<li><a class="nav-synopsis" href="https://nodejs.org/dist/latest-v6.x/docs/api/synopsis.html">Usage &amp; Example</a></li>
</ul>
<div class="line"></div>

<ul>
<li><a class="nav-assert" href="https://nodejs.org/dist/latest-v6.x/docs/api/assert.html">Assertion Testing</a></li>
<li><a class="nav-buffer" href="https://nodejs.org/dist/latest-v6.x/docs/api/buffer.html">Buffer</a></li>
<li><a class="nav-addons" href="https://nodejs.org/dist/latest-v6.x/docs/api/addons.html">C/C++ Addons</a></li>
<li><a class="nav-child_process" href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html">Child Processes</a></li>
<li><a class="nav-cluster" href="https://nodejs.org/dist/latest-v6.x/docs/api/cluster.html">Cluster</a></li>
<li><a class="nav-cli" href="https://nodejs.org/dist/latest-v6.x/docs/api/cli.html">Command Line Options</a></li>
<li><a class="nav-console" href="https://nodejs.org/dist/latest-v6.x/docs/api/console.html">Console</a></li>
<li><a class="nav-crypto" href="https://nodejs.org/dist/latest-v6.x/docs/api/crypto.html">Crypto</a></li>
<li><a class="nav-debugger" href="https://nodejs.org/dist/latest-v6.x/docs/api/debugger.html">Debugger</a></li>
<li><a class="nav-dns" href="https://nodejs.org/dist/latest-v6.x/docs/api/dns.html">DNS</a></li>
<li><a class="nav-domain" href="https://nodejs.org/dist/latest-v6.x/docs/api/domain.html">Domain</a></li>
<li><a class="nav-errors" href="https://nodejs.org/dist/latest-v6.x/docs/api/errors.html">Errors</a></li>
<li><a class="nav-events" href="https://nodejs.org/dist/latest-v6.x/docs/api/events.html">Events</a></li>
<li><a class="nav-fs" href="https://nodejs.org/dist/latest-v6.x/docs/api/fs.html">File System</a></li>
<li><a class="nav-globals" href="https://nodejs.org/dist/latest-v6.x/docs/api/globals.html">Globals</a></li>
<li><a class="nav-http" href="https://nodejs.org/dist/latest-v6.x/docs/api/http.html">HTTP</a></li>
<li><a class="nav-https" href="https://nodejs.org/dist/latest-v6.x/docs/api/https.html">HTTPS</a></li>
<li><a class="nav-modules active" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html">Modules</a></li>
<li><a class="nav-net" href="https://nodejs.org/dist/latest-v6.x/docs/api/net.html">Net</a></li>
<li><a class="nav-os" href="https://nodejs.org/dist/latest-v6.x/docs/api/os.html">OS</a></li>
<li><a class="nav-path" href="https://nodejs.org/dist/latest-v6.x/docs/api/path.html">Path</a></li>
<li><a class="nav-process" href="https://nodejs.org/dist/latest-v6.x/docs/api/process.html">Process</a></li>
<li><a class="nav-punycode" href="https://nodejs.org/dist/latest-v6.x/docs/api/punycode.html">Punycode</a></li>
<li><a class="nav-querystring" href="https://nodejs.org/dist/latest-v6.x/docs/api/querystring.html">Query Strings</a></li>
<li><a class="nav-readline" href="https://nodejs.org/dist/latest-v6.x/docs/api/readline.html">Readline</a></li>
<li><a class="nav-repl" href="https://nodejs.org/dist/latest-v6.x/docs/api/repl.html">REPL</a></li>
<li><a class="nav-stream" href="https://nodejs.org/dist/latest-v6.x/docs/api/stream.html">Stream</a></li>
<li><a class="nav-string_decoder" href="https://nodejs.org/dist/latest-v6.x/docs/api/string_decoder.html">String Decoder</a></li>
<li><a class="nav-timers" href="https://nodejs.org/dist/latest-v6.x/docs/api/timers.html">Timers</a></li>
<li><a class="nav-tls" href="https://nodejs.org/dist/latest-v6.x/docs/api/tls.html">TLS/SSL</a></li>
<li><a class="nav-tty" href="https://nodejs.org/dist/latest-v6.x/docs/api/tty.html">TTY</a></li>
<li><a class="nav-dgram" href="https://nodejs.org/dist/latest-v6.x/docs/api/dgram.html">UDP/Datagram</a></li>
<li><a class="nav-url" href="https://nodejs.org/dist/latest-v6.x/docs/api/url.html">URL</a></li>
<li><a class="nav-util" href="https://nodejs.org/dist/latest-v6.x/docs/api/util.html">Utilities</a></li>
<li><a class="nav-v8" href="https://nodejs.org/dist/latest-v6.x/docs/api/v8.html">V8</a></li>
<li><a class="nav-vm" href="https://nodejs.org/dist/latest-v6.x/docs/api/vm.html">VM</a></li>
<li><a class="nav-zlib" href="https://nodejs.org/dist/latest-v6.x/docs/api/zlib.html">ZLIB</a></li>
</ul>
<div class="line"></div>

<ul>
<li><a class="nav-https-github-com-nodejs-node" href="https://github.com/nodejs/node">GitHub Repo &amp; Issue Tracker</a></li>
<li><a class="nav-http-groups-google-com-group-nodejs" href="http://groups.google.com/group/nodejs">Mailing List</a></li>
</ul>

    </div>

    <div id="column1" data-id="modules" class="interior">
      <header>
        <h1>Node.js v6.3.1 Documentation</h1>
        <div id="gtoc">
          <p>
            <a href="https://nodejs.org/dist/latest-v6.x/docs/api/index.html" name="toc">Index</a> |
            <a href="https://nodejs.org/dist/latest-v6.x/docs/api/all.html">View on single page</a> |
            <a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.json">View as JSON</a>
          </p>
        </div>
        <hr>
      </header>

      <div id="toc">
        <h2>Table of Contents</h2>
        <ul>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_modules">Модули</a><ul>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_accessing_the_main_module">Доступ к главному модулю</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_addenda_package_manager_tips">Дополнение: советы по пакетному менеджеру</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_all_together">Все вместе...</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_caching">Кэширование</a><ul>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_caching_caveats">Предостережения по кэштрованию модулей</a></li>
</ul>
</li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_core_modules">Базовые модули</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_cycles">Циклы</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_file_modules">Файлы модулей</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_folders_as_modules">Папки как модули</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_loading_from_node_modules_folders">Загрузка из папки <code>node_modules</code></a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_loading_from_the_global_folders">Загрузка из глобальных папок</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_the_module_wrapper">Обертка модуля</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_the_module_object">Объект <code>module</code></a><ul>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_children">module.children</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_exports">module.exports</a><ul>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_exports_alias">псевдоним exports</a></li>
</ul>
</li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_filename">module.filename</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_id">module.id</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_loaded">module.loaded</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_parent">module.parent</a></li>
<li><a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_require_id">module.require(id)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

      </div>

      <div id="apicontent">
        <h1>Модули<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_modules" id="modules_modules">#</a></span></h1>
<pre class="api_stability api_stability_3 sh_sourceCode">Стабильность<span class="sh_symbol">:</span> <span class="sh_number">3</span> <span class="sh_symbol">-</span> Заблокировано</pre><!--name=module-->
<p>Node.js имеет простую систему загрузки модулей.  В Node.js файлы и модули - это соответствие один к одному.  Как пример, <code>foo.js</code> загружает модуль
<code>circle.js</code> в той же директории.</p>
<p>Содержимое <code>foo.js</code>:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> circle <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'./circle.js'</span><span class="sh_symbol">);</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span> `Площадь круга радиуса <span class="sh_number">4</span> равна $<span class="sh_cbracket">{</span>circle<span class="sh_symbol">.</span><span class="sh_function">area</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span><span class="sh_cbracket">}</span>`<span class="sh_symbol">);</span>
</code></pre>
<p>Содержимое <code>circle.js</code>:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> PI <span class="sh_symbol">=</span> <span class="sh_predef_var">Math</span><span class="sh_symbol">.</span>PI<span class="sh_symbol">;</span>

exports<span class="sh_symbol">.</span>area <span class="sh_symbol">=</span> <span class="sh_symbol">(</span>r<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> PI <span class="sh_symbol">*</span> r <span class="sh_symbol">*</span> r<span class="sh_symbol">;</span>

exports<span class="sh_symbol">.</span>circumference <span class="sh_symbol">=</span> <span class="sh_symbol">(</span>r<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_number">2</span> <span class="sh_symbol">*</span> PI <span class="sh_symbol">*</span> r<span class="sh_symbol">;</span>
</code></pre>
<p>Модуль <code>circle.js</code> экспортирует функции <code>area()</code> и
<code>circumference()</code>.  Чтобы добавить функции и объекты в корень вашего модуля,
вы можете добавить их в специальный объект <code>exports</code>.</p>
<p>Переменные, локальные для модуля будут приватными, потому что модуль обертывается
в функцию Node.js (см. <a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_the_module_wrapper">module wrapper</a>).
В этом примере, переменная <code>PI</code> - приватна в <code>circle.js</code>.</p>
<p>Если вы хотите, чтобы корень export вашего модуля был функцияе (такой как окнструктор) или если вы хотите экспортировать целый объект с одним предназначением
вместо сборки его из всойств (...), используйте для этого <code>module.exports</code>
вместо <code>exports</code>.</p>
<p>Ниже, <code>bar.js</code> использует модуль <code>square</code>, который экспортирует конструктор:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> square <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'./square.js'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">var</span> mySquare <span class="sh_symbol">=</span> <span class="sh_function">square</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">);</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>`Площадь моего квадрата равна $<span class="sh_cbracket">{</span>mySquare<span class="sh_symbol">.</span><span class="sh_function">area</span><span class="sh_symbol">()</span><span class="sh_cbracket">}</span>`<span class="sh_symbol">);</span>
</code></pre>
<p>Модуль <code>square</code> определен в <code>square.js</code>:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_comment">// использование exports не модифицирует модуль, используйте module.exports</span>
module<span class="sh_symbol">.</span>exports <span class="sh_symbol">=</span> <span class="sh_symbol">(</span>width<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  <span class="sh_keyword">return</span> <span class="sh_cbracket">{</span>
    area<span class="sh_symbol">:</span> <span class="sh_symbol">()</span> <span class="sh_symbol">=&gt;</span> width <span class="sh_symbol">*</span> width
  <span class="sh_cbracket">}</span><span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>
</code></pre>
<p>Система модулей реализована в модуле <code>require("module")</code>.</p>
<h2>Доступ к главному модулю <span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_accessing_the_main_module" id="modules_accessing_the_main_module">#</a></span></h2>
<!-- type=misc -->
<p>Когда файл запущен напрямую из Node.js, <code>require.main</code> устанавливается в его
<code>module</code>. Это означает, что вы можете определить, был ли файл запущен напрямую,
проверив</p>
<pre class="sh_sourceCode"><code class="lang-js">require<span class="sh_symbol">.</span>main <span class="sh_symbol">===</span> module
</code></pre>
<p>Для файла <code>foo.js</code>, это будет <code>true</code> если запущено через <code>node foo.js</code>, но
<code>false</code>, если запущено <code>require('./foo')</code>.</p>
<p>Т.к. <code>module</code> предоставляет свойство <code>filename</code> (обычно равное
<code>__filename</code>), точка входа текущего приложения может быть получена
проверкой <code>require.main.filename</code>.</p>
<h2>Дополнение: Советы по пакетному менеджеру<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_addenda_package_manager_tips" id="modules_addenda_package_manager_tips">#</a></span></h2>
<!-- type=misc -->
<p>Семантика функции Node.js <code>require()</code> спроектирована главной, достаточной
для поддержки большого числа структур директорий. Программы пакетных менеджеров,
такие как <code>dpkg</code>, <code>rpm</code>, и <code>npm</code>, мы надеемся, найдет возможным
собирать нативные пакеты из модулей Node.js без модификации.</p>
<p>Ниже мы предлагаем структуру директорий, которая может работать:</p>
<p>Давайте скажем, что мы хотим папку
<code>/usr/lib/node/&lt;some-package&gt;/&lt;some-version&gt;</code>, содержащую определенную версию пакета.</p>
<p>Пакеты могут зависеть от других пакетов. Для установки пакета <code>foo</code>, вы
вы должны установа=ить определенную версию пакета <code>bar</code>.  Пакет <code>bar</code>
может сам иметь зависимости, и в некоторых случаях эти зависимости могут даже сталкиваться или формировать циклы.</p>
<p>Т.к. Node.js просматривает <code>realpath</code> множества пакетов, загружает их (возможно с разрешением симвлинков), 
и затем просматривает их зависимости в папке <code>node_modules</code>,
как описано <a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_loading_from_node_modules_folders">здесь</a>, эта
очень простая для разрешения следующей архитектуры:</p>
<ul>
<li><code>/usr/lib/node/foo/1.2.3/</code> - Содержит пакет <code>foo</code>, версии 1.2.3.</li>
<li><code>/usr/lib/node/bar/4.3.2/</code> - Содержит пакет <code>bar</code>, от которого зависит <code>foo</code>.</li>
<li><code>/usr/lib/node/foo/1.2.3/node_modules/bar</code> - Символьная ссылка на 
<code>/usr/lib/node/bar/4.3.2/</code>.</li>
<li><code>/usr/lib/node/bar/4.3.2/node_modules/*</code> - Симвользые ссылки на пакеты,
от которых зависит <code>bar</code>.</li>
</ul>
<p>Таким образом, даже если будет обнаружен цикл, или если возникнет конфликт зависимостей, 
каждый модуль будет в состоянии дать версию его зависимости, которую он может использовать.</p>
<p>Когда код в пакете <code>foo</code> выполняет <code>require('bar')</code>, он получит версию,
на которую ссылается симлинк <code>/usr/lib/node/foo/1.2.3/node_modules/bar</code>.
Затем, код в пакете <code>bar</code> вызывает <code>require('quux')</code>, он получит версию, на которую ссылается симлинк
<code>/usr/lib/node/bar/4.3.2/node_modules/quux</code>.</p>
<p>Более того, чтобы сделать процесс поиска модуля еще более оптимальным, 
вместо того, чтобы класть пакеты напрямую в <code>/usr/lib/node</code>, мы можем класть их в
<code>/usr/lib/node_modules/&lt;name&gt;/&lt;version&gt;</code>.  И Node.js не будет беспокоиться
просматривая отсутствующие зависимости в <code>/usr/node_modules</code> или <code>/node_modules</code>.</p>
<p>Чтобы сделать модули доступными в REPL Node.js, может быть также полезно
добавить папку <code>/usr/lib/node_modules</code> в переменную среды <code>$NODE_PATH</code>.
Т.к. поиск модулей использует папки <code>node_modules</code>, которые относительные,
и основан на реальных путях файлов, делая вызовы
<code>require()</code>, сами пакеты могут быть где угодно.</p>
<h2>Все вместе...<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_all_together" id="modules_all_together">#</a></span></h2>
<!-- type=misc -->
<p>Чтобы получить точное имя файла, которое будет загружено при вызове <code>require()</code>, используется
функция <code>require.resolve()</code>.</p>
<p>Соберем вместе все вышесказанное здесь в высокоуровневом алгоритме на псевдокоде о том, что делает require.resolve:</p>
<pre class="sh_sourceCode"><code><span class="sh_function">require</span><span class="sh_symbol">(</span>X<span class="sh_symbol">)</span> из модуля module с путем Y
<span class="sh_number">1</span><span class="sh_symbol">.</span> If X - это core module<span class="sh_symbol">,</span>
   a<span class="sh_symbol">.</span> <span class="sh_keyword">return</span> этот core module
   b<span class="sh_symbol">.</span> STOP
<span class="sh_number">2</span><span class="sh_symbol">.</span> If X начинается <span class="sh_keyword">с</span> <span class="sh_string">'./'</span> или <span class="sh_string">'/'</span> или <span class="sh_string">'../'</span>
   a<span class="sh_symbol">.</span> <span class="sh_function">LOAD_AS_FILE</span><span class="sh_symbol">(</span>Y <span class="sh_symbol">+</span> X<span class="sh_symbol">)</span>
   b<span class="sh_symbol">.</span> <span class="sh_function">LOAD_AS_DIRECTORY</span><span class="sh_symbol">(</span>Y <span class="sh_symbol">+</span> X<span class="sh_symbol">)</span>
<span class="sh_number">3</span><span class="sh_symbol">.</span> <span class="sh_function">LOAD_NODE_MODULES</span><span class="sh_symbol">(</span>X<span class="sh_symbol">,</span> <span class="sh_function">dirname</span><span class="sh_symbol">(</span>Y<span class="sh_symbol">))</span>
<span class="sh_number">4</span><span class="sh_symbol">.</span> THROW <span class="sh_string">"не найдено"</span>

<span class="sh_function">LOAD_AS_FILE</span><span class="sh_symbol">(</span>X<span class="sh_symbol">)</span>
<span class="sh_number">1</span><span class="sh_symbol">.</span> If X - файл<span class="sh_symbol">,</span> загрузить X как текст JavaScript<span class="sh_symbol">.</span>  STOP
<span class="sh_number">2</span><span class="sh_symbol">.</span> If X<span class="sh_symbol">.</span>js - файл<span class="sh_symbol">,</span> загрузить X<span class="sh_symbol">.</span>js как текст JavaScript<span class="sh_symbol">.</span>  STOP
<span class="sh_number">3</span><span class="sh_symbol">.</span> If X<span class="sh_symbol">.</span>json - файл<span class="sh_symbol">,</span> разобрать X<span class="sh_symbol">.</span>json в <span class="sh_predef_func">объект</span> JavaScript <span class="sh_symbol">.</span>  STOP
<span class="sh_number">4</span><span class="sh_symbol">.</span> If X<span class="sh_symbol">.</span>node - файл<span class="sh_symbol">,</span> загрузить X<span class="sh_symbol">.</span>node как бинарное расширение/дополнение/аддон<span class="sh_symbol">.</span>  STOP

<span class="sh_function">LOAD_AS_DIRECTORY</span><span class="sh_symbol">(</span>X<span class="sh_symbol">)</span>
<span class="sh_number">1</span><span class="sh_symbol">.</span> If <span class="sh_normal">X</span><span class="sh_symbol">/</span>package<span class="sh_symbol">.</span>json - файл<span class="sh_symbol">,</span>
   a<span class="sh_symbol">.</span> Разобрать <span class="sh_normal">X</span><span class="sh_symbol">/</span>package<span class="sh_symbol">.</span>json<span class="sh_symbol">,</span> и посмотреть <span class="sh_keyword">на</span> поле <span class="sh_string">"main"</span><span class="sh_symbol">.</span>
   b<span class="sh_symbol">.</span> let M <span class="sh_symbol">=</span> X <span class="sh_symbol">+</span> <span class="sh_symbol">(</span>это поле main<span class="sh_symbol">)</span>
   c<span class="sh_symbol">.</span> <span class="sh_function">LOAD_AS_FILE</span><span class="sh_symbol">(</span>M<span class="sh_symbol">)</span>
<span class="sh_number">2</span><span class="sh_symbol">.</span> If <span class="sh_normal">X</span><span class="sh_symbol">/</span>index<span class="sh_symbol">.</span>js - файл<span class="sh_symbol">,</span> загрузить <span class="sh_normal">X</span><span class="sh_symbol">/</span>index<span class="sh_symbol">.</span>js как текст JavaScript<span class="sh_symbol">.</span>  STOP
<span class="sh_number">3</span><span class="sh_symbol">.</span> If <span class="sh_normal">X</span><span class="sh_symbol">/</span>index<span class="sh_symbol">.</span>json - файл<span class="sh_symbol">,</span> разобрать <span class="sh_normal">X</span><span class="sh_symbol">/</span>index<span class="sh_symbol">.</span>json в объект JavaScript<span class="sh_symbol">.</span> STOP
<span class="sh_number">4</span><span class="sh_symbol">.</span> If <span class="sh_normal">X</span><span class="sh_symbol">/</span>index<span class="sh_symbol">.</span>node - файл<span class="sh_symbol">,</span> загрузить <span class="sh_normal">X</span><span class="sh_symbol">/</span>index<span class="sh_symbol">.</span>node как бинарное расширение/дополнение/аддон<span class="sh_symbol">.</span>  STOP

<span class="sh_function">LOAD_NODE_MODULES</span><span class="sh_symbol">(</span>X<span class="sh_symbol">,</span> START<span class="sh_symbol">)</span>
<span class="sh_number">1</span><span class="sh_symbol">.</span> let DIRS<span class="sh_symbol">=</span><span class="sh_function">NODE_MODULES_PATHS</span><span class="sh_symbol">(</span>START<span class="sh_symbol">)</span>
<span class="sh_number">2</span><span class="sh_symbol">.</span> <span class="sh_keyword">for</span> each DIR <span class="sh_keyword">in</span> DIRS<span class="sh_symbol">:</span>
   a<span class="sh_symbol">.</span> <span class="sh_function">LOAD_AS_FILE</span><span class="sh_symbol">(</span><span class="sh_normal">DIR</span><span class="sh_symbol">/</span>X<span class="sh_symbol">)</span>
   b<span class="sh_symbol">.</span> <span class="sh_function">LOAD_AS_DIRECTORY</span><span class="sh_symbol">(</span><span class="sh_normal">DIR</span><span class="sh_symbol">/</span>X<span class="sh_symbol">)</span>

<span class="sh_function">NODE_MODULES_PATHS</span><span class="sh_symbol">(</span>START<span class="sh_symbol">)</span>
<span class="sh_number">1</span><span class="sh_symbol">.</span> let PARTS <span class="sh_symbol">=</span> path <span class="sh_function">split</span><span class="sh_symbol">(</span>START<span class="sh_symbol">)</span>
<span class="sh_number">2</span><span class="sh_symbol">.</span> let I <span class="sh_symbol">=</span> количество PARTS <span class="sh_symbol">-</span> <span class="sh_number">1</span>
<span class="sh_number">3</span><span class="sh_symbol">.</span> let DIRS <span class="sh_symbol">=</span> <span class="sh_symbol">[]</span>
<span class="sh_number">4</span><span class="sh_symbol">.</span> <span class="sh_keyword">while</span> I <span class="sh_symbol">&gt;=</span> <span class="sh_number">0</span><span class="sh_symbol">,</span>
   a<span class="sh_symbol">.</span> <span class="sh_keyword">if</span> PARTS<span class="sh_symbol">[</span>I<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_string">"node_modules"</span> CONTINUE
   c<span class="sh_symbol">.</span> DIR <span class="sh_symbol">=</span> path <span class="sh_function">join</span><span class="sh_symbol">(</span>PARTS<span class="sh_symbol">[</span><span class="sh_number">0</span> <span class="sh_symbol">..</span> I<span class="sh_symbol">]</span> <span class="sh_symbol">+</span> <span class="sh_string">"node_modules"</span><span class="sh_symbol">)</span>
   b<span class="sh_symbol">.</span> DIRS <span class="sh_symbol">=</span> DIRS <span class="sh_symbol">+</span> DIR
   c<span class="sh_symbol">.</span> let I <span class="sh_symbol">=</span> I <span class="sh_symbol">-</span> <span class="sh_number">1</span>
<span class="sh_number">5</span><span class="sh_symbol">.</span> <span class="sh_keyword">return</span> DIRS
</code></pre><h2>Caching<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_caching" id="modules_caching">#</a></span></h2>
<!--type=misc-->
<p>Modules are cached after the first time they are loaded.  This means
(among other things) that every call to <code>require('foo')</code> will get
exactly the same object returned, if it would resolve to the same file.</p>
<p>Multiple calls to <code>require('foo')</code> may not cause the module code to be
executed multiple times.  This is an important feature.  With it,
"partially done" objects can be returned, thus allowing transitive
dependencies to be loaded even when they would cause cycles.</p>
<p>If you want to have a module execute code multiple times, then export a
function, and call that function.</p>
<h3>Module Caching Caveats<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_caching_caveats" id="modules_module_caching_caveats">#</a></span></h3>
<!--type=misc-->
<p>Modules are cached based on their resolved filename.  Since modules may
resolve to a different filename based on the location of the calling
module (loading from <code>node_modules</code> folders), it is not a <em>guarantee</em>
that <code>require('foo')</code> will always return the exact same object, if it
would resolve to different files.</p>
<p>Additionally, on case-insensitive file systems or operating systems, different
resolved filenames can point to the same file, but the cache will still treat
them as different modules and will reload the file multiple times. For example,
<code>require('./foo')</code> and <code>require('./FOO')</code> return two different objects,
irrespective of whether or not <code>./foo</code> and <code>./FOO</code> are the same file.</p>
<h2>Core Modules<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_core_modules" id="modules_core_modules">#</a></span></h2>
<!--type=misc-->
<p>Node.js has several modules compiled into the binary.  These modules are
described in greater detail elsewhere in this documentation.</p>
<p>The core modules are defined within Node.js's source and are located in the
<code>lib/</code> folder.</p>
<p>Core modules are always preferentially loaded if their identifier is
passed to <code>require()</code>.  For instance, <code>require('http')</code> will always
return the built in HTTP module, even if there is a file by that name.</p>
<h2>Cycles<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_cycles" id="modules_cycles">#</a></span></h2>
<!--type=misc-->
<p>When there are circular <code>require()</code> calls, a module might not have finished
executing when it is returned.</p>
<p>Consider this situation:</p>
<p><code>a.js</code>:</p>
<pre class="sh_sourceCode"><code>console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'a starting'</span><span class="sh_symbol">);</span>
exports<span class="sh_symbol">.</span>done <span class="sh_symbol">=</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span>
<span class="sh_keyword">const</span> b <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'./b.js'</span><span class="sh_symbol">);</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'in a, b.done = %j'</span><span class="sh_symbol">,</span> b<span class="sh_symbol">.</span>done<span class="sh_symbol">);</span>
exports<span class="sh_symbol">.</span>done <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'a done'</span><span class="sh_symbol">);</span>
</code></pre><p><code>b.js</code>:</p>
<pre class="sh_sourceCode"><code>console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'b starting'</span><span class="sh_symbol">);</span>
exports<span class="sh_symbol">.</span>done <span class="sh_symbol">=</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span>
<span class="sh_keyword">const</span> a <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'./a.js'</span><span class="sh_symbol">);</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'in b, a.done = %j'</span><span class="sh_symbol">,</span> a<span class="sh_symbol">.</span>done<span class="sh_symbol">);</span>
exports<span class="sh_symbol">.</span>done <span class="sh_symbol">=</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'b done'</span><span class="sh_symbol">);</span>
</code></pre><p><code>main.js</code>:</p>
<pre class="sh_sourceCode"><code>console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'main starting'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> a <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'./a.js'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> b <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'./b.js'</span><span class="sh_symbol">);</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'in main, a.done=%j, b.done=%j'</span><span class="sh_symbol">,</span> a<span class="sh_symbol">.</span>done<span class="sh_symbol">,</span> b<span class="sh_symbol">.</span>done<span class="sh_symbol">);</span>
</code></pre><p>When <code>main.js</code> loads <code>a.js</code>, then <code>a.js</code> in turn loads <code>b.js</code>.  At that
point, <code>b.js</code> tries to load <code>a.js</code>.  In order to prevent an infinite
loop, an <strong>unfinished copy</strong> of the <code>a.js</code> exports object is returned to the
<code>b.js</code> module.  <code>b.js</code> then finishes loading, and its <code>exports</code> object is
provided to the <code>a.js</code> module.</p>
<p>By the time <code>main.js</code> has loaded both modules, they're both finished.
The output of this program would thus be:</p>
<pre class="sh_sourceCode"><code>$ node main<span class="sh_symbol">.</span>js
main starting
a starting
b starting
<span class="sh_keyword">in</span> b<span class="sh_symbol">,</span> a<span class="sh_symbol">.</span>done <span class="sh_symbol">=</span> <span class="sh_keyword">false</span>
b done
<span class="sh_keyword">in</span> a<span class="sh_symbol">,</span> b<span class="sh_symbol">.</span>done <span class="sh_symbol">=</span> <span class="sh_keyword">true</span>
a done
<span class="sh_keyword">in</span> main<span class="sh_symbol">,</span> a<span class="sh_symbol">.</span>done<span class="sh_symbol">=</span><span class="sh_keyword">true</span><span class="sh_symbol">,</span> b<span class="sh_symbol">.</span>done<span class="sh_symbol">=</span><span class="sh_keyword">true</span>
</code></pre><p>If you have cyclic module dependencies in your program, make sure to
plan accordingly.</p>
<h2>File Modules<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_file_modules" id="modules_file_modules">#</a></span></h2>
<!--type=misc-->
<p>If the exact filename is not found, then Node.js will attempt to load the
required filename with the added extensions: <code>.js</code>, <code>.json</code>, and finally
<code>.node</code>.</p>
<p><code>.js</code> files are interpreted as JavaScript text files, and <code>.json</code> files are
parsed as JSON text files. <code>.node</code> files are interpreted as compiled addon
modules loaded with <code>dlopen</code>.</p>
<p>A required module prefixed with <code>'/'</code> is an absolute path to the file.  For
example, <code>require('/home/marco/foo.js')</code> will load the file at
<code>/home/marco/foo.js</code>.</p>
<p>A required module prefixed with <code>'./'</code> is relative to the file calling
<code>require()</code>. That is, <code>circle.js</code> must be in the same directory as <code>foo.js</code> for
<code>require('./circle')</code> to find it.</p>
<p>Without a leading '/', './', or '../' to indicate a file, the module must
either be a core module or is loaded from a <code>node_modules</code> folder.</p>
<p>If the given path does not exist, <code>require()</code> will throw an <a href="https://nodejs.org/dist/latest-v6.x/docs/api/errors.html#errors_class_error"><code>Error</code></a> with its
<code>code</code> property set to <code>'MODULE_NOT_FOUND'</code>.</p>
<h2>Folders as Modules<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_folders_as_modules" id="modules_folders_as_modules">#</a></span></h2>
<!--type=misc-->
<p>It is convenient to organize programs and libraries into self-contained
directories, and then provide a single entry point to that library.
There are three ways in which a folder may be passed to <code>require()</code> as
an argument.</p>
<p>The first is to create a <code>package.json</code> file in the root of the folder,
which specifies a <code>main</code> module.  An example package.json file might
look like this:</p>
<pre class="sh_sourceCode"><code><span class="sh_cbracket">{</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"some-library"</span><span class="sh_symbol">,</span>
  <span class="sh_string">"main"</span> <span class="sh_symbol">:</span> <span class="sh_string">"./lib/some-library.js"</span> <span class="sh_cbracket">}</span>
</code></pre><p>If this was in a folder at <code>./some-library</code>, then
<code>require('./some-library')</code> would attempt to load
<code>./some-library/lib/some-library.js</code>.</p>
<p>This is the extent of Node.js's awareness of package.json files.</p>
<p>Note: If the file specified by the <code>"main"</code> entry of <code>package.json</code> is missing
and can not be resolved, Node.js will report the entire module as missing with
the default error:</p>
<pre class="sh_sourceCode"><code><span class="sh_predef_func">Error</span><span class="sh_symbol">:</span> Cannot find module <span class="sh_string">'some-library'</span>
</code></pre><p>If there is no package.json file present in the directory, then Node.js
will attempt to load an <code>index.js</code> or <code>index.node</code> file out of that
directory.  For example, if there was no package.json file in the above
example, then <code>require('./some-library')</code> would attempt to load:</p>
<ul>
<li><code>./some-library/index.js</code></li>
<li><code>./some-library/index.node</code></li>
</ul>
<h2>Loading from <code>node_modules</code> Folders<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_loading_from_node_modules_folders" id="modules_loading_from_node_modules_folders">#</a></span></h2>
<!--type=misc-->
<p>If the module identifier passed to <code>require()</code> is not a native module,
and does not begin with <code>'/'</code>, <code>'../'</code>, or <code>'./'</code>, then Node.js starts at the
parent directory of the current module, and adds <code>/node_modules</code>, and
attempts to load the module from that location. Node will not append
<code>node_modules</code> to a path already ending in <code>node_modules</code>.</p>
<p>If it is not found there, then it moves to the parent directory, and so
on, until the root of the file system is reached.</p>
<p>For example, if the file at <code>'/home/ry/projects/foo.js'</code> called
<code>require('bar.js')</code>, then Node.js would look in the following locations, in
this order:</p>
<ul>
<li><code>/home/ry/projects/node_modules/bar.js</code></li>
<li><code>/home/ry/node_modules/bar.js</code></li>
<li><code>/home/node_modules/bar.js</code></li>
<li><code>/node_modules/bar.js</code></li>
</ul>
<p>This allows programs to localize their dependencies, so that they do not
clash.</p>
<p>You can require specific files or sub modules distributed with a module by
including a path suffix after the module name. For instance
<code>require('example-module/path/to/file')</code> would resolve <code>path/to/file</code>
relative to where <code>example-module</code> is located. The suffixed path follows the
same module resolution semantics.</p>
<h2>Loading from the global folders<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_loading_from_the_global_folders" id="modules_loading_from_the_global_folders">#</a></span></h2>
<!-- type=misc -->
<p>If the <code>NODE_PATH</code> environment variable is set to a colon-delimited list
of absolute paths, then Node.js will search those paths for modules if they
are not found elsewhere.  (Note: On Windows, <code>NODE_PATH</code> is delimited by
semicolons instead of colons.)</p>
<p><code>NODE_PATH</code> was originally created to support loading modules from
varying paths before the current <a href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_all_together">module resolution</a> algorithm was frozen.</p>
<p><code>NODE_PATH</code> is still supported, but is less necessary now that the Node.js
ecosystem has settled on a convention for locating dependent modules.
Sometimes deployments that rely on <code>NODE_PATH</code> show surprising behavior
when people are unaware that <code>NODE_PATH</code> must be set.  Sometimes a
module's dependencies change, causing a different version (or even a
different module) to be loaded as the <code>NODE_PATH</code> is searched.</p>
<p>Additionally, Node.js will search in the following locations:</p>
<ul>
<li>1: <code>$HOME/.node_modules</code></li>
<li>2: <code>$HOME/.node_libraries</code></li>
<li>3: <code>$PREFIX/lib/node</code></li>
</ul>
<p>Where <code>$HOME</code> is the user's home directory, and <code>$PREFIX</code> is Node.js's
configured <code>node_prefix</code>.</p>
<p>These are mostly for historic reasons.  <strong>You are highly encouraged
to place your dependencies locally in <code>node_modules</code> folders.</strong>  They
will be loaded faster, and more reliably.</p>
<h2>The module wrapper<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_the_module_wrapper" id="modules_the_module_wrapper">#</a></span></h2>
<!-- type=misc -->
<p>Before a module's code is executed, Node.js will wrap it with a function
wrapper that looks like the following:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_symbol">(</span><span class="sh_keyword">function</span> <span class="sh_symbol">(</span>exports<span class="sh_symbol">,</span> require<span class="sh_symbol">,</span> module<span class="sh_symbol">,</span> __filename<span class="sh_symbol">,</span> __dirname<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
<span class="sh_comment">// Your module code actually lives in here</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<p>By doing this, Node.js achieves a few things:</p>
<ul>
<li>It keeps top-level variables (defined with <code>var</code>, <code>const</code> or <code>let</code>) scoped to
the module rather than the global object.</li>
<li>It helps to provide some global-looking variables that are actually specific
to the module, such as:<ul>
<li>The <code>module</code> and <code>exports</code> objects that the implementor can use to export
values from the module.</li>
<li>The convenience variables <code>__filename</code> and <code>__dirname</code>, containing the
module's absolute filename and directory path.</li>
</ul>
</li>
</ul>
<h2>The <code>module</code> Object<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_the_module_object" id="modules_the_module_object">#</a></span></h2>
<!-- type=var -->
<!-- name=module -->
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a></li>
</ul>
<p>In each module, the <code>module</code> free variable is a reference to the object
representing the current module.  For convenience, <code>module.exports</code> is
also accessible via the <code>exports</code> module-global. <code>module</code> isn't actually
a global but rather local to each module.</p>
<h3>module.children<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_children" id="modules_module_children">#</a></span></h3>
<div class="signature"><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" class="type">&lt;Array&gt;</a></li>
</ul>
</div><p>The module objects required by this one.</p>
<h3>module.exports<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_exports" id="modules_module_exports">#</a></span></h3>
<div class="signature"><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a></li>
</ul>
</div><p>The <code>module.exports</code> object is created by the Module system. Sometimes this is
not acceptable; many want their module to be an instance of some class. To do
this, assign the desired export object to <code>module.exports</code>. Note that assigning
the desired object to <code>exports</code> will simply rebind the local <code>exports</code> variable,
which is probably not what you want to do.</p>
<p>For example suppose we were making a module called <code>a.js</code></p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> EventEmitter <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'events'</span><span class="sh_symbol">);</span>

module<span class="sh_symbol">.</span>exports <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">EventEmitter</span><span class="sh_symbol">();</span>

<span class="sh_comment">// Do some work, and after some time emit</span>
<span class="sh_comment">// the 'ready' event from the module itself.</span>
<span class="sh_function">setTimeout</span><span class="sh_symbol">(()</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  module<span class="sh_symbol">.</span>exports<span class="sh_symbol">.</span><span class="sh_function">emit</span><span class="sh_symbol">(</span><span class="sh_string">'ready'</span><span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">,</span> <span class="sh_number">1000</span><span class="sh_symbol">);</span>
</code></pre>
<p>Then in another file we could do</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> a <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'./a'</span><span class="sh_symbol">);</span>
a<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'ready'</span><span class="sh_symbol">,</span> <span class="sh_symbol">()</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'module a is ready'</span><span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<p>Note that assignment to <code>module.exports</code> must be done immediately. It cannot be
done in any callbacks.  This does not work:</p>
<p>x.js:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_function">setTimeout</span><span class="sh_symbol">(()</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  module<span class="sh_symbol">.</span>exports <span class="sh_symbol">=</span> <span class="sh_cbracket">{</span> a<span class="sh_symbol">:</span> <span class="sh_string">'hello'</span> <span class="sh_cbracket">}</span><span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
</code></pre>
<p>y.js:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> x <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'./x'</span><span class="sh_symbol">);</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>x<span class="sh_symbol">.</span>a<span class="sh_symbol">);</span>
</code></pre>
<h4>exports alias<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_exports_alias" id="modules_exports_alias">#</a></span></h4>
<p>The <code>exports</code> variable that is available within a module starts as a reference
to <code>module.exports</code>. As with any variable, if you assign a new value to it, it
is no longer bound to the previous value.</p>
<p>To illustrate the behavior, imagine this hypothetical implementation of
<code>require()</code>:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">function</span> <span class="sh_function">require</span><span class="sh_symbol">(...)</span> <span class="sh_cbracket">{</span>
  <span class="sh_comment">// ...</span>
  <span class="sh_symbol">((</span>module<span class="sh_symbol">,</span> exports<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
    <span class="sh_comment">// Your module code here</span>
    exports <span class="sh_symbol">=</span> some_func<span class="sh_symbol">;</span>        <span class="sh_comment">// re-assigns exports, exports is no longer</span>
                                <span class="sh_comment">// a shortcut, and nothing is exported.</span>
    module<span class="sh_symbol">.</span>exports <span class="sh_symbol">=</span> some_func<span class="sh_symbol">;</span> <span class="sh_comment">// makes your module export 0</span>
  <span class="sh_cbracket">}</span><span class="sh_symbol">)(</span>module<span class="sh_symbol">,</span> module<span class="sh_symbol">.</span>exports<span class="sh_symbol">);</span>
  <span class="sh_keyword">return</span> module<span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>
</code></pre>
<p>As a guideline, if the relationship between <code>exports</code> and <code>module.exports</code>
seems like magic to you, ignore <code>exports</code> and only use <code>module.exports</code>.</p>
<h3>module.filename<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_filename" id="modules_module_filename">#</a></span></h3>
<div class="signature"><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;String&gt;</a></li>
</ul>
</div><p>The fully resolved filename to the module.</p>
<h3>module.id<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_id" id="modules_module_id">#</a></span></h3>
<div class="signature"><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;String&gt;</a></li>
</ul>
</div><p>The identifier for the module.  Typically this is the fully resolved
filename.</p>
<h3>module.loaded<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_loaded" id="modules_module_loaded">#</a></span></h3>
<div class="signature"><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;Boolean&gt;</a></li>
</ul>
</div><p>Whether or not the module is done loading, or is in the process of
loading.</p>
<h3>module.parent<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_parent" id="modules_module_parent">#</a></span></h3>
<div class="signature"><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> Module object</li>
</ul>
</div><p>The module that first required this one.</p>
<h3>module.require(id)<span><a class="mark" href="https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_require_id" id="modules_module_require_id">#</a></span></h3>
<div class="signature"><ul>
<li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;String&gt;</a></li>
<li>Return: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> <code>module.exports</code> from the resolved module</li>
</ul>
</div><p>The <code>module.require</code> method provides a way to load a module as if
<code>require()</code> was called from the original module.</p>
<p>Note that in order to do this, you must get a reference to the <code>module</code>
object.  Since <code>require()</code> returns the <code>module.exports</code>, and the <code>module</code> is
typically <em>only</em> available within a specific module's code, it must be
explicitly exported in order to be used.</p>

      </div>
    </div>
  </div>
  <script src="./Modules Node.js v6.3.1 Manual &amp; Documentation_files/sh_main.js"></script>
  <script src="./Modules Node.js v6.3.1 Manual &amp; Documentation_files/sh_javascript.min.js"></script>
  <script>highlight(undefined, undefined, 'pre');</script>



</body></html>